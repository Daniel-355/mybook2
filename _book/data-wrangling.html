<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Data Wrangling | Biostatistics Handbook</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.46 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Data Wrangling | Biostatistics Handbook" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Data Wrangling | Biostatistics Handbook" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="Daniel He" />


<meta name="date" content="2026-02-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="machine-learning.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/table1-1.0/table1_defaults.css" rel="stylesheet" />


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Biostatistics Handbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>1</b> Data Wrangling</a>
<ul>
<li class="chapter" data-level="1.1" data-path="data-wrangling.html"><a href="data-wrangling.html#how-to-do-data-wrangling"><i class="fa fa-check"></i><b>1.1</b> How to do data wrangling</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="data-wrangling.html"><a href="data-wrangling.html#load-data-and-package"><i class="fa fa-check"></i><b>1.1.1</b> Load data and package</a></li>
<li class="chapter" data-level="1.1.2" data-path="data-wrangling.html"><a href="data-wrangling.html#select-certain-rows"><i class="fa fa-check"></i><b>1.1.2</b> Select certain rows</a></li>
<li class="chapter" data-level="1.1.3" data-path="data-wrangling.html"><a href="data-wrangling.html#select-certain-columns"><i class="fa fa-check"></i><b>1.1.3</b> Select certain columns</a></li>
<li class="chapter" data-level="1.1.4" data-path="data-wrangling.html"><a href="data-wrangling.html#rename-variables"><i class="fa fa-check"></i><b>1.1.4</b> Rename variables</a></li>
<li class="chapter" data-level="1.1.5" data-path="data-wrangling.html"><a href="data-wrangling.html#sorting-in-ascending-or-descending-order"><i class="fa fa-check"></i><b>1.1.5</b> Sorting in ascending or descending order</a></li>
<li class="chapter" data-level="1.1.6" data-path="data-wrangling.html"><a href="data-wrangling.html#transform-variables"><i class="fa fa-check"></i><b>1.1.6</b> Transform variables</a></li>
<li class="chapter" data-level="1.1.7" data-path="data-wrangling.html"><a href="data-wrangling.html#working-with-pipes"><i class="fa fa-check"></i><b>1.1.7</b> Working with pipes %&gt;%</a></li>
<li class="chapter" data-level="1.1.8" data-path="data-wrangling.html"><a href="data-wrangling.html#pivot-wider-long-to-wide"><i class="fa fa-check"></i><b>1.1.8</b> Pivot wider (long to wide)</a></li>
<li class="chapter" data-level="1.1.9" data-path="data-wrangling.html"><a href="data-wrangling.html#pivot-longer-wide-to-long"><i class="fa fa-check"></i><b>1.1.9</b> Pivot longer (wide to long)</a></li>
<li class="chapter" data-level="1.1.10" data-path="data-wrangling.html"><a href="data-wrangling.html#separate-columns"><i class="fa fa-check"></i><b>1.1.10</b> Separate columns</a></li>
<li class="chapter" data-level="1.1.11" data-path="data-wrangling.html"><a href="data-wrangling.html#recoderelabel-data"><i class="fa fa-check"></i><b>1.1.11</b> Recode/relabel data</a></li>
<li class="chapter" data-level="1.1.12" data-path="data-wrangling.html"><a href="data-wrangling.html#deduplication"><i class="fa fa-check"></i><b>1.1.12</b> deduplication</a></li>
<li class="chapter" data-level="1.1.13" data-path="data-wrangling.html"><a href="data-wrangling.html#combine-data-sets"><i class="fa fa-check"></i><b>1.1.13</b> Combine data sets</a></li>
<li class="chapter" data-level="1.1.14" data-path="data-wrangling.html"><a href="data-wrangling.html#working-with-character-strings"><i class="fa fa-check"></i><b>1.1.14</b> Working with character strings</a></li>
<li class="chapter" data-level="1.1.15" data-path="data-wrangling.html"><a href="data-wrangling.html#conditional-operations"><i class="fa fa-check"></i><b>1.1.15</b> Conditional operations</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="data-wrangling.html"><a href="data-wrangling.html#how-to-do-aggregation-summarization"><i class="fa fa-check"></i><b>1.2</b> How to do aggregation/ summarization</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="data-wrangling.html"><a href="data-wrangling.html#summarization-after-grouping"><i class="fa fa-check"></i><b>1.2.1</b> Summarization after grouping</a></li>
<li class="chapter" data-level="1.2.2" data-path="data-wrangling.html"><a href="data-wrangling.html#summarization-with-upgroup"><i class="fa fa-check"></i><b>1.2.2</b> Summarization with upgroup</a></li>
<li class="chapter" data-level="1.2.3" data-path="data-wrangling.html"><a href="data-wrangling.html#mutate-new-variables-after-grouping"><i class="fa fa-check"></i><b>1.2.3</b> Mutate new variables after grouping</a></li>
<li class="chapter" data-level="1.2.4" data-path="data-wrangling.html"><a href="data-wrangling.html#recode-and-generate-new-variables-then-value-label"><i class="fa fa-check"></i><b>1.2.4</b> Recode and generate new variables, then value label</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="data-wrangling.html"><a href="data-wrangling.html#how-to-creat-table-1-with-test"><i class="fa fa-check"></i><b>1.3</b> How to creat table 1 with test</a></li>
<li class="chapter" data-level="1.4" data-path="data-wrangling.html"><a href="data-wrangling.html#imputing-missing-data-with-mice"><i class="fa fa-check"></i><b>1.4</b> Imputing Missing Data with MICE</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>2</b> Machine learning</a></li>
<li class="chapter" data-level="3" data-path="deep-learning.html"><a href="deep-learning.html"><i class="fa fa-check"></i><b>3</b> Deep learning</a></li>
<li class="chapter" data-level="4" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>4</b> Data visualization</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-visualization.html"><a href="data-visualization.html#data-visualization-introduction"><i class="fa fa-check"></i><b>4.1</b> Data visualization introduction</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-visualization.html"><a href="data-visualization.html#summarization"><i class="fa fa-check"></i><b>4.1.1</b> Summarization</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-visualization.html"><a href="data-visualization.html#explore-missing-values"><i class="fa fa-check"></i><b>4.1.2</b> Explore missing values</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-visualization.html"><a href="data-visualization.html#add-statistical-test"><i class="fa fa-check"></i><b>4.1.3</b> Add statistical test</a></li>
<li class="chapter" data-level="4.1.4" data-path="data-visualization.html"><a href="data-visualization.html#add-texts-to-dots"><i class="fa fa-check"></i><b>4.1.4</b> Add texts to dots</a></li>
<li class="chapter" data-level="4.1.5" data-path="data-visualization.html"><a href="data-visualization.html#set-the-legend"><i class="fa fa-check"></i><b>4.1.5</b> Set the legend</a></li>
<li class="chapter" data-level="4.1.6" data-path="data-visualization.html"><a href="data-visualization.html#create-a-panel-of-plots"><i class="fa fa-check"></i><b>4.1.6</b> Create a panel of plots</a></li>
<li class="chapter" data-level="4.1.7" data-path="data-visualization.html"><a href="data-visualization.html#plots-in-regression"><i class="fa fa-check"></i><b>4.1.7</b> Plots in regression</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-visualization.html"><a href="data-visualization.html#scatter-plot"><i class="fa fa-check"></i><b>4.2</b> Scatter plot</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-visualization.html"><a href="data-visualization.html#create-a-empty-canvas"><i class="fa fa-check"></i><b>4.2.1</b> Create a empty canvas</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-visualization.html"><a href="data-visualization.html#add-a-layergeom-of-points-to-the-canvas"><i class="fa fa-check"></i><b>4.2.2</b> Add a layer/geom of <code>points</code> to the canvas</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-visualization.html"><a href="data-visualization.html#add-another-aesthetic"><i class="fa fa-check"></i><b>4.2.3</b> Add another aesthetic</a></li>
<li class="chapter" data-level="4.2.4" data-path="data-visualization.html"><a href="data-visualization.html#add-other-aesthetic"><i class="fa fa-check"></i><b>4.2.4</b> Add other aesthetic</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-visualization.html"><a href="data-visualization.html#bar-chart"><i class="fa fa-check"></i><b>4.3</b> Bar chart</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-visualization.html"><a href="data-visualization.html#add-some-options-for-the-whole-ggplot-rather-than-layers"><i class="fa fa-check"></i><b>4.3.1</b> Add some options for the whole ggplot rather than layers</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-visualization.html"><a href="data-visualization.html#grouped-bar-chart"><i class="fa fa-check"></i><b>4.3.2</b> Grouped bar chart</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-visualization.html"><a href="data-visualization.html#line-charts"><i class="fa fa-check"></i><b>4.4</b> Line charts</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-visualization.html"><a href="data-visualization.html#grouped-by-colour-variable"><i class="fa fa-check"></i><b>4.4.1</b> Grouped by <code>colour variable</code></a></li>
<li class="chapter" data-level="4.4.2" data-path="data-visualization.html"><a href="data-visualization.html#multiple-aesthetics"><i class="fa fa-check"></i><b>4.4.2</b> Multiple aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2-parameters"><i class="fa fa-check"></i><b>4.5</b> ggplot2 parameters</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="data-visualization.html"><a href="data-visualization.html#components-of-plot"><i class="fa fa-check"></i><b>4.5.1</b> Components of plot</a></li>
<li class="chapter" data-level="4.5.2" data-path="data-visualization.html"><a href="data-visualization.html#create-main-title-axis-labels-caption"><i class="fa fa-check"></i><b>4.5.2</b> Create main title, axis labels, caption</a></li>
<li class="chapter" data-level="4.5.3" data-path="data-visualization.html"><a href="data-visualization.html#create-legend-title-position"><i class="fa fa-check"></i><b>4.5.3</b> Create legend title, position</a></li>
<li class="chapter" data-level="4.5.4" data-path="data-visualization.html"><a href="data-visualization.html#change-plot-colors"><i class="fa fa-check"></i><b>4.5.4</b> Change plot colors</a></li>
<li class="chapter" data-level="4.5.5" data-path="data-visualization.html"><a href="data-visualization.html#change-points-shapes-transparent-and-size"><i class="fa fa-check"></i><b>4.5.5</b> Change points shapes, transparent and size</a></li>
<li class="chapter" data-level="4.5.6" data-path="data-visualization.html"><a href="data-visualization.html#change-bars-position"><i class="fa fa-check"></i><b>4.5.6</b> Change bars position</a></li>
<li class="chapter" data-level="4.5.7" data-path="data-visualization.html"><a href="data-visualization.html#add-text-annotations"><i class="fa fa-check"></i><b>4.5.7</b> Add text annotations</a></li>
<li class="chapter" data-level="4.5.8" data-path="data-visualization.html"><a href="data-visualization.html#add-a-line-that-separates-points"><i class="fa fa-check"></i><b>4.5.8</b> Add a line that (separates points)</a></li>
<li class="chapter" data-level="4.5.9" data-path="data-visualization.html"><a href="data-visualization.html#using-scale_-function"><i class="fa fa-check"></i><b>4.5.9</b> Using scale_ function</a></li>
<li class="chapter" data-level="4.5.10" data-path="data-visualization.html"><a href="data-visualization.html#change-coordinates"><i class="fa fa-check"></i><b>4.5.10</b> Change coordinates</a></li>
<li class="chapter" data-level="4.5.11" data-path="data-visualization.html"><a href="data-visualization.html#customize-axis-ticks"><i class="fa fa-check"></i><b>4.5.11</b> Customize axis ticks</a></li>
<li class="chapter" data-level="4.5.12" data-path="data-visualization.html"><a href="data-visualization.html#flip-and-reverse-plot"><i class="fa fa-check"></i><b>4.5.12</b> Flip and reverse plot</a></li>
<li class="chapter" data-level="4.5.13" data-path="data-visualization.html"><a href="data-visualization.html#create-stats"><i class="fa fa-check"></i><b>4.5.13</b> Create stats</a></li>
<li class="chapter" data-level="4.5.14" data-path="data-visualization.html"><a href="data-visualization.html#facets"><i class="fa fa-check"></i><b>4.5.14</b> Facets</a></li>
<li class="chapter" data-level="4.5.15" data-path="data-visualization.html"><a href="data-visualization.html#theme"><i class="fa fa-check"></i><b>4.5.15</b> Theme</a></li>
<li class="chapter" data-level="4.5.16" data-path="data-visualization.html"><a href="data-visualization.html#how-to-setup-subscripts-or-superscripts"><i class="fa fa-check"></i><b>4.5.16</b> How to setup subscripts or superscripts</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="data-visualization.html"><a href="data-visualization.html#how-to-create-advanced-plots"><i class="fa fa-check"></i><b>4.6</b> How to create advanced plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="basic-statistics.html"><a href="basic-statistics.html"><i class="fa fa-check"></i><b>5</b> Basic statistics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="basic-statistics.html"><a href="basic-statistics.html#the-essentials-of-r"><i class="fa fa-check"></i><b>5.1</b> The essentials of R</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="basic-statistics.html"><a href="basic-statistics.html#manipulation-of-vector"><i class="fa fa-check"></i><b>5.1.1</b> Manipulation of vector</a></li>
<li class="chapter" data-level="5.1.2" data-path="basic-statistics.html"><a href="basic-statistics.html#generate-sequence-or-repeted-sequece"><i class="fa fa-check"></i><b>5.1.2</b> Generate sequence or repeted sequece</a></li>
<li class="chapter" data-level="5.1.3" data-path="basic-statistics.html"><a href="basic-statistics.html#get-directory-and-write-data-out-and-in"><i class="fa fa-check"></i><b>5.1.3</b> Get directory and write data out and in</a></li>
<li class="chapter" data-level="5.1.4" data-path="basic-statistics.html"><a href="basic-statistics.html#function"><i class="fa fa-check"></i><b>5.1.4</b> Function</a></li>
<li class="chapter" data-level="5.1.5" data-path="basic-statistics.html"><a href="basic-statistics.html#plot"><i class="fa fa-check"></i><b>5.1.5</b> Plot</a></li>
<li class="chapter" data-level="5.1.6" data-path="basic-statistics.html"><a href="basic-statistics.html#build-model-and-plot"><i class="fa fa-check"></i><b>5.1.6</b> Build model and plot</a></li>
<li class="chapter" data-level="5.1.7" data-path="basic-statistics.html"><a href="basic-statistics.html#rename-names-of-columns"><i class="fa fa-check"></i><b>5.1.7</b> Rename names of columns</a></li>
<li class="chapter" data-level="5.1.8" data-path="basic-statistics.html"><a href="basic-statistics.html#class-of-dataframe"><i class="fa fa-check"></i><b>5.1.8</b> Class of dataframe</a></li>
<li class="chapter" data-level="5.1.9" data-path="basic-statistics.html"><a href="basic-statistics.html#generate-new-variable-for-dataframe-character"><i class="fa fa-check"></i><b>5.1.9</b> Generate new variable for dataframe (character)</a></li>
<li class="chapter" data-level="5.1.10" data-path="basic-statistics.html"><a href="basic-statistics.html#create-a-new-dataframe-using-rnorm---random-number-from-distribution"><i class="fa fa-check"></i><b>5.1.10</b> Create a new dataframe using ‘rnorm’ - random number from distribution</a></li>
<li class="chapter" data-level="5.1.11" data-path="basic-statistics.html"><a href="basic-statistics.html#left-join-two-dataframes"><i class="fa fa-check"></i><b>5.1.11</b> Left join two dataframes</a></li>
<li class="chapter" data-level="5.1.12" data-path="basic-statistics.html"><a href="basic-statistics.html#select-variables"><i class="fa fa-check"></i><b>5.1.12</b> Select variables</a></li>
<li class="chapter" data-level="5.1.13" data-path="basic-statistics.html"><a href="basic-statistics.html#filter-observations"><i class="fa fa-check"></i><b>5.1.13</b> Filter observations</a></li>
<li class="chapter" data-level="5.1.14" data-path="basic-statistics.html"><a href="basic-statistics.html#append-rows"><i class="fa fa-check"></i><b>5.1.14</b> Append rows</a></li>
<li class="chapter" data-level="5.1.15" data-path="basic-statistics.html"><a href="basic-statistics.html#create-new-variables-instead-of-old-variables"><i class="fa fa-check"></i><b>5.1.15</b> Create new variables instead of old variables</a></li>
<li class="chapter" data-level="5.1.16" data-path="basic-statistics.html"><a href="basic-statistics.html#summarise-statistics"><i class="fa fa-check"></i><b>5.1.16</b> summarise statistics</a></li>
<li class="chapter" data-level="5.1.17" data-path="basic-statistics.html"><a href="basic-statistics.html#group-dataframe-then-summarise-statistics"><i class="fa fa-check"></i><b>5.1.17</b> Group dataframe then summarise statistics</a></li>
<li class="chapter" data-level="5.1.18" data-path="basic-statistics.html"><a href="basic-statistics.html#ungroup-then-summarise-statistics"><i class="fa fa-check"></i><b>5.1.18</b> Ungroup then summarise statistics</a></li>
<li class="chapter" data-level="5.1.19" data-path="basic-statistics.html"><a href="basic-statistics.html#summary-linear-regression-model"><i class="fa fa-check"></i><b>5.1.19</b> Summary linear regression model</a></li>
<li class="chapter" data-level="5.1.20" data-path="basic-statistics.html"><a href="basic-statistics.html#create-frequency-table"><i class="fa fa-check"></i><b>5.1.20</b> Create frequency table</a></li>
<li class="chapter" data-level="5.1.21" data-path="basic-statistics.html"><a href="basic-statistics.html#value-and-variable-label"><i class="fa fa-check"></i><b>5.1.21</b> Value and variable label</a></li>
<li class="chapter" data-level="5.1.22" data-path="basic-statistics.html"><a href="basic-statistics.html#recode-a-variable"><i class="fa fa-check"></i><b>5.1.22</b> Recode a variable</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="basic-statistics.html"><a href="basic-statistics.html#central-limit-theorem"><i class="fa fa-check"></i><b>5.2</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="5.3" data-path="basic-statistics.html"><a href="basic-statistics.html#common-statistical-distribution"><i class="fa fa-check"></i><b>5.3</b> Common statistical distribution</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="statistical-models.html"><a href="statistical-models.html"><i class="fa fa-check"></i><b>6</b> Statistical models</a>
<ul>
<li class="chapter" data-level="6.1" data-path="statistical-models.html"><a href="statistical-models.html#simple-linear-regression"><i class="fa fa-check"></i><b>6.1</b> Simple linear regression</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="statistical-models.html"><a href="statistical-models.html#linear-regeression-assumptions"><i class="fa fa-check"></i><b>6.1.1</b> Linear regeression assumptions</a></li>
<li class="chapter" data-level="6.1.2" data-path="statistical-models.html"><a href="statistical-models.html#population-regression-function"><i class="fa fa-check"></i><b>6.1.2</b> Population regression function</a></li>
<li class="chapter" data-level="6.1.3" data-path="statistical-models.html"><a href="statistical-models.html#population-regression-model"><i class="fa fa-check"></i><b>6.1.3</b> Population regression model</a></li>
<li class="chapter" data-level="6.1.4" data-path="statistical-models.html"><a href="statistical-models.html#sample-regression-model"><i class="fa fa-check"></i><b>6.1.4</b> Sample regression model</a></li>
<li class="chapter" data-level="6.1.5" data-path="statistical-models.html"><a href="statistical-models.html#least-squares-minimize-qsum-y_i-haty_i2"><i class="fa fa-check"></i><b>6.1.5</b> Least squares: minimize <span class="math inline">\(Q=\sum (Y_i-\hat{Y}_i)^2\)</span></a></li>
<li class="chapter" data-level="6.1.6" data-path="statistical-models.html"><a href="statistical-models.html#solve-hatbeta_1hatbeta_2-and-variance"><i class="fa fa-check"></i><b>6.1.6</b> Solve <span class="math inline">\(\hat{\beta}_1,\hat{\beta}_2\)</span> and variance</a></li>
<li class="chapter" data-level="6.1.7" data-path="statistical-models.html"><a href="statistical-models.html#calculate-the-variance-hatsigma2-of-error-e_i"><i class="fa fa-check"></i><b>6.1.7</b> Calculate the variance <span class="math inline">\(\hat{\sigma}^2\)</span> of error <span class="math inline">\(e_i\)</span></a></li>
<li class="chapter" data-level="6.1.8" data-path="statistical-models.html"><a href="statistical-models.html#sum-of-squares-decomposition"><i class="fa fa-check"></i><b>6.1.8</b> Sum of squares decomposition</a></li>
<li class="chapter" data-level="6.1.9" data-path="statistical-models.html"><a href="statistical-models.html#coefficient-of-determination-r2-and-goodness-of-fit"><i class="fa fa-check"></i><b>6.1.9</b> Coefficient of determination <span class="math inline">\(R^2\)</span> and goodness of fit</a></li>
<li class="chapter" data-level="6.1.10" data-path="statistical-models.html"><a href="statistical-models.html#test-of-regression-coefficients"><i class="fa fa-check"></i><b>6.1.10</b> Test of regression coefficients</a></li>
<li class="chapter" data-level="6.1.11" data-path="statistical-models.html"><a href="statistical-models.html#statistical-test-of-model"><i class="fa fa-check"></i><b>6.1.11</b> Statistical test of model</a></li>
<li class="chapter" data-level="6.1.12" data-path="statistical-models.html"><a href="statistical-models.html#mean-prediction"><i class="fa fa-check"></i><b>6.1.12</b> Mean prediction</a></li>
<li class="chapter" data-level="6.1.13" data-path="statistical-models.html"><a href="statistical-models.html#individual-prediction"><i class="fa fa-check"></i><b>6.1.13</b> Individual prediction</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="statistical-models.html"><a href="statistical-models.html#multiple-linear-regression"><i class="fa fa-check"></i><b>6.2</b> Multiple linear regression</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="statistical-models.html"><a href="statistical-models.html#matrix-format"><i class="fa fa-check"></i><b>6.2.1</b> Matrix format</a></li>
<li class="chapter" data-level="6.2.2" data-path="statistical-models.html"><a href="statistical-models.html#variance-covariance-matrix-of-random-errors"><i class="fa fa-check"></i><b>6.2.2</b> Variance covariance matrix of random errors</a></li>
<li class="chapter" data-level="6.2.3" data-path="statistical-models.html"><a href="statistical-models.html#minimize-qsum-y-haty2"><i class="fa fa-check"></i><b>6.2.3</b> Minimize <span class="math inline">\(Q=\sum (y-\hat{y})^2\)</span></a></li>
<li class="chapter" data-level="6.2.4" data-path="statistical-models.html"><a href="statistical-models.html#solve-hatbeta-by-derivation"><i class="fa fa-check"></i><b>6.2.4</b> Solve <span class="math inline">\(\hat{\beta}\)</span> by derivation</a></li>
<li class="chapter" data-level="6.2.5" data-path="statistical-models.html"><a href="statistical-models.html#solve-vartext-covmathbfhatbeta"><i class="fa fa-check"></i><b>6.2.5</b> Solve <span class="math inline">\(var\text{-}cov(\mathbf{\hat{\beta}})\)</span></a></li>
<li class="chapter" data-level="6.2.6" data-path="statistical-models.html"><a href="statistical-models.html#solve-s2mathbfhatbeta-sample"><i class="fa fa-check"></i><b>6.2.6</b> Solve <span class="math inline">\(S^2(\mathbf{\hat{\beta}})\)</span> (sample)</a></li>
<li class="chapter" data-level="6.2.7" data-path="statistical-models.html"><a href="statistical-models.html#sum-of-squares-decomposition-matrix-format"><i class="fa fa-check"></i><b>6.2.7</b> Sum of squares decomposition (matrix format)</a></li>
<li class="chapter" data-level="6.2.8" data-path="statistical-models.html"><a href="statistical-models.html#determination-coefficient-r2-and-goodness-of-fit"><i class="fa fa-check"></i><b>6.2.8</b> Determination coefficient <span class="math inline">\(R^2\)</span> and goodness of fit</a></li>
<li class="chapter" data-level="6.2.9" data-path="statistical-models.html"><a href="statistical-models.html#test-of-regression-coefficients-1"><i class="fa fa-check"></i><b>6.2.9</b> Test of regression coefficients</a></li>
<li class="chapter" data-level="6.2.10" data-path="statistical-models.html"><a href="statistical-models.html#test-of-model"><i class="fa fa-check"></i><b>6.2.10</b> Test of model</a></li>
<li class="chapter" data-level="6.2.11" data-path="statistical-models.html"><a href="statistical-models.html#mean-prediction-multiple-regression"><i class="fa fa-check"></i><b>6.2.11</b> Mean prediction (multiple regression)</a></li>
<li class="chapter" data-level="6.2.12" data-path="statistical-models.html"><a href="statistical-models.html#individual-prediction-multiple-regression"><i class="fa fa-check"></i><b>6.2.12</b> Individual prediction (multiple regression)</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="statistical-models.html"><a href="statistical-models.html#multiple-linear-regression-practice"><i class="fa fa-check"></i><b>6.3</b> Multiple linear regression practice</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="statistical-models.html"><a href="statistical-models.html#load-required-packages"><i class="fa fa-check"></i><b>6.3.1</b> Load required packages</a></li>
<li class="chapter" data-level="6.3.2" data-path="statistical-models.html"><a href="statistical-models.html#loading-and-describing-data"><i class="fa fa-check"></i><b>6.3.2</b> Loading and describing data</a></li>
<li class="chapter" data-level="6.3.3" data-path="statistical-models.html"><a href="statistical-models.html#create-table-1"><i class="fa fa-check"></i><b>6.3.3</b> Create table 1</a></li>
<li class="chapter" data-level="6.3.4" data-path="statistical-models.html"><a href="statistical-models.html#missingness-checking"><i class="fa fa-check"></i><b>6.3.4</b> Missingness checking</a></li>
<li class="chapter" data-level="6.3.5" data-path="statistical-models.html"><a href="statistical-models.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>6.3.5</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="6.3.6" data-path="statistical-models.html"><a href="statistical-models.html#transformations"><i class="fa fa-check"></i><b>6.3.6</b> Transformations</a></li>
<li class="chapter" data-level="6.3.7" data-path="statistical-models.html"><a href="statistical-models.html#check-linearity-between-y-and-x"><i class="fa fa-check"></i><b>6.3.7</b> Check linearity between <span class="math inline">\(y\)</span> and <span class="math inline">\(x\)</span></a></li>
<li class="chapter" data-level="6.3.8" data-path="statistical-models.html"><a href="statistical-models.html#data-imputation-and-normalization"><i class="fa fa-check"></i><b>6.3.8</b> Data imputation and normalization</a></li>
<li class="chapter" data-level="6.3.9" data-path="statistical-models.html"><a href="statistical-models.html#generate-dummy-variables"><i class="fa fa-check"></i><b>6.3.9</b> Generate dummy variables</a></li>
<li class="chapter" data-level="6.3.10" data-path="statistical-models.html"><a href="statistical-models.html#splitting-data-into-training-and-test-data"><i class="fa fa-check"></i><b>6.3.10</b> Splitting data into training and test data</a></li>
<li class="chapter" data-level="6.3.11" data-path="statistical-models.html"><a href="statistical-models.html#step-regression"><i class="fa fa-check"></i><b>6.3.11</b> Step regression</a></li>
<li class="chapter" data-level="6.3.12" data-path="statistical-models.html"><a href="statistical-models.html#create-a-model-after-selecting-variables"><i class="fa fa-check"></i><b>6.3.12</b> Create a model after selecting variables</a></li>
<li class="chapter" data-level="6.3.13" data-path="statistical-models.html"><a href="statistical-models.html#multicollinearity-checking"><i class="fa fa-check"></i><b>6.3.13</b> Multicollinearity checking</a></li>
<li class="chapter" data-level="6.3.14" data-path="statistical-models.html"><a href="statistical-models.html#plot-model-to-check-assumptions"><i class="fa fa-check"></i><b>6.3.14</b> Plot model to check assumptions</a></li>
<li class="chapter" data-level="6.3.15" data-path="statistical-models.html"><a href="statistical-models.html#add-polynomial-quadratic-terms"><i class="fa fa-check"></i><b>6.3.15</b> Add polynomial (quadratic) terms</a></li>
<li class="chapter" data-level="6.3.16" data-path="statistical-models.html"><a href="statistical-models.html#add-interaction-terms"><i class="fa fa-check"></i><b>6.3.16</b> Add interaction terms</a></li>
<li class="chapter" data-level="6.3.17" data-path="statistical-models.html"><a href="statistical-models.html#robust-regression"><i class="fa fa-check"></i><b>6.3.17</b> Robust regression</a></li>
<li class="chapter" data-level="6.3.18" data-path="statistical-models.html"><a href="statistical-models.html#create-a-model-before-transforming-data"><i class="fa fa-check"></i><b>6.3.18</b> Create a model before transforming data</a></li>
<li class="chapter" data-level="6.3.19" data-path="statistical-models.html"><a href="statistical-models.html#k-fold-cross-validation"><i class="fa fa-check"></i><b>6.3.19</b> K-fold cross validation</a></li>
<li class="chapter" data-level="6.3.20" data-path="statistical-models.html"><a href="statistical-models.html#nonnest-models-comparisons"><i class="fa fa-check"></i><b>6.3.20</b> Nonnest models comparisons</a></li>
<li class="chapter" data-level="6.3.21" data-path="statistical-models.html"><a href="statistical-models.html#posterior-predictive-diagnostic-checks"><i class="fa fa-check"></i><b>6.3.21</b> Posterior predictive / diagnostic checks</a></li>
<li class="chapter" data-level="6.3.22" data-path="statistical-models.html"><a href="statistical-models.html#forest-plot-for-coefficients"><i class="fa fa-check"></i><b>6.3.22</b> Forest plot for coefficients</a></li>
<li class="chapter" data-level="6.3.23" data-path="statistical-models.html"><a href="statistical-models.html#relative-importance"><i class="fa fa-check"></i><b>6.3.23</b> Relative Importance</a></li>
<li class="chapter" data-level="6.3.24" data-path="statistical-models.html"><a href="statistical-models.html#model-prediction"><i class="fa fa-check"></i><b>6.3.24</b> Model prediction</a></li>
<li class="chapter" data-level="6.3.25" data-path="statistical-models.html"><a href="statistical-models.html#compare-predictions-vs-actual-values"><i class="fa fa-check"></i><b>6.3.25</b> Compare predictions vs actual values</a></li>
<li class="chapter" data-level="6.3.26" data-path="statistical-models.html"><a href="statistical-models.html#manual-computation-haty-and-confidence-interval"><i class="fa fa-check"></i><b>6.3.26</b> Manual computation: <span class="math inline">\(\hat{y}\)</span> and confidence interval</a></li>
<li class="chapter" data-level="6.3.27" data-path="statistical-models.html"><a href="statistical-models.html#external-data-validation"><i class="fa fa-check"></i><b>6.3.27</b> External data validation</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="statistical-models.html"><a href="statistical-models.html#variable-selection"><i class="fa fa-check"></i><b>6.4</b> Variable selection</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="statistical-models.html"><a href="statistical-models.html#chapter-takeaways"><i class="fa fa-check"></i><b>6.4.1</b> Chapter takeaways</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="statistical-models.html"><a href="statistical-models.html#linear-mixed-model-theory"><i class="fa fa-check"></i><b>6.5</b> Linear mixed model theory</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="statistical-models.html"><a href="statistical-models.html#matrix-format-1"><i class="fa fa-check"></i><b>6.5.1</b> Matrix format</a></li>
<li class="chapter" data-level="6.5.2" data-path="statistical-models.html"><a href="statistical-models.html#why-random-effects-create-correlation"><i class="fa fa-check"></i><b>6.5.2</b> Why random effects create correlation</a></li>
<li class="chapter" data-level="6.5.3" data-path="statistical-models.html"><a href="statistical-models.html#example-reducing-the-work-stress-of-nurses"><i class="fa fa-check"></i><b>6.5.3</b> Example: reducing the work stress of nurses</a></li>
<li class="chapter" data-level="6.5.4" data-path="statistical-models.html"><a href="statistical-models.html#the-dependent-variable-mathbfy"><i class="fa fa-check"></i><b>6.5.4</b> The dependent variable <span class="math inline">\(\mathbf{y}\)</span></a></li>
<li class="chapter" data-level="6.5.5" data-path="statistical-models.html"><a href="statistical-models.html#fixed-effects-design-matrix-mathbfx"><i class="fa fa-check"></i><b>6.5.5</b> Fixed effects design matrix <span class="math inline">\(\mathbf{X}\)</span></a></li>
<li class="chapter" data-level="6.5.6" data-path="statistical-models.html"><a href="statistical-models.html#fixed-effect-coefficients-boldsymbolhatbeta"><i class="fa fa-check"></i><b>6.5.6</b> Fixed effect coefficients <span class="math inline">\(\boldsymbol{\hat{\beta}}\)</span></a></li>
<li class="chapter" data-level="6.5.7" data-path="statistical-models.html"><a href="statistical-models.html#variancecovariance-matrix-of-hatbeta"><i class="fa fa-check"></i><b>6.5.7</b> Variance–covariance matrix of <span class="math inline">\(\hat{\beta}\)</span></a></li>
<li class="chapter" data-level="6.5.8" data-path="statistical-models.html"><a href="statistical-models.html#random-effects-design-matrix-mathbfz"><i class="fa fa-check"></i><b>6.5.8</b> Random effects design matrix <span class="math inline">\(\mathbf{Z}\)</span></a></li>
<li class="chapter" data-level="6.5.9" data-path="statistical-models.html"><a href="statistical-models.html#random-effects-boldsymbolu-and-blup-intuition"><i class="fa fa-check"></i><b>6.5.9</b> Random effects <span class="math inline">\(\boldsymbol{u}\)</span> and BLUP intuition</a></li>
<li class="chapter" data-level="6.5.10" data-path="statistical-models.html"><a href="statistical-models.html#covariance-structures-mathbfg-mathbfr-and-mathbfv"><i class="fa fa-check"></i><b>6.5.10</b> Covariance structures: <span class="math inline">\(\mathbf{G}\)</span>, <span class="math inline">\(\mathbf{R}\)</span>, and <span class="math inline">\(\mathbf{V}\)</span></a></li>
<li class="chapter" data-level="6.5.11" data-path="statistical-models.html"><a href="statistical-models.html#estimating-variance-parameters"><i class="fa fa-check"></i><b>6.5.11</b> Estimating variance parameters</a></li>
<li class="chapter" data-level="6.5.12" data-path="statistical-models.html"><a href="statistical-models.html#model-statement-and-interpretation"><i class="fa fa-check"></i><b>6.5.12</b> Model statement and interpretation</a></li>
<li class="chapter" data-level="6.5.13" data-path="statistical-models.html"><a href="statistical-models.html#testing-and-model-comparison"><i class="fa fa-check"></i><b>6.5.13</b> Testing and model comparison</a></li>
<li class="chapter" data-level="6.5.14" data-path="statistical-models.html"><a href="statistical-models.html#diagnostics-what-to-actually-check"><i class="fa fa-check"></i><b>6.5.14</b> Diagnostics (what to actually check)</a></li>
<li class="chapter" data-level="6.5.15" data-path="statistical-models.html"><a href="statistical-models.html#practical-takeaway-for-readers"><i class="fa fa-check"></i><b>6.5.15</b> Practical takeaway for readers</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="statistical-models.html"><a href="statistical-models.html#linear-mixed-model-practice"><i class="fa fa-check"></i><b>6.6</b> Linear mixed model practice</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="statistical-models.html"><a href="statistical-models.html#loading-data-and-library"><i class="fa fa-check"></i><b>6.6.1</b> Loading data and library</a></li>
<li class="chapter" data-level="6.6.2" data-path="statistical-models.html"><a href="statistical-models.html#general-linear-regression-ols"><i class="fa fa-check"></i><b>6.6.2</b> General linear regression (OLS)</a></li>
<li class="chapter" data-level="6.6.3" data-path="statistical-models.html"><a href="statistical-models.html#generalized-linear-regression-glm"><i class="fa fa-check"></i><b>6.6.3</b> Generalized linear regression (GLM)</a></li>
<li class="chapter" data-level="6.6.4" data-path="statistical-models.html"><a href="statistical-models.html#varying-intercept-by-adding-a-stratum-variable-as-fixed-effect-glm"><i class="fa fa-check"></i><b>6.6.4</b> Varying intercept by adding a stratum variable as fixed effect (GLM)</a></li>
<li class="chapter" data-level="6.6.5" data-path="statistical-models.html"><a href="statistical-models.html#comparisons-of-models-fixed-effect-approach"><i class="fa fa-check"></i><b>6.6.5</b> Comparisons of models (fixed effect approach)</a></li>
<li class="chapter" data-level="6.6.6" data-path="statistical-models.html"><a href="statistical-models.html#adding-class-and-school-as-fixed-effects-glm"><i class="fa fa-check"></i><b>6.6.6</b> Adding class and school as fixed effects (GLM)</a></li>
<li class="chapter" data-level="6.6.7" data-path="statistical-models.html"><a href="statistical-models.html#considering-different-slopes-by-stratum-glm"><i class="fa fa-check"></i><b>6.6.7</b> Considering different slopes by stratum (GLM)</a></li>
<li class="chapter" data-level="6.6.8" data-path="statistical-models.html"><a href="statistical-models.html#varying-intercept-with-lmm"><i class="fa fa-check"></i><b>6.6.8</b> Varying intercept with LMM</a></li>
<li class="chapter" data-level="6.6.9" data-path="statistical-models.html"><a href="statistical-models.html#add-class-and-school-as-random-effects"><i class="fa fa-check"></i><b>6.6.9</b> Add class and school as random effects</a></li>
<li class="chapter" data-level="6.6.10" data-path="statistical-models.html"><a href="statistical-models.html#nested-terms-schoolclass"><i class="fa fa-check"></i><b>6.6.10</b> Nested terms: <code>school/class</code></a></li>
<li class="chapter" data-level="6.6.11" data-path="statistical-models.html"><a href="statistical-models.html#varying-slope-with-lmm"><i class="fa fa-check"></i><b>6.6.11</b> Varying slope with LMM</a></li>
<li class="chapter" data-level="6.6.12" data-path="statistical-models.html"><a href="statistical-models.html#summarize-model-8"><i class="fa fa-check"></i><b>6.6.12</b> Summarize model 8</a></li>
<li class="chapter" data-level="6.6.13" data-path="statistical-models.html"><a href="statistical-models.html#testing-random-effects-lrt-logic"><i class="fa fa-check"></i><b>6.6.13</b> Testing random effects (LRT logic)</a></li>
<li class="chapter" data-level="6.6.14" data-path="statistical-models.html"><a href="statistical-models.html#visualizing-grouping-structure"><i class="fa fa-check"></i><b>6.6.14</b> Visualizing grouping structure</a></li>
<li class="chapter" data-level="6.6.15" data-path="statistical-models.html"><a href="statistical-models.html#residual-checks-by-grouping-variables"><i class="fa fa-check"></i><b>6.6.15</b> Residual checks by grouping variables</a></li>
<li class="chapter" data-level="6.6.16" data-path="statistical-models.html"><a href="statistical-models.html#residuals-vs-explanatory-variables"><i class="fa fa-check"></i><b>6.6.16</b> Residuals vs explanatory variables</a></li>
<li class="chapter" data-level="6.6.17" data-path="statistical-models.html"><a href="statistical-models.html#normality-checks"><i class="fa fa-check"></i><b>6.6.17</b> Normality checks</a></li>
<li class="chapter" data-level="6.6.18" data-path="statistical-models.html"><a href="statistical-models.html#extracting-elements-parameters"><i class="fa fa-check"></i><b>6.6.18</b> Extracting elements (parameters)</a></li>
<li class="chapter" data-level="6.6.19" data-path="statistical-models.html"><a href="statistical-models.html#fitted-values-and-residuals"><i class="fa fa-check"></i><b>6.6.19</b> Fitted values and residuals</a></li>
<li class="chapter" data-level="6.6.20" data-path="statistical-models.html"><a href="statistical-models.html#fitted-lines-by-group"><i class="fa fa-check"></i><b>6.6.20</b> Fitted lines by group</a></li>
<li class="chapter" data-level="6.6.21" data-path="statistical-models.html"><a href="statistical-models.html#model-diagnostics-second-dataset-nurses"><i class="fa fa-check"></i><b>6.6.21</b> Model diagnostics (second dataset: Nurses)</a></li>
<li class="chapter" data-level="6.6.22" data-path="statistical-models.html"><a href="statistical-models.html#intra-class-correlation-icc"><i class="fa fa-check"></i><b>6.6.22</b> Intra class correlation (ICC)</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="statistical-models.html"><a href="statistical-models.html#linear-mixed-model-covariance-decomposition-with-random-intercept-lme4"><i class="fa fa-check"></i><b>6.7</b> Linear mixed model covariance decomposition with random intercept — lme4</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="statistical-models.html"><a href="statistical-models.html#load-data"><i class="fa fa-check"></i><b>6.7.1</b> Load data</a></li>
<li class="chapter" data-level="6.7.2" data-path="statistical-models.html"><a href="statistical-models.html#plot-means-and-variances-by-higher-level-variable-grouping"><i class="fa fa-check"></i><b>6.7.2</b> Plot means and variances by higher level variable (grouping)</a></li>
<li class="chapter" data-level="6.7.3" data-path="statistical-models.html"><a href="statistical-models.html#using-glm-style-fixed-effects-baseline-reference"><i class="fa fa-check"></i><b>6.7.3</b> Using glm-style fixed effects (baseline reference)</a></li>
<li class="chapter" data-level="6.7.4" data-path="statistical-models.html"><a href="statistical-models.html#using-lmm-random-intercept-in-lme4"><i class="fa fa-check"></i><b>6.7.4</b> Using LMM (random intercept) in lme4</a></li>
<li class="chapter" data-level="6.7.5" data-path="statistical-models.html"><a href="statistical-models.html#get-mathbfx-mathbfy-mathbfz"><i class="fa fa-check"></i><b>6.7.5</b> Get <span class="math inline">\(\mathbf{X}\)</span>, <span class="math inline">\(\mathbf{y}\)</span>, <span class="math inline">\(\mathbf{Z}\)</span></a></li>
<li class="chapter" data-level="6.7.6" data-path="statistical-models.html"><a href="statistical-models.html#get-fixed-and-random-effect-coefficients"><i class="fa fa-check"></i><b>6.7.6</b> Get fixed and random effect coefficients</a></li>
<li class="chapter" data-level="6.7.7" data-path="statistical-models.html"><a href="statistical-models.html#random-effect-covariance-structure-and-the-role-of-theta"><i class="fa fa-check"></i><b>6.7.7</b> Random effect covariance structure and the role of <span class="math inline">\(\theta\)</span></a></li>
<li class="chapter" data-level="6.7.8" data-path="statistical-models.html"><a href="statistical-models.html#residual-variance-and-mathbfrsigma2mathbfi"><i class="fa fa-check"></i><b>6.7.8</b> Residual variance and <span class="math inline">\(\mathbf{R}=\sigma^2\mathbf{I}\)</span></a></li>
<li class="chapter" data-level="6.7.9" data-path="statistical-models.html"><a href="statistical-models.html#marginal-covariance-matrix-mathbfv-of-mathbfy"><i class="fa fa-check"></i><b>6.7.9</b> Marginal covariance matrix <span class="math inline">\(\mathbf{V}\)</span> of <span class="math inline">\(\mathbf{y}\)</span></a></li>
<li class="chapter" data-level="6.7.10" data-path="statistical-models.html"><a href="statistical-models.html#fixed-effect-coefficient-covariance-matrix"><i class="fa fa-check"></i><b>6.7.10</b> Fixed effect coefficient covariance matrix</a></li>
<li class="chapter" data-level="6.7.11" data-path="statistical-models.html"><a href="statistical-models.html#random-effect-covariance-matrix-standard-deviation-scale"><i class="fa fa-check"></i><b>6.7.11</b> Random effect covariance matrix (standard deviation scale)</a></li>
<li class="chapter" data-level="6.7.12" data-path="statistical-models.html"><a href="statistical-models.html#compute-fixed-effect-coefficients-manually-gls"><i class="fa fa-check"></i><b>6.7.12</b> Compute fixed effect coefficients manually (GLS)</a></li>
<li class="chapter" data-level="6.7.13" data-path="statistical-models.html"><a href="statistical-models.html#compute-covariance-of-fixed-effect-coefficients-manually"><i class="fa fa-check"></i><b>6.7.13</b> Compute covariance of fixed effect coefficients manually</a></li>
<li class="chapter" data-level="6.7.14" data-path="statistical-models.html"><a href="statistical-models.html#compute-random-effect-coefficients-manually-blups"><i class="fa fa-check"></i><b>6.7.14</b> Compute random effect coefficients manually (BLUPs)</a></li>
<li class="chapter" data-level="6.7.15" data-path="statistical-models.html"><a href="statistical-models.html#compute-predicted-values"><i class="fa fa-check"></i><b>6.7.15</b> Compute predicted values</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="statistical-models.html"><a href="statistical-models.html#linear-mixed-model-covariance-decomposition-with-random-slopes-lme4"><i class="fa fa-check"></i><b>6.8</b> Linear Mixed Model Covariance Decomposition with Random Slopes (lme4)</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="statistical-models.html"><a href="statistical-models.html#load-data-1"><i class="fa fa-check"></i><b>6.8.1</b> Load data</a></li>
<li class="chapter" data-level="6.8.2" data-path="statistical-models.html"><a href="statistical-models.html#using-a-linear-mixed-model-with-random-slopes"><i class="fa fa-check"></i><b>6.8.2</b> Using a linear mixed model with random slopes</a></li>
<li class="chapter" data-level="6.8.3" data-path="statistical-models.html"><a href="statistical-models.html#extracting-the-design-matrices-x-y-and-z"><i class="fa fa-check"></i><b>6.8.3</b> Extracting the design matrices X, y, and Z</a></li>
<li class="chapter" data-level="6.8.4" data-path="statistical-models.html"><a href="statistical-models.html#fixed-and-random-effect-coefficients"><i class="fa fa-check"></i><b>6.8.4</b> Fixed and random effect coefficients</a></li>
<li class="chapter" data-level="6.8.5" data-path="statistical-models.html"><a href="statistical-models.html#random-effect-covariance-structure-matrix-expansion"><i class="fa fa-check"></i><b>6.8.5</b> Random-effect covariance structure (matrix expansion)</a></li>
<li class="chapter" data-level="6.8.6" data-path="statistical-models.html"><a href="statistical-models.html#residual-variance-and-identity-matrix"><i class="fa fa-check"></i><b>6.8.6</b> Residual variance and identity matrix</a></li>
<li class="chapter" data-level="6.8.7" data-path="statistical-models.html"><a href="statistical-models.html#covariance-matrix-of-the-response-vector-y"><i class="fa fa-check"></i><b>6.8.7</b> Covariance matrix of the response vector y</a></li>
<li class="chapter" data-level="6.8.8" data-path="statistical-models.html"><a href="statistical-models.html#covariance-matrix-of-fixed-effect-coefficients"><i class="fa fa-check"></i><b>6.8.8</b> Covariance matrix of fixed-effect coefficients</a></li>
<li class="chapter" data-level="6.8.9" data-path="statistical-models.html"><a href="statistical-models.html#random-effect-covariance-matrix"><i class="fa fa-check"></i><b>6.8.9</b> Random-effect covariance matrix</a></li>
<li class="chapter" data-level="6.8.10" data-path="statistical-models.html"><a href="statistical-models.html#computing-fixed-effect-coefficients-manually"><i class="fa fa-check"></i><b>6.8.10</b> Computing fixed-effect coefficients manually</a></li>
<li class="chapter" data-level="6.8.11" data-path="statistical-models.html"><a href="statistical-models.html#covariance-of-fixed-effect-coefficients"><i class="fa fa-check"></i><b>6.8.11</b> Covariance of fixed-effect coefficients</a></li>
<li class="chapter" data-level="6.8.12" data-path="statistical-models.html"><a href="statistical-models.html#computing-random-effect-coefficients"><i class="fa fa-check"></i><b>6.8.12</b> Computing random-effect coefficients</a></li>
<li class="chapter" data-level="6.8.13" data-path="statistical-models.html"><a href="statistical-models.html#predicted-values"><i class="fa fa-check"></i><b>6.8.13</b> Predicted values</a></li>
<li class="chapter" data-level="6.8.14" data-path="statistical-models.html"><a href="statistical-models.html#model-with-two-grouping-factors"><i class="fa fa-check"></i><b>6.8.14</b> Model with two grouping factors</a></li>
<li class="chapter" data-level="6.8.15" data-path="statistical-models.html"><a href="statistical-models.html#extracting-z-for-the-two-factor-model"><i class="fa fa-check"></i><b>6.8.15</b> Extracting Z for the two-factor model</a></li>
<li class="chapter" data-level="6.8.16" data-path="statistical-models.html"><a href="statistical-models.html#nested-versus-crossed-random-effects"><i class="fa fa-check"></i><b>6.8.16</b> Nested versus crossed random effects</a></li>
<li class="chapter" data-level="6.8.17" data-path="statistical-models.html"><a href="statistical-models.html#remark-nested-vs.-crossed-random-effects"><i class="fa fa-check"></i><b>6.8.17</b> Remark: Nested vs. crossed random effects</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="statistical-models.html"><a href="statistical-models.html#linear-mixed-model-covariance-decomposition-nlme"><i class="fa fa-check"></i><b>6.9</b> Linear Mixed Model Covariance Decomposition (nlme)</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="statistical-models.html"><a href="statistical-models.html#load-data-2"><i class="fa fa-check"></i><b>6.9.1</b> Load data</a></li>
<li class="chapter" data-level="6.9.2" data-path="statistical-models.html"><a href="statistical-models.html#exploratory-visualization"><i class="fa fa-check"></i><b>6.9.2</b> Exploratory visualization</a></li>
<li class="chapter" data-level="6.9.3" data-path="statistical-models.html"><a href="statistical-models.html#using-lme-nlme"><i class="fa fa-check"></i><b>6.9.3</b> Using lme (nlme)</a></li>
<li class="chapter" data-level="6.9.4" data-path="statistical-models.html"><a href="statistical-models.html#inference-for-fixed-effects"><i class="fa fa-check"></i><b>6.9.4</b> Inference for fixed effects</a></li>
<li class="chapter" data-level="6.9.5" data-path="statistical-models.html"><a href="statistical-models.html#model-diagnosing"><i class="fa fa-check"></i><b>6.9.5</b> Model diagnosing</a></li>
<li class="chapter" data-level="6.9.6" data-path="statistical-models.html"><a href="statistical-models.html#get-x-y-z-matrices-using-lme4"><i class="fa fa-check"></i><b>6.9.6</b> Get X, y, Z matrices (using lme4)</a></li>
<li class="chapter" data-level="6.9.7" data-path="statistical-models.html"><a href="statistical-models.html#fixed-effect-coefficient"><i class="fa fa-check"></i><b>6.9.7</b> Fixed effect coefficient</a></li>
<li class="chapter" data-level="6.9.8" data-path="statistical-models.html"><a href="statistical-models.html#random-effect-coefficient"><i class="fa fa-check"></i><b>6.9.8</b> Random effect coefficient</a></li>
<li class="chapter" data-level="6.9.9" data-path="statistical-models.html"><a href="statistical-models.html#fixed-effect-coefficients-covariance"><i class="fa fa-check"></i><b>6.9.9</b> Fixed effect coefficients covariance</a></li>
<li class="chapter" data-level="6.9.10" data-path="statistical-models.html"><a href="statistical-models.html#random-effect-covariance-and-correlation"><i class="fa fa-check"></i><b>6.9.10</b> Random effect covariance and correlation</a></li>
<li class="chapter" data-level="6.9.11" data-path="statistical-models.html"><a href="statistical-models.html#get-y-covariance-directly"><i class="fa fa-check"></i><b>6.9.11</b> Get y covariance directly</a></li>
<li class="chapter" data-level="6.9.12" data-path="statistical-models.html"><a href="statistical-models.html#residual-variance"><i class="fa fa-check"></i><b>6.9.12</b> Residual variance</a></li>
<li class="chapter" data-level="6.9.13" data-path="statistical-models.html"><a href="statistical-models.html#compute-fixed-effect-coefficients-by-gls"><i class="fa fa-check"></i><b>6.9.13</b> Compute fixed effect coefficients (by GLS)</a></li>
<li class="chapter" data-level="6.9.14" data-path="statistical-models.html"><a href="statistical-models.html#compute-covariance-of-fixed-effect-coefficients"><i class="fa fa-check"></i><b>6.9.14</b> Compute covariance of fixed effect coefficients</a></li>
<li class="chapter" data-level="6.9.15" data-path="statistical-models.html"><a href="statistical-models.html#compute-random-effect-coefficients-blup"><i class="fa fa-check"></i><b>6.9.15</b> Compute random effect coefficients (BLUP)</a></li>
<li class="chapter" data-level="6.9.16" data-path="statistical-models.html"><a href="statistical-models.html#compute-predicted-values-1"><i class="fa fa-check"></i><b>6.9.16</b> Compute predicted values</a></li>
<li class="chapter" data-level="6.9.17" data-path="statistical-models.html"><a href="statistical-models.html#the-marginal-distribution"><i class="fa fa-check"></i><b>6.9.17</b> The marginal distribution</a></li>
<li class="chapter" data-level="6.9.18" data-path="statistical-models.html"><a href="statistical-models.html#extending-the-covariance-structure-correlated-residual-errors"><i class="fa fa-check"></i><b>6.9.18</b> Extending the covariance structure: correlated residual errors</a></li>
<li class="chapter" data-level="6.9.19" data-path="statistical-models.html"><a href="statistical-models.html#using-lme-with-gaussian-correlation"><i class="fa fa-check"></i><b>6.9.19</b> Using lme with Gaussian correlation</a></li>
<li class="chapter" data-level="6.9.20" data-path="statistical-models.html"><a href="statistical-models.html#using-lme-with-autoregressive-ar1"><i class="fa fa-check"></i><b>6.9.20</b> Using lme with autoregressive (AR1)</a></li>
<li class="chapter" data-level="6.9.21" data-path="statistical-models.html"><a href="statistical-models.html#using-lme-with-exponential-correlation"><i class="fa fa-check"></i><b>6.9.21</b> Using lme with exponential correlation</a></li>
<li class="chapter" data-level="6.9.22" data-path="statistical-models.html"><a href="statistical-models.html#using-lme-with-unstructured-residual-correlation-corsymm"><i class="fa fa-check"></i><b>6.9.22</b> Using lme with unstructured residual correlation (corSymm)</a></li>
<li class="chapter" data-level="6.9.23" data-path="statistical-models.html"><a href="statistical-models.html#using-lme-with-compound-symmetry-residual-correlation-corcompsymm"><i class="fa fa-check"></i><b>6.9.23</b> Using lme with compound symmetry residual correlation (corCompSymm)</a></li>
<li class="chapter" data-level="6.9.24" data-path="statistical-models.html"><a href="statistical-models.html#gls-models-correlation-in-residuals-without-random-effects"><i class="fa fa-check"></i><b>6.9.24</b> GLS models: correlation in residuals without random effects</a></li>
<li class="chapter" data-level="6.9.25" data-path="statistical-models.html"><a href="statistical-models.html#gls-with-unstructured-correlation"><i class="fa fa-check"></i><b>6.9.25</b> GLS with unstructured correlation</a></li>
<li class="chapter" data-level="6.9.26" data-path="statistical-models.html"><a href="statistical-models.html#gls-with-compound-symmetry"><i class="fa fa-check"></i><b>6.9.26</b> GLS with compound symmetry</a></li>
<li class="chapter" data-level="6.9.27" data-path="statistical-models.html"><a href="statistical-models.html#practical-limitation-of-lme4"><i class="fa fa-check"></i><b>6.9.27</b> Practical limitation of lme4</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="statistical-models.html"><a href="statistical-models.html#manual-simulating-data-for-linear-mix-model"><i class="fa fa-check"></i><b>6.10</b> Manual simulating data for linear mix model</a></li>
<li class="chapter" data-level="6.11" data-path="statistical-models.html"><a href="statistical-models.html#how-to-calculate-the-prediction-interval-for-lmm"><i class="fa fa-check"></i><b>6.11</b> How to calculate the prediction interval for LMM</a></li>
<li class="chapter" data-level="6.12" data-path="statistical-models.html"><a href="statistical-models.html#least-squares-means-with-interaction-effect"><i class="fa fa-check"></i><b>6.12</b> Least-squares means with interaction effect</a></li>
<li class="chapter" data-level="6.13" data-path="statistical-models.html"><a href="statistical-models.html#spline-regression"><i class="fa fa-check"></i><b>6.13</b> Spline regression</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>7</b> Probability</a>
<ul>
<li class="chapter" data-level="7.1" data-path="probability.html"><a href="probability.html#probability-basics"><i class="fa fa-check"></i><b>7.1</b> Probability basics</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="probability.html"><a href="probability.html#events"><i class="fa fa-check"></i><b>7.1.1</b> Events</a></li>
<li class="chapter" data-level="7.1.2" data-path="probability.html"><a href="probability.html#probability-formulas"><i class="fa fa-check"></i><b>7.1.2</b> Probability formulas</a></li>
<li class="chapter" data-level="7.1.3" data-path="probability.html"><a href="probability.html#calculation-of-probability-operations"><i class="fa fa-check"></i><b>7.1.3</b> Calculation of probability (operations)</a></li>
<li class="chapter" data-level="7.1.4" data-path="probability.html"><a href="probability.html#bayess-theorem"><i class="fa fa-check"></i><b>7.1.4</b> Bayes’s theorem</a></li>
<li class="chapter" data-level="7.1.5" data-path="probability.html"><a href="probability.html#random-variables-and-distribution-functions"><i class="fa fa-check"></i><b>7.1.5</b> Random variables and distribution functions</a></li>
<li class="chapter" data-level="7.1.6" data-path="probability.html"><a href="probability.html#probability-distributions-joint-marginal-conditional"><i class="fa fa-check"></i><b>7.1.6</b> Probability distributions (joint, marginal, conditional)</a></li>
<li class="chapter" data-level="7.1.7" data-path="probability.html"><a href="probability.html#conditional-expectation"><i class="fa fa-check"></i><b>7.1.7</b> Conditional expectation</a></li>
<li class="chapter" data-level="7.1.8" data-path="probability.html"><a href="probability.html#conditional-variance"><i class="fa fa-check"></i><b>7.1.8</b> Conditional variance</a></li>
<li class="chapter" data-level="7.1.9" data-path="probability.html"><a href="probability.html#sampling"><i class="fa fa-check"></i><b>7.1.9</b> Sampling</a></li>
<li class="chapter" data-level="7.1.10" data-path="probability.html"><a href="probability.html#central-limit-theorem-and-law-of-large-numbers"><i class="fa fa-check"></i><b>7.1.10</b> Central limit theorem and law of large numbers</a></li>
<li class="chapter" data-level="7.1.11" data-path="probability.html"><a href="probability.html#confidence-interval"><i class="fa fa-check"></i><b>7.1.11</b> Confidence interval</a></li>
<li class="chapter" data-level="7.1.12" data-path="probability.html"><a href="probability.html#introduction-to-hypothesis-testing"><i class="fa fa-check"></i><b>7.1.12</b> Introduction to hypothesis testing</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="probability.html"><a href="probability.html#probability-r-practice"><i class="fa fa-check"></i><b>7.2</b> Probability R practice</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="probability.html"><a href="probability.html#integrate"><i class="fa fa-check"></i><b>7.2.1</b> Integrate</a></li>
<li class="chapter" data-level="7.2.2" data-path="probability.html"><a href="probability.html#derivation-symbolic-differentiation"><i class="fa fa-check"></i><b>7.2.2</b> Derivation (symbolic differentiation)</a></li>
<li class="chapter" data-level="7.2.3" data-path="probability.html"><a href="probability.html#create-random-variables-with-specific-distributions"><i class="fa fa-check"></i><b>7.2.3</b> Create random variables with specific distributions</a></li>
<li class="chapter" data-level="7.2.4" data-path="probability.html"><a href="probability.html#probability-function-examples"><i class="fa fa-check"></i><b>7.2.4</b> Probability function examples</a></li>
<li class="chapter" data-level="7.2.5" data-path="probability.html"><a href="probability.html#vector-and-operations"><i class="fa fa-check"></i><b>7.2.5</b> Vector and operations</a></li>
<li class="chapter" data-level="7.2.6" data-path="probability.html"><a href="probability.html#select-and-substitute-elements-of-vector"><i class="fa fa-check"></i><b>7.2.6</b> Select and substitute elements of vector</a></li>
<li class="chapter" data-level="7.2.7" data-path="probability.html"><a href="probability.html#matrix-and-operations"><i class="fa fa-check"></i><b>7.2.7</b> Matrix and operations</a></li>
<li class="chapter" data-level="7.2.8" data-path="probability.html"><a href="probability.html#compute-inverse-determinant-and-eigenvalues"><i class="fa fa-check"></i><b>7.2.8</b> Compute inverse, determinant and eigenvalues</a></li>
<li class="chapter" data-level="7.2.9" data-path="probability.html"><a href="probability.html#dataframe"><i class="fa fa-check"></i><b>7.2.9</b> Dataframe</a></li>
<li class="chapter" data-level="7.2.10" data-path="probability.html"><a href="probability.html#solve-problems-using-simulation"><i class="fa fa-check"></i><b>7.2.10</b> Solve problems using simulation</a></li>
<li class="chapter" data-level="7.2.11" data-path="probability.html"><a href="probability.html#permutations-and-combinations"><i class="fa fa-check"></i><b>7.2.11</b> Permutations and combinations</a></li>
<li class="chapter" data-level="7.2.12" data-path="probability.html"><a href="probability.html#search-value-position-in-vector"><i class="fa fa-check"></i><b>7.2.12</b> Search value position in vector</a></li>
<li class="chapter" data-level="7.2.13" data-path="probability.html"><a href="probability.html#solve-directly-and-optimize"><i class="fa fa-check"></i><b>7.2.13</b> Solve directly and optimize</a></li>
<li class="chapter" data-level="7.2.14" data-path="probability.html"><a href="probability.html#calculate-probability-using-simulation-method"><i class="fa fa-check"></i><b>7.2.14</b> Calculate probability using simulation method</a></li>
<li class="chapter" data-level="7.2.15" data-path="probability.html"><a href="probability.html#discrete-random-variable"><i class="fa fa-check"></i><b>7.2.15</b> Discrete random variable</a></li>
<li class="chapter" data-level="7.2.16" data-path="probability.html"><a href="probability.html#exponent-distribution"><i class="fa fa-check"></i><b>7.2.16</b> Exponent distribution</a></li>
<li class="chapter" data-level="7.2.17" data-path="probability.html"><a href="probability.html#normal-distribution-plot"><i class="fa fa-check"></i><b>7.2.17</b> Normal distribution plot</a></li>
<li class="chapter" data-level="7.2.18" data-path="probability.html"><a href="probability.html#distribution-of-random-variable-function"><i class="fa fa-check"></i><b>7.2.18</b> Distribution of random variable function</a></li>
<li class="chapter" data-level="7.2.19" data-path="probability.html"><a href="probability.html#joint-and-marginal-probability-simulation-approach"><i class="fa fa-check"></i><b>7.2.19</b> Joint and marginal probability (simulation approach)</a></li>
<li class="chapter" data-level="7.2.20" data-path="probability.html"><a href="probability.html#multiple-random-variables-derived-distributions"><i class="fa fa-check"></i><b>7.2.20</b> Multiple random variables: derived distributions</a></li>
<li class="chapter" data-level="7.2.21" data-path="probability.html"><a href="probability.html#sum-of-two-independent-normal-variables"><i class="fa fa-check"></i><b>7.2.21</b> Sum of two independent normal variables</a></li>
<li class="chapter" data-level="7.2.22" data-path="probability.html"><a href="probability.html#generate-a-circle-using-simulated-random-dots"><i class="fa fa-check"></i><b>7.2.22</b> Generate a circle using simulated random dots</a></li>
<li class="chapter" data-level="7.2.23" data-path="probability.html"><a href="probability.html#expectation-simulation"><i class="fa fa-check"></i><b>7.2.23</b> Expectation (simulation)</a></li>
<li class="chapter" data-level="7.2.24" data-path="probability.html"><a href="probability.html#central-limit-theorem-simulation"><i class="fa fa-check"></i><b>7.2.24</b> Central Limit Theorem (simulation)</a></li>
<li class="chapter" data-level="7.2.25" data-path="probability.html"><a href="probability.html#law-of-large-numbers"><i class="fa fa-check"></i><b>7.2.25</b> Law of large numbers</a></li>
<li class="chapter" data-level="7.2.26" data-path="probability.html"><a href="probability.html#empirical-distribution-function-ecdf"><i class="fa fa-check"></i><b>7.2.26</b> Empirical distribution function (ECDF)</a></li>
<li class="chapter" data-level="7.2.27" data-path="probability.html"><a href="probability.html#probability-of-mean-3-simulation"><i class="fa fa-check"></i><b>7.2.27</b> Probability of mean &gt; 3 (simulation)</a></li>
<li class="chapter" data-level="7.2.28" data-path="probability.html"><a href="probability.html#maximum-likelihood-estimate-mle"><i class="fa fa-check"></i><b>7.2.28</b> Maximum likelihood estimate (MLE)</a></li>
<li class="chapter" data-level="7.2.29" data-path="probability.html"><a href="probability.html#t-distribution-f-distribution-plots-and-common-distributions"><i class="fa fa-check"></i><b>7.2.29</b> t distribution, F distribution plots, and common distributions</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#closing-perspective"><i class="fa fa-check"></i>Closing perspective</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="algorithms.html"><a href="algorithms.html"><i class="fa fa-check"></i><b>8</b> Algorithms</a>
<ul>
<li class="chapter" data-level="8.1" data-path="algorithms.html"><a href="algorithms.html#maximum-likelihood-estimation"><i class="fa fa-check"></i><b>8.1</b> Maximum likelihood estimation</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="algorithms.html"><a href="algorithms.html#likelihood-estimation"><i class="fa fa-check"></i><b>8.1.1</b> Likelihood estimation</a></li>
<li class="chapter" data-level="8.1.2" data-path="algorithms.html"><a href="algorithms.html#negative-log-likelihood-scalar-form"><i class="fa fa-check"></i><b>8.1.2</b> Negative log-likelihood (scalar form)</a></li>
<li class="chapter" data-level="8.1.3" data-path="algorithms.html"><a href="algorithms.html#matrix-formulation"><i class="fa fa-check"></i><b>8.1.3</b> Matrix formulation</a></li>
<li class="chapter" data-level="8.1.4" data-path="algorithms.html"><a href="algorithms.html#minimizing-the-negative-log-likelihood"><i class="fa fa-check"></i><b>8.1.4</b> Minimizing the negative log-likelihood</a></li>
<li class="chapter" data-level="8.1.5" data-path="algorithms.html"><a href="algorithms.html#taking-derivatives"><i class="fa fa-check"></i><b>8.1.5</b> Taking derivatives</a></li>
<li class="chapter" data-level="8.1.6" data-path="algorithms.html"><a href="algorithms.html#reml-versus-ml"><i class="fa fa-check"></i><b>8.1.6</b> REML versus ML</a></li>
<li class="chapter" data-level="8.1.7" data-path="algorithms.html"><a href="algorithms.html#r-demonstration"><i class="fa fa-check"></i><b>8.1.7</b> R demonstration</a></li>
<li class="chapter" data-level="8.1.8" data-path="algorithms.html"><a href="algorithms.html#confidence-intervals-from-likelihood"><i class="fa fa-check"></i><b>8.1.8</b> Confidence intervals from likelihood</a></li>
<li class="chapter" data-level="8.1.9" data-path="algorithms.html"><a href="algorithms.html#maximum-likelihood-estimate-practice"><i class="fa fa-check"></i><b>8.1.9</b> Maximum likelihood estimate practice</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="algorithms.html"><a href="algorithms.html#gradient-descent"><i class="fa fa-check"></i><b>8.2</b> Gradient descent</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="algorithms.html"><a href="algorithms.html#linear-regression-example"><i class="fa fa-check"></i><b>8.2.1</b> Linear regression example</a></li>
<li class="chapter" data-level="8.2.2" data-path="algorithms.html"><a href="algorithms.html#cost-function-and-gradient-descent"><i class="fa fa-check"></i><b>8.2.2</b> Cost function and gradient descent</a></li>
<li class="chapter" data-level="8.2.3" data-path="algorithms.html"><a href="algorithms.html#cost-function-convergence"><i class="fa fa-check"></i><b>8.2.3</b> Cost function convergence</a></li>
<li class="chapter" data-level="8.2.4" data-path="algorithms.html"><a href="algorithms.html#comparing-gradient-descent-and-linear-regression"><i class="fa fa-check"></i><b>8.2.4</b> Comparing gradient descent and linear regression</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="algorithms.html"><a href="algorithms.html#markov-chain-monte-carlo"><i class="fa fa-check"></i><b>8.3</b> Markov chain Monte Carlo</a></li>
<li class="chapter" data-level="8.4" data-path="algorithms.html"><a href="algorithms.html#expectation-maximum"><i class="fa fa-check"></i><b>8.4</b> Expectation maximum</a></li>
<li class="chapter" data-level="8.5" data-path="algorithms.html"><a href="algorithms.html#combine-estimates-by-pooling-rules"><i class="fa fa-check"></i><b>8.5</b> Combine estimates by pooling rules</a></li>
<li class="chapter" data-level="8.6" data-path="algorithms.html"><a href="algorithms.html#simulations-and-bootstrapping"><i class="fa fa-check"></i><b>8.6</b> Simulations and Bootstrapping</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="sasmarkdown.html"><a href="sasmarkdown.html"><i class="fa fa-check"></i><b>9</b> SASmarkdown</a>
<ul>
<li class="chapter" data-level="9.1" data-path="sasmarkdown.html"><a href="sasmarkdown.html#how-to-install-sasmarkdown"><i class="fa fa-check"></i><b>9.1</b> How to install SASmarkdown</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="sasmarkdown.html"><a href="sasmarkdown.html#use-an-engine"><i class="fa fa-check"></i><b>9.1.1</b> Use an engine</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="sasmarkdown.html"><a href="sasmarkdown.html#common-statements"><i class="fa fa-check"></i><b>9.2</b> Common statements</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="sasmarkdown.html"><a href="sasmarkdown.html#read-in-data-using-informats-date-data"><i class="fa fa-check"></i><b>9.2.1</b> Read in data using informats (date data)</a></li>
<li class="chapter" data-level="9.2.2" data-path="sasmarkdown.html"><a href="sasmarkdown.html#compute-mean-and-frequency"><i class="fa fa-check"></i><b>9.2.2</b> Compute mean and frequency</a></li>
<li class="chapter" data-level="9.2.3" data-path="sasmarkdown.html"><a href="sasmarkdown.html#sort-a-dataset"><i class="fa fa-check"></i><b>9.2.3</b> Sort a dataset</a></li>
<li class="chapter" data-level="9.2.4" data-path="sasmarkdown.html"><a href="sasmarkdown.html#transpose-or-reshape"><i class="fa fa-check"></i><b>9.2.4</b> Transpose or reshape</a></li>
<li class="chapter" data-level="9.2.5" data-path="sasmarkdown.html"><a href="sasmarkdown.html#conditional-statements"><i class="fa fa-check"></i><b>9.2.5</b> Conditional statements</a></li>
<li class="chapter" data-level="9.2.6" data-path="sasmarkdown.html"><a href="sasmarkdown.html#like-operation-to-select-rows-containing-a-pattern"><i class="fa fa-check"></i><b>9.2.6</b> LIKE operation to select rows containing a pattern</a></li>
<li class="chapter" data-level="9.2.7" data-path="sasmarkdown.html"><a href="sasmarkdown.html#change-format-of-a-variable"><i class="fa fa-check"></i><b>9.2.7</b> Change format of a variable</a></li>
<li class="chapter" data-level="9.2.8" data-path="sasmarkdown.html"><a href="sasmarkdown.html#basic-operations"><i class="fa fa-check"></i><b>9.2.8</b> Basic operations</a></li>
<li class="chapter" data-level="9.2.9" data-path="sasmarkdown.html"><a href="sasmarkdown.html#rename-variables-1"><i class="fa fa-check"></i><b>9.2.9</b> Rename variables</a></li>
<li class="chapter" data-level="9.2.10" data-path="sasmarkdown.html"><a href="sasmarkdown.html#text-manipulation"><i class="fa fa-check"></i><b>9.2.10</b> Text manipulation</a></li>
<li class="chapter" data-level="9.2.11" data-path="sasmarkdown.html"><a href="sasmarkdown.html#create-a-report"><i class="fa fa-check"></i><b>9.2.11</b> Create a report</a></li>
<li class="chapter" data-level="9.2.12" data-path="sasmarkdown.html"><a href="sasmarkdown.html#random-variables"><i class="fa fa-check"></i><b>9.2.12</b> Random variables</a></li>
<li class="chapter" data-level="9.2.13" data-path="sasmarkdown.html"><a href="sasmarkdown.html#combine-two-texts-compress-spaces-locate-a-substring-change-case"><i class="fa fa-check"></i><b>9.2.13</b> Combine two texts, compress spaces, locate a substring, change case</a></li>
<li class="chapter" data-level="9.2.14" data-path="sasmarkdown.html"><a href="sasmarkdown.html#deduplication-1"><i class="fa fa-check"></i><b>9.2.14</b> Deduplication</a></li>
<li class="chapter" data-level="9.2.15" data-path="sasmarkdown.html"><a href="sasmarkdown.html#select-a-subset-of-rows"><i class="fa fa-check"></i><b>9.2.15</b> Select a subset of rows</a></li>
<li class="chapter" data-level="9.2.16" data-path="sasmarkdown.html"><a href="sasmarkdown.html#create-macros-with-do-loops"><i class="fa fa-check"></i><b>9.2.16</b> Create macros with DO loops</a></li>
<li class="chapter" data-level="9.2.17" data-path="sasmarkdown.html"><a href="sasmarkdown.html#output-intermediate-tables-with-ods"><i class="fa fa-check"></i><b>9.2.17</b> Output intermediate tables with ODS</a></li>
<li class="chapter" data-level="9.2.18" data-path="sasmarkdown.html"><a href="sasmarkdown.html#create-sequence-numbers"><i class="fa fa-check"></i><b>9.2.18</b> Create sequence numbers</a></li>
<li class="chapter" data-level="9.2.19" data-path="sasmarkdown.html"><a href="sasmarkdown.html#merge-datasets"><i class="fa fa-check"></i><b>9.2.19</b> Merge datasets</a></li>
<li class="chapter" data-level="9.2.20" data-path="sasmarkdown.html"><a href="sasmarkdown.html#create-table-1-1"><i class="fa fa-check"></i><b>9.2.20</b> Create Table 1</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="sasmarkdown.html"><a href="sasmarkdown.html#using-macros"><i class="fa fa-check"></i><b>9.3</b> Using macros</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="sasmarkdown.html"><a href="sasmarkdown.html#proc-report-for-flexible-summaries"><i class="fa fa-check"></i><b>9.3.1</b> PROC REPORT for flexible summaries</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="sasmarkdown.html"><a href="sasmarkdown.html#use-sas-formats"><i class="fa fa-check"></i><b>9.4</b> Use SAS formats</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="sasmarkdown.html"><a href="sasmarkdown.html#storing-formats-to-a-library"><i class="fa fa-check"></i><b>9.4.1</b> Storing formats to a library</a></li>
<li class="chapter" data-level="9.4.2" data-path="sasmarkdown.html"><a href="sasmarkdown.html#modify-formats"><i class="fa fa-check"></i><b>9.4.2</b> Modify formats</a></li>
<li class="chapter" data-level="9.4.3" data-path="sasmarkdown.html"><a href="sasmarkdown.html#transform-missing-to-character-then-to-numeric-again"><i class="fa fa-check"></i><b>9.4.3</b> Transform missing to character then to numeric again</a></li>
<li class="chapter" data-level="9.4.4" data-path="sasmarkdown.html"><a href="sasmarkdown.html#output-format-definition-details"><i class="fa fa-check"></i><b>9.4.4</b> Output format definition details</a></li>
<li class="chapter" data-level="9.4.5" data-path="sasmarkdown.html"><a href="sasmarkdown.html#a-macro-to-copy-an-existing-proc-format"><i class="fa fa-check"></i><b>9.4.5</b> A macro to copy an existing PROC FORMAT</a></li>
<li class="chapter" data-level="9.4.6" data-path="sasmarkdown.html"><a href="sasmarkdown.html#a-macro-to-view-the-list-of-variables"><i class="fa fa-check"></i><b>9.4.6</b> A macro to view the list of variables</a></li>
<li class="chapter" data-level="9.4.7" data-path="sasmarkdown.html"><a href="sasmarkdown.html#practical-workflow-recommendations-for-sasmarkdown"><i class="fa fa-check"></i><b>9.4.7</b> Practical workflow recommendations for SASmarkdown</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="causal-inference.html"><a href="causal-inference.html"><i class="fa fa-check"></i><b>10</b> Causal inference</a>
<ul>
<li class="chapter" data-level="10.1" data-path="causal-inference.html"><a href="causal-inference.html#causal-inference-introduction"><i class="fa fa-check"></i><b>10.1</b> Causal inference introduction</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="causal-inference.html"><a href="causal-inference.html#definitions-and-directed-acyclic-graph-dag"><i class="fa fa-check"></i><b>10.1.1</b> Definitions and directed acyclic graph (DAG)</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="causal-inference.html"><a href="causal-inference.html#inverse-probability-weighting"><i class="fa fa-check"></i><b>10.2</b> Inverse probability weighting</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="causal-inference.html"><a href="causal-inference.html#matching-and-weighting-wo-imputation"><i class="fa fa-check"></i><b>10.2.1</b> Matching and weighting w/o imputation</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="causal-inference.html"><a href="causal-inference.html#g-formula"><i class="fa fa-check"></i><b>10.3</b> G formula</a></li>
<li class="chapter" data-level="10.4" data-path="causal-inference.html"><a href="causal-inference.html#double-robust-estimators"><i class="fa fa-check"></i><b>10.4</b> Double Robust Estimators</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="causal-inference.html"><a href="causal-inference.html#superlearner"><i class="fa fa-check"></i><b>10.4.1</b> SuperLearner</a></li>
<li class="chapter" data-level="10.4.2" data-path="causal-inference.html"><a href="causal-inference.html#double-robust-estimators-using-superlearner_sl3"><i class="fa fa-check"></i><b>10.4.2</b> Double robust estimators using SuperLearner_sl3</a></li>
<li class="chapter" data-level="10.4.3" data-path="causal-inference.html"><a href="causal-inference.html#double-robust-estimators-using-tmle"><i class="fa fa-check"></i><b>10.4.3</b> Double robust estimators using TMLE</a></li>
<li class="chapter" data-level="10.4.4" data-path="causal-inference.html"><a href="causal-inference.html#longitudinal-targeted-maximum-likelihood-estimation"><i class="fa fa-check"></i><b>10.4.4</b> Longitudinal targeted maximum likelihood estimation</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="causal-inference.html"><a href="causal-inference.html#instrumental-variable-regression"><i class="fa fa-check"></i><b>10.5</b> Instrumental variable regression</a></li>
<li class="chapter" data-level="10.6" data-path="causal-inference.html"><a href="causal-inference.html#mediation-analysis"><i class="fa fa-check"></i><b>10.6</b> Mediation analysis</a></li>
<li class="chapter" data-level="10.7" data-path="causal-inference.html"><a href="causal-inference.html#confounding-and-effect-measure-modification"><i class="fa fa-check"></i><b>10.7</b> Confounding and effect measure modification</a></li>
<li class="chapter" data-level="10.8" data-path="causal-inference.html"><a href="causal-inference.html#causal-inference-and-associated-regression"><i class="fa fa-check"></i><b>10.8</b> Causal inference and associated regression</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="clinical-trial.html"><a href="clinical-trial.html"><i class="fa fa-check"></i><b>11</b> Clinical Trial</a>
<ul>
<li class="chapter" data-level="11.1" data-path="clinical-trial.html"><a href="clinical-trial.html#statistics-in-clinical-trial"><i class="fa fa-check"></i><b>11.1</b> Statistics in clinical trial</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="clinical-trial.html"><a href="clinical-trial.html#sample-size-interim-data-reports-and-randomization-of-assignment"><i class="fa fa-check"></i><b>11.1.1</b> Sample size, interim data reports and randomization of assignment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="common-statistical-models.html"><a href="common-statistical-models.html"><i class="fa fa-check"></i><b>12</b> Common statistical models</a>
<ul>
<li class="chapter" data-level="12.1" data-path="common-statistical-models.html"><a href="common-statistical-models.html#survival-analysis"><i class="fa fa-check"></i><b>12.1</b> Survival analysis</a></li>
<li class="chapter" data-level="12.2" data-path="common-statistical-models.html"><a href="common-statistical-models.html#logistical-regression"><i class="fa fa-check"></i><b>12.2</b> Logistical regression</a></li>
<li class="chapter" data-level="12.3" data-path="common-statistical-models.html"><a href="common-statistical-models.html#poisson-regression"><i class="fa fa-check"></i><b>12.3</b> Poisson regression</a></li>
<li class="chapter" data-level="12.4" data-path="common-statistical-models.html"><a href="common-statistical-models.html#quantile-regression"><i class="fa fa-check"></i><b>12.4</b> Quantile regression</a></li>
<li class="chapter" data-level="12.5" data-path="common-statistical-models.html"><a href="common-statistical-models.html#principle-components-analysis"><i class="fa fa-check"></i><b>12.5</b> Principle components analysis</a></li>
<li class="chapter" data-level="12.6" data-path="common-statistical-models.html"><a href="common-statistical-models.html#which-covariates-should-be-adjusted"><i class="fa fa-check"></i><b>12.6</b> Which covariates should be adjusted</a></li>
<li class="chapter" data-level="12.7" data-path="common-statistical-models.html"><a href="common-statistical-models.html#variable-selection-1"><i class="fa fa-check"></i><b>12.7</b> Variable selection</a></li>
<li class="chapter" data-level="12.8" data-path="common-statistical-models.html"><a href="common-statistical-models.html#fit-regression-model-with-a-fan-shaped-relation"><i class="fa fa-check"></i><b>12.8</b> Fit regression model with a fan-shaped relation</a></li>
<li class="chapter" data-level="12.9" data-path="common-statistical-models.html"><a href="common-statistical-models.html#save-and-finalize-your-trained-model"><i class="fa fa-check"></i><b>12.9</b> Save And Finalize Your trained Model</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="bayesian-statistics.html"><a href="bayesian-statistics.html"><i class="fa fa-check"></i><b>13</b> Bayesian statistics</a>
<ul>
<li class="chapter" data-level="13.1" data-path="bayesian-statistics.html"><a href="bayesian-statistics.html#bayesian-inference-in-r"><i class="fa fa-check"></i><b>13.1</b> Bayesian Inference in R</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="epidemiolgy.html"><a href="epidemiolgy.html"><i class="fa fa-check"></i><b>14</b> Epidemiolgy</a>
<ul>
<li class="chapter" data-level="14.1" data-path="epidemiolgy.html"><a href="epidemiolgy.html#introduction"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="epidemiolgy.html"><a href="epidemiolgy.html#bias-analysis-and-control-in-r"><i class="fa fa-check"></i><b>14.2</b> Bias analysis and control in R</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="bioinformation.html"><a href="bioinformation.html"><i class="fa fa-check"></i><b>15</b> Bioinformation</a>
<ul>
<li class="chapter" data-level="15.1" data-path="bioinformation.html"><a href="bioinformation.html#sequence-analysis"><i class="fa fa-check"></i><b>15.1</b> Sequence Analysis</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="common-issues-in-statistics.html"><a href="common-issues-in-statistics.html"><i class="fa fa-check"></i><b>16</b> Common issues in Statistics</a></li>
<li class="chapter" data-level="17" data-path="miscellaneous.html"><a href="miscellaneous.html"><i class="fa fa-check"></i><b>17</b> Miscellaneous</a>
<ul>
<li class="chapter" data-level="17.1" data-path="miscellaneous.html"><a href="miscellaneous.html#linear-algebra"><i class="fa fa-check"></i><b>17.1</b> Linear algebra</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="miscellaneous.html"><a href="miscellaneous.html#matrix-basics"><i class="fa fa-check"></i><b>17.1.1</b> Matrix basics</a></li>
<li class="chapter" data-level="17.1.2" data-path="miscellaneous.html"><a href="miscellaneous.html#operations"><i class="fa fa-check"></i><b>17.1.2</b> Operations</a></li>
<li class="chapter" data-level="17.1.3" data-path="miscellaneous.html"><a href="miscellaneous.html#eigen-decomposition"><i class="fa fa-check"></i><b>17.1.3</b> Eigen decomposition</a></li>
<li class="chapter" data-level="17.1.4" data-path="miscellaneous.html"><a href="miscellaneous.html#advanced-operations"><i class="fa fa-check"></i><b>17.1.4</b> Advanced operations</a></li>
<li class="chapter" data-level="17.1.5" data-path="miscellaneous.html"><a href="miscellaneous.html#solve-linear-equations"><i class="fa fa-check"></i><b>17.1.5</b> Solve linear equations</a></li>
<li class="chapter" data-level="17.1.6" data-path="miscellaneous.html"><a href="miscellaneous.html#summary"><i class="fa fa-check"></i><b>17.1.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="miscellaneous.html"><a href="miscellaneous.html#calculus"><i class="fa fa-check"></i><b>17.2</b> Calculus</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="miscellaneous.html"><a href="miscellaneous.html#derivation"><i class="fa fa-check"></i><b>17.2.1</b> Derivation</a></li>
<li class="chapter" data-level="17.2.2" data-path="miscellaneous.html"><a href="miscellaneous.html#integration"><i class="fa fa-check"></i><b>17.2.2</b> Integration</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="miscellaneous.html"><a href="miscellaneous.html#sample-size-calculation-simulation-based-power"><i class="fa fa-check"></i><b>17.3</b> Sample size calculation (simulation-based power)</a></li>
<li class="chapter" data-level="17.4" data-path="miscellaneous.html"><a href="miscellaneous.html#how-to-evaluate-a-z-score"><i class="fa fa-check"></i><b>17.4</b> How to evaluate a z score</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="miscellaneous.html"><a href="miscellaneous.html#call-the-parameter-estimates-file"><i class="fa fa-check"></i><b>17.4.1</b> Call the parameter estimates file</a></li>
<li class="chapter" data-level="17.4.2" data-path="miscellaneous.html"><a href="miscellaneous.html#calculate-mean-and-standard-deviation-at-a-specific-value"><i class="fa fa-check"></i><b>17.4.2</b> Calculate mean and standard deviation at a specific value</a></li>
<li class="chapter" data-level="17.4.3" data-path="miscellaneous.html"><a href="miscellaneous.html#output-the-calculated-mean-on-exp-scale"><i class="fa fa-check"></i><b>17.4.3</b> Output the calculated mean (on exp scale)</a></li>
<li class="chapter" data-level="17.4.4" data-path="miscellaneous.html"><a href="miscellaneous.html#calculate-z-score"><i class="fa fa-check"></i><b>17.4.4</b> Calculate z score</a></li>
<li class="chapter" data-level="17.4.5" data-path="miscellaneous.html"><a href="miscellaneous.html#result-checking"><i class="fa fa-check"></i><b>17.4.5</b> Result checking</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="miscellaneous.html"><a href="miscellaneous.html#mathematical-coupling"><i class="fa fa-check"></i><b>17.5</b> Mathematical coupling</a></li>
<li class="chapter" data-level="17.6" data-path="miscellaneous.html"><a href="miscellaneous.html#how-to-create-a-bookdown"><i class="fa fa-check"></i><b>17.6</b> How to create a bookdown</a>
<ul>
<li class="chapter" data-level="17.6.1" data-path="miscellaneous.html"><a href="miscellaneous.html#how-to-git-up-a-project-into-github"><i class="fa fa-check"></i><b>17.6.1</b> How to git up a project into GitHub</a></li>
<li class="chapter" data-level="17.6.2" data-path="miscellaneous.html"><a href="miscellaneous.html#how-to-git-down-a-project-into-your-pc"><i class="fa fa-check"></i><b>17.6.2</b> How to git down a project into your PC</a></li>
<li class="chapter" data-level="17.6.3" data-path="miscellaneous.html"><a href="miscellaneous.html#how-to-return-to-a-previous-version"><i class="fa fa-check"></i><b>17.6.3</b> How to return to a previous version</a></li>
</ul></li>
<li class="chapter" data-level="17.7" data-path="miscellaneous.html"><a href="miscellaneous.html#how-to-create-a-blogdown"><i class="fa fa-check"></i><b>17.7</b> How to create a blogdown</a></li>
<li class="chapter" data-level="17.8" data-path="miscellaneous.html"><a href="miscellaneous.html#how-to-install-tensorflow-and-keras"><i class="fa fa-check"></i><b>17.8</b> How to install tensorflow and keras</a></li>
<li class="chapter" data-level="17.9" data-path="miscellaneous.html"><a href="miscellaneous.html#how-to-use-github-in-a-team"><i class="fa fa-check"></i><b>17.9</b> How to use GitHub in a team</a></li>
<li class="chapter" data-level="17.10" data-path="miscellaneous.html"><a href="miscellaneous.html#how-to-insert-a-picture-indirectly-in-markdown"><i class="fa fa-check"></i><b>17.10</b> How to insert a picture indirectly in markdown</a></li>
<li class="chapter" data-level="17.11" data-path="miscellaneous.html"><a href="miscellaneous.html#r-cheatsheets"><i class="fa fa-check"></i><b>17.11</b> R cheatsheets</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Biostatistics Handbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-wrangling" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> Data Wrangling<a href="data-wrangling.html#data-wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<!-- ========================= -->
<div id="how-to-do-data-wrangling" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> How to do data wrangling<a href="data-wrangling.html#how-to-do-data-wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Data wrangling is the process of turning raw data into an analysis-ready dataset. In practice, this includes (1) selecting the right observations and variables, (2) creating or transforming variables, (3) cleaning and standardizing values, and (4) reshaping the dataset into the structure required by downstream analyses and reporting.</p>
<p>In this chapter, we use functions from the <code>tidyverse</code> (mainly <code>dplyr</code> and <code>tidyr</code>) because they provide a consistent grammar for data manipulation. The goal here is not only to learn syntax, but also to understand common patterns that appear repeatedly in real projects.</p>
<p>We will use the built-in <code>iris</code> dataset for simple examples, and then create small simulated datasets (e.g., <code>drug_trial</code>, <code>babies</code>, <code>blood_pressure</code>) to demonstrate typical workflows.</p>
<div id="load-data-and-package" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Load data and package<a href="data-wrangling.html#load-data-and-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before doing any wrangling, it is good practice to quickly inspect the dataset. Looking at the first few rows helps confirm variable names, data types, and whether the values look reasonable.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-wrangling.html#cb1-1" tabindex="-1"></a><span class="fu">head</span> (iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Load the <code>tidyverse</code> package. This automatically loads common packages for wrangling and visualization, including <code>dplyr</code>, <code>tidyr</code>, <code>tibble</code>, and <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-wrangling.html#cb3-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 4.4.3</code></pre>
<pre><code>## Warning: package &#39;readr&#39; was built under R version 4.4.3</code></pre>
<pre><code>## ── Attaching core tidyverse packages ──────────────────
## ✔ dplyr     1.1.4     ✔ readr     2.1.6
## ✔ forcats   1.0.0     ✔ stringr   1.5.1
## ✔ ggplot2   4.0.2     ✔ tibble    3.2.1
## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
## ✔ purrr     1.0.2     
## ── Conflicts ───────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div id="select-certain-rows" class="section level3 hasAnchor" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Select certain rows<a href="data-wrangling.html#select-certain-rows" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Row selection is typically used to (1) create analysis populations, (2) subset by treatment, time window, or eligibility criteria, or (3) debug issues using a small subset.</p>
<p>The <code>filter()</code> function keeps rows that satisfy a condition. Here, we select only the <code>setosa</code> species.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data-wrangling.html#cb7-1" tabindex="-1"></a>setosa <span class="ot">&lt;-</span> <span class="fu">filter</span>(iris, Species <span class="sc">==</span> <span class="st">&#39;setosa&#39;</span>)</span>
<span id="cb7-2"><a href="data-wrangling.html#cb7-2" tabindex="-1"></a>setosa</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa
## 11          5.4         3.7          1.5         0.2  setosa
## 12          4.8         3.4          1.6         0.2  setosa
## 13          4.8         3.0          1.4         0.1  setosa
## 14          4.3         3.0          1.1         0.1  setosa
## 15          5.8         4.0          1.2         0.2  setosa
## 16          5.7         4.4          1.5         0.4  setosa
## 17          5.4         3.9          1.3         0.4  setosa
## 18          5.1         3.5          1.4         0.3  setosa
## 19          5.7         3.8          1.7         0.3  setosa
## 20          5.1         3.8          1.5         0.3  setosa
## 21          5.4         3.4          1.7         0.2  setosa
## 22          5.1         3.7          1.5         0.4  setosa
## 23          4.6         3.6          1.0         0.2  setosa
## 24          5.1         3.3          1.7         0.5  setosa
## 25          4.8         3.4          1.9         0.2  setosa
## 26          5.0         3.0          1.6         0.2  setosa
## 27          5.0         3.4          1.6         0.4  setosa
## 28          5.2         3.5          1.5         0.2  setosa
## 29          5.2         3.4          1.4         0.2  setosa
## 30          4.7         3.2          1.6         0.2  setosa
## 31          4.8         3.1          1.6         0.2  setosa
## 32          5.4         3.4          1.5         0.4  setosa
## 33          5.2         4.1          1.5         0.1  setosa
## 34          5.5         4.2          1.4         0.2  setosa
## 35          4.9         3.1          1.5         0.2  setosa
## 36          5.0         3.2          1.2         0.2  setosa
## 37          5.5         3.5          1.3         0.2  setosa
## 38          4.9         3.6          1.4         0.1  setosa
## 39          4.4         3.0          1.3         0.2  setosa
## 40          5.1         3.4          1.5         0.2  setosa
## 41          5.0         3.5          1.3         0.3  setosa
## 42          4.5         2.3          1.3         0.3  setosa
## 43          4.4         3.2          1.3         0.2  setosa
## 44          5.0         3.5          1.6         0.6  setosa
## 45          5.1         3.8          1.9         0.4  setosa
## 46          4.8         3.0          1.4         0.3  setosa
## 47          5.1         3.8          1.6         0.2  setosa
## 48          4.6         3.2          1.4         0.2  setosa
## 49          5.3         3.7          1.5         0.2  setosa
## 50          5.0         3.3          1.4         0.2  setosa</code></pre>
<p><code>filter the first 5 rows</code><br />
When you need a small subset for quick checking, you can take the first few rows. <code>slice()</code> selects rows by position rather than by condition.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-wrangling.html#cb9-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="data-wrangling.html#cb9-2" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa</code></pre>
</div>
<div id="select-certain-columns" class="section level3 hasAnchor" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Select certain columns<a href="data-wrangling.html#select-certain-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Selecting columns is useful for (1) focusing on variables needed for an analysis, (2) reducing clutter when printing tables, and (3) preparing a dataset before joining or reshaping.</p>
<p><code>select()</code> keeps only specified variables.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-wrangling.html#cb11-1" tabindex="-1"></a><span class="fu">select</span>(iris, Sepal.Length, Species)</span></code></pre></div>
<pre><code>##     Sepal.Length    Species
## 1            5.1     setosa
## 2            4.9     setosa
## 3            4.7     setosa
## 4            4.6     setosa
## 5            5.0     setosa
## 6            5.4     setosa
## 7            4.6     setosa
## 8            5.0     setosa
## 9            4.4     setosa
## 10           4.9     setosa
## 11           5.4     setosa
## 12           4.8     setosa
## 13           4.8     setosa
## 14           4.3     setosa
## 15           5.8     setosa
## 16           5.7     setosa
## 17           5.4     setosa
## 18           5.1     setosa
## 19           5.7     setosa
## 20           5.1     setosa
## 21           5.4     setosa
## 22           5.1     setosa
## 23           4.6     setosa
## 24           5.1     setosa
## 25           4.8     setosa
## 26           5.0     setosa
## 27           5.0     setosa
## 28           5.2     setosa
## 29           5.2     setosa
## 30           4.7     setosa
## 31           4.8     setosa
## 32           5.4     setosa
## 33           5.2     setosa
## 34           5.5     setosa
## 35           4.9     setosa
## 36           5.0     setosa
## 37           5.5     setosa
## 38           4.9     setosa
## 39           4.4     setosa
## 40           5.1     setosa
## 41           5.0     setosa
## 42           4.5     setosa
## 43           4.4     setosa
## 44           5.0     setosa
## 45           5.1     setosa
## 46           4.8     setosa
## 47           5.1     setosa
## 48           4.6     setosa
## 49           5.3     setosa
## 50           5.0     setosa
## 51           7.0 versicolor
## 52           6.4 versicolor
## 53           6.9 versicolor
## 54           5.5 versicolor
## 55           6.5 versicolor
## 56           5.7 versicolor
## 57           6.3 versicolor
## 58           4.9 versicolor
## 59           6.6 versicolor
## 60           5.2 versicolor
## 61           5.0 versicolor
## 62           5.9 versicolor
## 63           6.0 versicolor
## 64           6.1 versicolor
## 65           5.6 versicolor
## 66           6.7 versicolor
## 67           5.6 versicolor
## 68           5.8 versicolor
## 69           6.2 versicolor
## 70           5.6 versicolor
## 71           5.9 versicolor
## 72           6.1 versicolor
## 73           6.3 versicolor
## 74           6.1 versicolor
## 75           6.4 versicolor
## 76           6.6 versicolor
## 77           6.8 versicolor
## 78           6.7 versicolor
## 79           6.0 versicolor
## 80           5.7 versicolor
## 81           5.5 versicolor
## 82           5.5 versicolor
## 83           5.8 versicolor
## 84           6.0 versicolor
## 85           5.4 versicolor
## 86           6.0 versicolor
## 87           6.7 versicolor
## 88           6.3 versicolor
## 89           5.6 versicolor
## 90           5.5 versicolor
## 91           5.5 versicolor
## 92           6.1 versicolor
## 93           5.8 versicolor
## 94           5.0 versicolor
## 95           5.6 versicolor
## 96           5.7 versicolor
## 97           5.7 versicolor
## 98           6.2 versicolor
## 99           5.1 versicolor
## 100          5.7 versicolor
## 101          6.3  virginica
## 102          5.8  virginica
## 103          7.1  virginica
## 104          6.3  virginica
## 105          6.5  virginica
## 106          7.6  virginica
## 107          4.9  virginica
## 108          7.3  virginica
## 109          6.7  virginica
## 110          7.2  virginica
## 111          6.5  virginica
## 112          6.4  virginica
## 113          6.8  virginica
## 114          5.7  virginica
## 115          5.8  virginica
## 116          6.4  virginica
## 117          6.5  virginica
## 118          7.7  virginica
## 119          7.7  virginica
## 120          6.0  virginica
## 121          6.9  virginica
## 122          5.6  virginica
## 123          7.7  virginica
## 124          6.3  virginica
## 125          6.7  virginica
## 126          7.2  virginica
## 127          6.2  virginica
## 128          6.1  virginica
## 129          6.4  virginica
## 130          7.2  virginica
## 131          7.4  virginica
## 132          7.9  virginica
## 133          6.4  virginica
## 134          6.3  virginica
## 135          6.1  virginica
## 136          7.7  virginica
## 137          6.3  virginica
## 138          6.4  virginica
## 139          6.0  virginica
## 140          6.9  virginica
## 141          6.7  virginica
## 142          6.9  virginica
## 143          5.8  virginica
## 144          6.8  virginica
## 145          6.7  virginica
## 146          6.7  virginica
## 147          6.3  virginica
## 148          6.5  virginica
## 149          6.2  virginica
## 150          5.9  virginica</code></pre>
<p>You can also exclude variables using a minus sign. This is helpful when you want to drop only a few variables while keeping most columns.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-wrangling.html#cb13-1" tabindex="-1"></a><span class="fu">select</span>(iris, <span class="sc">-</span>Sepal.Length, <span class="sc">-</span>Species)</span></code></pre></div>
<pre><code>##     Sepal.Width Petal.Length Petal.Width
## 1           3.5          1.4         0.2
## 2           3.0          1.4         0.2
## 3           3.2          1.3         0.2
## 4           3.1          1.5         0.2
## 5           3.6          1.4         0.2
## 6           3.9          1.7         0.4
## 7           3.4          1.4         0.3
## 8           3.4          1.5         0.2
## 9           2.9          1.4         0.2
## 10          3.1          1.5         0.1
## 11          3.7          1.5         0.2
## 12          3.4          1.6         0.2
## 13          3.0          1.4         0.1
## 14          3.0          1.1         0.1
## 15          4.0          1.2         0.2
## 16          4.4          1.5         0.4
## 17          3.9          1.3         0.4
## 18          3.5          1.4         0.3
## 19          3.8          1.7         0.3
## 20          3.8          1.5         0.3
## 21          3.4          1.7         0.2
## 22          3.7          1.5         0.4
## 23          3.6          1.0         0.2
## 24          3.3          1.7         0.5
## 25          3.4          1.9         0.2
## 26          3.0          1.6         0.2
## 27          3.4          1.6         0.4
## 28          3.5          1.5         0.2
## 29          3.4          1.4         0.2
## 30          3.2          1.6         0.2
## 31          3.1          1.6         0.2
## 32          3.4          1.5         0.4
## 33          4.1          1.5         0.1
## 34          4.2          1.4         0.2
## 35          3.1          1.5         0.2
## 36          3.2          1.2         0.2
## 37          3.5          1.3         0.2
## 38          3.6          1.4         0.1
## 39          3.0          1.3         0.2
## 40          3.4          1.5         0.2
## 41          3.5          1.3         0.3
## 42          2.3          1.3         0.3
## 43          3.2          1.3         0.2
## 44          3.5          1.6         0.6
## 45          3.8          1.9         0.4
## 46          3.0          1.4         0.3
## 47          3.8          1.6         0.2
## 48          3.2          1.4         0.2
## 49          3.7          1.5         0.2
## 50          3.3          1.4         0.2
## 51          3.2          4.7         1.4
## 52          3.2          4.5         1.5
## 53          3.1          4.9         1.5
## 54          2.3          4.0         1.3
## 55          2.8          4.6         1.5
## 56          2.8          4.5         1.3
## 57          3.3          4.7         1.6
## 58          2.4          3.3         1.0
## 59          2.9          4.6         1.3
## 60          2.7          3.9         1.4
## 61          2.0          3.5         1.0
## 62          3.0          4.2         1.5
## 63          2.2          4.0         1.0
## 64          2.9          4.7         1.4
## 65          2.9          3.6         1.3
## 66          3.1          4.4         1.4
## 67          3.0          4.5         1.5
## 68          2.7          4.1         1.0
## 69          2.2          4.5         1.5
## 70          2.5          3.9         1.1
## 71          3.2          4.8         1.8
## 72          2.8          4.0         1.3
## 73          2.5          4.9         1.5
## 74          2.8          4.7         1.2
## 75          2.9          4.3         1.3
## 76          3.0          4.4         1.4
## 77          2.8          4.8         1.4
## 78          3.0          5.0         1.7
## 79          2.9          4.5         1.5
## 80          2.6          3.5         1.0
## 81          2.4          3.8         1.1
## 82          2.4          3.7         1.0
## 83          2.7          3.9         1.2
## 84          2.7          5.1         1.6
## 85          3.0          4.5         1.5
## 86          3.4          4.5         1.6
## 87          3.1          4.7         1.5
## 88          2.3          4.4         1.3
## 89          3.0          4.1         1.3
## 90          2.5          4.0         1.3
## 91          2.6          4.4         1.2
## 92          3.0          4.6         1.4
## 93          2.6          4.0         1.2
## 94          2.3          3.3         1.0
## 95          2.7          4.2         1.3
## 96          3.0          4.2         1.2
## 97          2.9          4.2         1.3
## 98          2.9          4.3         1.3
## 99          2.5          3.0         1.1
## 100         2.8          4.1         1.3
## 101         3.3          6.0         2.5
## 102         2.7          5.1         1.9
## 103         3.0          5.9         2.1
## 104         2.9          5.6         1.8
## 105         3.0          5.8         2.2
## 106         3.0          6.6         2.1
## 107         2.5          4.5         1.7
## 108         2.9          6.3         1.8
## 109         2.5          5.8         1.8
## 110         3.6          6.1         2.5
## 111         3.2          5.1         2.0
## 112         2.7          5.3         1.9
## 113         3.0          5.5         2.1
## 114         2.5          5.0         2.0
## 115         2.8          5.1         2.4
## 116         3.2          5.3         2.3
## 117         3.0          5.5         1.8
## 118         3.8          6.7         2.2
## 119         2.6          6.9         2.3
## 120         2.2          5.0         1.5
## 121         3.2          5.7         2.3
## 122         2.8          4.9         2.0
## 123         2.8          6.7         2.0
## 124         2.7          4.9         1.8
## 125         3.3          5.7         2.1
## 126         3.2          6.0         1.8
## 127         2.8          4.8         1.8
## 128         3.0          4.9         1.8
## 129         2.8          5.6         2.1
## 130         3.0          5.8         1.6
## 131         2.8          6.1         1.9
## 132         3.8          6.4         2.0
## 133         2.8          5.6         2.2
## 134         2.8          5.1         1.5
## 135         2.6          5.6         1.4
## 136         3.0          6.1         2.3
## 137         3.4          5.6         2.4
## 138         3.1          5.5         1.8
## 139         3.0          4.8         1.8
## 140         3.1          5.4         2.1
## 141         3.1          5.6         2.4
## 142         3.1          5.1         2.3
## 143         2.7          5.1         1.9
## 144         3.2          5.9         2.3
## 145         3.3          5.7         2.5
## 146         3.0          5.2         2.3
## 147         2.5          5.0         1.9
## 148         3.0          5.2         2.0
## 149         3.4          5.4         2.3
## 150         3.0          5.1         1.8</code></pre>
<p><code>reorder the variables</code><br />
Reordering columns is often done for reporting or for readability (e.g., keep key identifiers first). <code>everything()</code> selects all remaining variables in their current order.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-wrangling.html#cb15-1" tabindex="-1"></a>  iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(Species, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="data-wrangling.html#cb15-2" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>##        Species Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1       setosa          5.1         3.5          1.4         0.2
## 2       setosa          4.9         3.0          1.4         0.2
## 3       setosa          4.7         3.2          1.3         0.2
## 4       setosa          4.6         3.1          1.5         0.2
## 5       setosa          5.0         3.6          1.4         0.2
## 6       setosa          5.4         3.9          1.7         0.4
## 7       setosa          4.6         3.4          1.4         0.3
## 8       setosa          5.0         3.4          1.5         0.2
## 9       setosa          4.4         2.9          1.4         0.2
## 10      setosa          4.9         3.1          1.5         0.1
## 11      setosa          5.4         3.7          1.5         0.2
## 12      setosa          4.8         3.4          1.6         0.2
## 13      setosa          4.8         3.0          1.4         0.1
## 14      setosa          4.3         3.0          1.1         0.1
## 15      setosa          5.8         4.0          1.2         0.2
## 16      setosa          5.7         4.4          1.5         0.4
## 17      setosa          5.4         3.9          1.3         0.4
## 18      setosa          5.1         3.5          1.4         0.3
## 19      setosa          5.7         3.8          1.7         0.3
## 20      setosa          5.1         3.8          1.5         0.3
## 21      setosa          5.4         3.4          1.7         0.2
## 22      setosa          5.1         3.7          1.5         0.4
## 23      setosa          4.6         3.6          1.0         0.2
## 24      setosa          5.1         3.3          1.7         0.5
## 25      setosa          4.8         3.4          1.9         0.2
## 26      setosa          5.0         3.0          1.6         0.2
## 27      setosa          5.0         3.4          1.6         0.4
## 28      setosa          5.2         3.5          1.5         0.2
## 29      setosa          5.2         3.4          1.4         0.2
## 30      setosa          4.7         3.2          1.6         0.2
## 31      setosa          4.8         3.1          1.6         0.2
## 32      setosa          5.4         3.4          1.5         0.4
## 33      setosa          5.2         4.1          1.5         0.1
## 34      setosa          5.5         4.2          1.4         0.2
## 35      setosa          4.9         3.1          1.5         0.2
## 36      setosa          5.0         3.2          1.2         0.2
## 37      setosa          5.5         3.5          1.3         0.2
## 38      setosa          4.9         3.6          1.4         0.1
## 39      setosa          4.4         3.0          1.3         0.2
## 40      setosa          5.1         3.4          1.5         0.2
## 41      setosa          5.0         3.5          1.3         0.3
## 42      setosa          4.5         2.3          1.3         0.3
## 43      setosa          4.4         3.2          1.3         0.2
## 44      setosa          5.0         3.5          1.6         0.6
## 45      setosa          5.1         3.8          1.9         0.4
## 46      setosa          4.8         3.0          1.4         0.3
## 47      setosa          5.1         3.8          1.6         0.2
## 48      setosa          4.6         3.2          1.4         0.2
## 49      setosa          5.3         3.7          1.5         0.2
## 50      setosa          5.0         3.3          1.4         0.2
## 51  versicolor          7.0         3.2          4.7         1.4
## 52  versicolor          6.4         3.2          4.5         1.5
## 53  versicolor          6.9         3.1          4.9         1.5
## 54  versicolor          5.5         2.3          4.0         1.3
## 55  versicolor          6.5         2.8          4.6         1.5
## 56  versicolor          5.7         2.8          4.5         1.3
## 57  versicolor          6.3         3.3          4.7         1.6
## 58  versicolor          4.9         2.4          3.3         1.0
## 59  versicolor          6.6         2.9          4.6         1.3
## 60  versicolor          5.2         2.7          3.9         1.4
## 61  versicolor          5.0         2.0          3.5         1.0
## 62  versicolor          5.9         3.0          4.2         1.5
## 63  versicolor          6.0         2.2          4.0         1.0
## 64  versicolor          6.1         2.9          4.7         1.4
## 65  versicolor          5.6         2.9          3.6         1.3
## 66  versicolor          6.7         3.1          4.4         1.4
## 67  versicolor          5.6         3.0          4.5         1.5
## 68  versicolor          5.8         2.7          4.1         1.0
## 69  versicolor          6.2         2.2          4.5         1.5
## 70  versicolor          5.6         2.5          3.9         1.1
## 71  versicolor          5.9         3.2          4.8         1.8
## 72  versicolor          6.1         2.8          4.0         1.3
## 73  versicolor          6.3         2.5          4.9         1.5
## 74  versicolor          6.1         2.8          4.7         1.2
## 75  versicolor          6.4         2.9          4.3         1.3
## 76  versicolor          6.6         3.0          4.4         1.4
## 77  versicolor          6.8         2.8          4.8         1.4
## 78  versicolor          6.7         3.0          5.0         1.7
## 79  versicolor          6.0         2.9          4.5         1.5
## 80  versicolor          5.7         2.6          3.5         1.0
## 81  versicolor          5.5         2.4          3.8         1.1
## 82  versicolor          5.5         2.4          3.7         1.0
## 83  versicolor          5.8         2.7          3.9         1.2
## 84  versicolor          6.0         2.7          5.1         1.6
## 85  versicolor          5.4         3.0          4.5         1.5
## 86  versicolor          6.0         3.4          4.5         1.6
## 87  versicolor          6.7         3.1          4.7         1.5
## 88  versicolor          6.3         2.3          4.4         1.3
## 89  versicolor          5.6         3.0          4.1         1.3
## 90  versicolor          5.5         2.5          4.0         1.3
## 91  versicolor          5.5         2.6          4.4         1.2
## 92  versicolor          6.1         3.0          4.6         1.4
## 93  versicolor          5.8         2.6          4.0         1.2
## 94  versicolor          5.0         2.3          3.3         1.0
## 95  versicolor          5.6         2.7          4.2         1.3
## 96  versicolor          5.7         3.0          4.2         1.2
## 97  versicolor          5.7         2.9          4.2         1.3
## 98  versicolor          6.2         2.9          4.3         1.3
## 99  versicolor          5.1         2.5          3.0         1.1
## 100 versicolor          5.7         2.8          4.1         1.3
## 101  virginica          6.3         3.3          6.0         2.5
## 102  virginica          5.8         2.7          5.1         1.9
## 103  virginica          7.1         3.0          5.9         2.1
## 104  virginica          6.3         2.9          5.6         1.8
## 105  virginica          6.5         3.0          5.8         2.2
## 106  virginica          7.6         3.0          6.6         2.1
## 107  virginica          4.9         2.5          4.5         1.7
## 108  virginica          7.3         2.9          6.3         1.8
## 109  virginica          6.7         2.5          5.8         1.8
## 110  virginica          7.2         3.6          6.1         2.5
## 111  virginica          6.5         3.2          5.1         2.0
## 112  virginica          6.4         2.7          5.3         1.9
## 113  virginica          6.8         3.0          5.5         2.1
## 114  virginica          5.7         2.5          5.0         2.0
## 115  virginica          5.8         2.8          5.1         2.4
## 116  virginica          6.4         3.2          5.3         2.3
## 117  virginica          6.5         3.0          5.5         1.8
## 118  virginica          7.7         3.8          6.7         2.2
## 119  virginica          7.7         2.6          6.9         2.3
## 120  virginica          6.0         2.2          5.0         1.5
## 121  virginica          6.9         3.2          5.7         2.3
## 122  virginica          5.6         2.8          4.9         2.0
## 123  virginica          7.7         2.8          6.7         2.0
## 124  virginica          6.3         2.7          4.9         1.8
## 125  virginica          6.7         3.3          5.7         2.1
## 126  virginica          7.2         3.2          6.0         1.8
## 127  virginica          6.2         2.8          4.8         1.8
## 128  virginica          6.1         3.0          4.9         1.8
## 129  virginica          6.4         2.8          5.6         2.1
## 130  virginica          7.2         3.0          5.8         1.6
## 131  virginica          7.4         2.8          6.1         1.9
## 132  virginica          7.9         3.8          6.4         2.0
## 133  virginica          6.4         2.8          5.6         2.2
## 134  virginica          6.3         2.8          5.1         1.5
## 135  virginica          6.1         2.6          5.6         1.4
## 136  virginica          7.7         3.0          6.1         2.3
## 137  virginica          6.3         3.4          5.6         2.4
## 138  virginica          6.4         3.1          5.5         1.8
## 139  virginica          6.0         3.0          4.8         1.8
## 140  virginica          6.9         3.1          5.4         2.1
## 141  virginica          6.7         3.1          5.6         2.4
## 142  virginica          6.9         3.1          5.1         2.3
## 143  virginica          5.8         2.7          5.1         1.9
## 144  virginica          6.8         3.2          5.9         2.3
## 145  virginica          6.7         3.3          5.7         2.5
## 146  virginica          6.7         3.0          5.2         2.3
## 147  virginica          6.3         2.5          5.0         1.9
## 148  virginica          6.5         3.0          5.2         2.0
## 149  virginica          6.2         3.4          5.4         2.3
## 150  virginica          5.9         3.0          5.1         1.8</code></pre>
<p>You can also select a range of variables using the order they appear in the dataset. This is a quick way to take a contiguous block of variables.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-wrangling.html#cb17-1" tabindex="-1"></a><span class="co"># using the direction of vector</span></span>
<span id="cb17-2"><a href="data-wrangling.html#cb17-2" tabindex="-1"></a>  iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(Species<span class="sc">:</span>Sepal.Length ) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="data-wrangling.html#cb17-3" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>##        Species Petal.Width Petal.Length Sepal.Width Sepal.Length
## 1       setosa         0.2          1.4         3.5          5.1
## 2       setosa         0.2          1.4         3.0          4.9
## 3       setosa         0.2          1.3         3.2          4.7
## 4       setosa         0.2          1.5         3.1          4.6
## 5       setosa         0.2          1.4         3.6          5.0
## 6       setosa         0.4          1.7         3.9          5.4
## 7       setosa         0.3          1.4         3.4          4.6
## 8       setosa         0.2          1.5         3.4          5.0
## 9       setosa         0.2          1.4         2.9          4.4
## 10      setosa         0.1          1.5         3.1          4.9
## 11      setosa         0.2          1.5         3.7          5.4
## 12      setosa         0.2          1.6         3.4          4.8
## 13      setosa         0.1          1.4         3.0          4.8
## 14      setosa         0.1          1.1         3.0          4.3
## 15      setosa         0.2          1.2         4.0          5.8
## 16      setosa         0.4          1.5         4.4          5.7
## 17      setosa         0.4          1.3         3.9          5.4
## 18      setosa         0.3          1.4         3.5          5.1
## 19      setosa         0.3          1.7         3.8          5.7
## 20      setosa         0.3          1.5         3.8          5.1
## 21      setosa         0.2          1.7         3.4          5.4
## 22      setosa         0.4          1.5         3.7          5.1
## 23      setosa         0.2          1.0         3.6          4.6
## 24      setosa         0.5          1.7         3.3          5.1
## 25      setosa         0.2          1.9         3.4          4.8
## 26      setosa         0.2          1.6         3.0          5.0
## 27      setosa         0.4          1.6         3.4          5.0
## 28      setosa         0.2          1.5         3.5          5.2
## 29      setosa         0.2          1.4         3.4          5.2
## 30      setosa         0.2          1.6         3.2          4.7
## 31      setosa         0.2          1.6         3.1          4.8
## 32      setosa         0.4          1.5         3.4          5.4
## 33      setosa         0.1          1.5         4.1          5.2
## 34      setosa         0.2          1.4         4.2          5.5
## 35      setosa         0.2          1.5         3.1          4.9
## 36      setosa         0.2          1.2         3.2          5.0
## 37      setosa         0.2          1.3         3.5          5.5
## 38      setosa         0.1          1.4         3.6          4.9
## 39      setosa         0.2          1.3         3.0          4.4
## 40      setosa         0.2          1.5         3.4          5.1
## 41      setosa         0.3          1.3         3.5          5.0
## 42      setosa         0.3          1.3         2.3          4.5
## 43      setosa         0.2          1.3         3.2          4.4
## 44      setosa         0.6          1.6         3.5          5.0
## 45      setosa         0.4          1.9         3.8          5.1
## 46      setosa         0.3          1.4         3.0          4.8
## 47      setosa         0.2          1.6         3.8          5.1
## 48      setosa         0.2          1.4         3.2          4.6
## 49      setosa         0.2          1.5         3.7          5.3
## 50      setosa         0.2          1.4         3.3          5.0
## 51  versicolor         1.4          4.7         3.2          7.0
## 52  versicolor         1.5          4.5         3.2          6.4
## 53  versicolor         1.5          4.9         3.1          6.9
## 54  versicolor         1.3          4.0         2.3          5.5
## 55  versicolor         1.5          4.6         2.8          6.5
## 56  versicolor         1.3          4.5         2.8          5.7
## 57  versicolor         1.6          4.7         3.3          6.3
## 58  versicolor         1.0          3.3         2.4          4.9
## 59  versicolor         1.3          4.6         2.9          6.6
## 60  versicolor         1.4          3.9         2.7          5.2
## 61  versicolor         1.0          3.5         2.0          5.0
## 62  versicolor         1.5          4.2         3.0          5.9
## 63  versicolor         1.0          4.0         2.2          6.0
## 64  versicolor         1.4          4.7         2.9          6.1
## 65  versicolor         1.3          3.6         2.9          5.6
## 66  versicolor         1.4          4.4         3.1          6.7
## 67  versicolor         1.5          4.5         3.0          5.6
## 68  versicolor         1.0          4.1         2.7          5.8
## 69  versicolor         1.5          4.5         2.2          6.2
## 70  versicolor         1.1          3.9         2.5          5.6
## 71  versicolor         1.8          4.8         3.2          5.9
## 72  versicolor         1.3          4.0         2.8          6.1
## 73  versicolor         1.5          4.9         2.5          6.3
## 74  versicolor         1.2          4.7         2.8          6.1
## 75  versicolor         1.3          4.3         2.9          6.4
## 76  versicolor         1.4          4.4         3.0          6.6
## 77  versicolor         1.4          4.8         2.8          6.8
## 78  versicolor         1.7          5.0         3.0          6.7
## 79  versicolor         1.5          4.5         2.9          6.0
## 80  versicolor         1.0          3.5         2.6          5.7
## 81  versicolor         1.1          3.8         2.4          5.5
## 82  versicolor         1.0          3.7         2.4          5.5
## 83  versicolor         1.2          3.9         2.7          5.8
## 84  versicolor         1.6          5.1         2.7          6.0
## 85  versicolor         1.5          4.5         3.0          5.4
## 86  versicolor         1.6          4.5         3.4          6.0
## 87  versicolor         1.5          4.7         3.1          6.7
## 88  versicolor         1.3          4.4         2.3          6.3
## 89  versicolor         1.3          4.1         3.0          5.6
## 90  versicolor         1.3          4.0         2.5          5.5
## 91  versicolor         1.2          4.4         2.6          5.5
## 92  versicolor         1.4          4.6         3.0          6.1
## 93  versicolor         1.2          4.0         2.6          5.8
## 94  versicolor         1.0          3.3         2.3          5.0
## 95  versicolor         1.3          4.2         2.7          5.6
## 96  versicolor         1.2          4.2         3.0          5.7
## 97  versicolor         1.3          4.2         2.9          5.7
## 98  versicolor         1.3          4.3         2.9          6.2
## 99  versicolor         1.1          3.0         2.5          5.1
## 100 versicolor         1.3          4.1         2.8          5.7
## 101  virginica         2.5          6.0         3.3          6.3
## 102  virginica         1.9          5.1         2.7          5.8
## 103  virginica         2.1          5.9         3.0          7.1
## 104  virginica         1.8          5.6         2.9          6.3
## 105  virginica         2.2          5.8         3.0          6.5
## 106  virginica         2.1          6.6         3.0          7.6
## 107  virginica         1.7          4.5         2.5          4.9
## 108  virginica         1.8          6.3         2.9          7.3
## 109  virginica         1.8          5.8         2.5          6.7
## 110  virginica         2.5          6.1         3.6          7.2
## 111  virginica         2.0          5.1         3.2          6.5
## 112  virginica         1.9          5.3         2.7          6.4
## 113  virginica         2.1          5.5         3.0          6.8
## 114  virginica         2.0          5.0         2.5          5.7
## 115  virginica         2.4          5.1         2.8          5.8
## 116  virginica         2.3          5.3         3.2          6.4
## 117  virginica         1.8          5.5         3.0          6.5
## 118  virginica         2.2          6.7         3.8          7.7
## 119  virginica         2.3          6.9         2.6          7.7
## 120  virginica         1.5          5.0         2.2          6.0
## 121  virginica         2.3          5.7         3.2          6.9
## 122  virginica         2.0          4.9         2.8          5.6
## 123  virginica         2.0          6.7         2.8          7.7
## 124  virginica         1.8          4.9         2.7          6.3
## 125  virginica         2.1          5.7         3.3          6.7
## 126  virginica         1.8          6.0         3.2          7.2
## 127  virginica         1.8          4.8         2.8          6.2
## 128  virginica         1.8          4.9         3.0          6.1
## 129  virginica         2.1          5.6         2.8          6.4
## 130  virginica         1.6          5.8         3.0          7.2
## 131  virginica         1.9          6.1         2.8          7.4
## 132  virginica         2.0          6.4         3.8          7.9
## 133  virginica         2.2          5.6         2.8          6.4
## 134  virginica         1.5          5.1         2.8          6.3
## 135  virginica         1.4          5.6         2.6          6.1
## 136  virginica         2.3          6.1         3.0          7.7
## 137  virginica         2.4          5.6         3.4          6.3
## 138  virginica         1.8          5.5         3.1          6.4
## 139  virginica         1.8          4.8         3.0          6.0
## 140  virginica         2.1          5.4         3.1          6.9
## 141  virginica         2.4          5.6         3.1          6.7
## 142  virginica         2.3          5.1         3.1          6.9
## 143  virginica         1.9          5.1         2.7          5.8
## 144  virginica         2.3          5.9         3.2          6.8
## 145  virginica         2.5          5.7         3.3          6.7
## 146  virginica         2.3          5.2         3.0          6.7
## 147  virginica         1.9          5.0         2.5          6.3
## 148  virginica         2.0          5.2         3.0          6.5
## 149  virginica         2.3          5.4         3.4          6.2
## 150  virginica         1.8          5.1         3.0          5.9</code></pre>
</div>
<div id="rename-variables" class="section level3 hasAnchor" number="1.1.4">
<h3><span class="header-section-number">1.1.4</span> Rename variables<a href="data-wrangling.html#rename-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Renaming variables improves clarity and standardization, especially when variable names will be used in tables, plots, or models. A common practice is to use consistent naming conventions (e.g., snake_case) and avoid special characters.</p>
<p><code>rename()</code> changes variable names explicitly.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-wrangling.html#cb19-1" tabindex="-1"></a><span class="fu">rename</span>(iris,  <span class="at">Sepal_Width=</span> Sepal.Width,  <span class="at">Sepal_Length=</span> Sepal.Length )</span></code></pre></div>
<pre><code>##     Sepal_Length Sepal_Width Petal.Length Petal.Width    Species
## 1            5.1         3.5          1.4         0.2     setosa
## 2            4.9         3.0          1.4         0.2     setosa
## 3            4.7         3.2          1.3         0.2     setosa
## 4            4.6         3.1          1.5         0.2     setosa
## 5            5.0         3.6          1.4         0.2     setosa
## 6            5.4         3.9          1.7         0.4     setosa
## 7            4.6         3.4          1.4         0.3     setosa
## 8            5.0         3.4          1.5         0.2     setosa
## 9            4.4         2.9          1.4         0.2     setosa
## 10           4.9         3.1          1.5         0.1     setosa
## 11           5.4         3.7          1.5         0.2     setosa
## 12           4.8         3.4          1.6         0.2     setosa
## 13           4.8         3.0          1.4         0.1     setosa
## 14           4.3         3.0          1.1         0.1     setosa
## 15           5.8         4.0          1.2         0.2     setosa
## 16           5.7         4.4          1.5         0.4     setosa
## 17           5.4         3.9          1.3         0.4     setosa
## 18           5.1         3.5          1.4         0.3     setosa
## 19           5.7         3.8          1.7         0.3     setosa
## 20           5.1         3.8          1.5         0.3     setosa
## 21           5.4         3.4          1.7         0.2     setosa
## 22           5.1         3.7          1.5         0.4     setosa
## 23           4.6         3.6          1.0         0.2     setosa
## 24           5.1         3.3          1.7         0.5     setosa
## 25           4.8         3.4          1.9         0.2     setosa
## 26           5.0         3.0          1.6         0.2     setosa
## 27           5.0         3.4          1.6         0.4     setosa
## 28           5.2         3.5          1.5         0.2     setosa
## 29           5.2         3.4          1.4         0.2     setosa
## 30           4.7         3.2          1.6         0.2     setosa
## 31           4.8         3.1          1.6         0.2     setosa
## 32           5.4         3.4          1.5         0.4     setosa
## 33           5.2         4.1          1.5         0.1     setosa
## 34           5.5         4.2          1.4         0.2     setosa
## 35           4.9         3.1          1.5         0.2     setosa
## 36           5.0         3.2          1.2         0.2     setosa
## 37           5.5         3.5          1.3         0.2     setosa
## 38           4.9         3.6          1.4         0.1     setosa
## 39           4.4         3.0          1.3         0.2     setosa
## 40           5.1         3.4          1.5         0.2     setosa
## 41           5.0         3.5          1.3         0.3     setosa
## 42           4.5         2.3          1.3         0.3     setosa
## 43           4.4         3.2          1.3         0.2     setosa
## 44           5.0         3.5          1.6         0.6     setosa
## 45           5.1         3.8          1.9         0.4     setosa
## 46           4.8         3.0          1.4         0.3     setosa
## 47           5.1         3.8          1.6         0.2     setosa
## 48           4.6         3.2          1.4         0.2     setosa
## 49           5.3         3.7          1.5         0.2     setosa
## 50           5.0         3.3          1.4         0.2     setosa
## 51           7.0         3.2          4.7         1.4 versicolor
## 52           6.4         3.2          4.5         1.5 versicolor
## 53           6.9         3.1          4.9         1.5 versicolor
## 54           5.5         2.3          4.0         1.3 versicolor
## 55           6.5         2.8          4.6         1.5 versicolor
## 56           5.7         2.8          4.5         1.3 versicolor
## 57           6.3         3.3          4.7         1.6 versicolor
## 58           4.9         2.4          3.3         1.0 versicolor
## 59           6.6         2.9          4.6         1.3 versicolor
## 60           5.2         2.7          3.9         1.4 versicolor
## 61           5.0         2.0          3.5         1.0 versicolor
## 62           5.9         3.0          4.2         1.5 versicolor
## 63           6.0         2.2          4.0         1.0 versicolor
## 64           6.1         2.9          4.7         1.4 versicolor
## 65           5.6         2.9          3.6         1.3 versicolor
## 66           6.7         3.1          4.4         1.4 versicolor
## 67           5.6         3.0          4.5         1.5 versicolor
## 68           5.8         2.7          4.1         1.0 versicolor
## 69           6.2         2.2          4.5         1.5 versicolor
## 70           5.6         2.5          3.9         1.1 versicolor
## 71           5.9         3.2          4.8         1.8 versicolor
## 72           6.1         2.8          4.0         1.3 versicolor
## 73           6.3         2.5          4.9         1.5 versicolor
## 74           6.1         2.8          4.7         1.2 versicolor
## 75           6.4         2.9          4.3         1.3 versicolor
## 76           6.6         3.0          4.4         1.4 versicolor
## 77           6.8         2.8          4.8         1.4 versicolor
## 78           6.7         3.0          5.0         1.7 versicolor
## 79           6.0         2.9          4.5         1.5 versicolor
## 80           5.7         2.6          3.5         1.0 versicolor
## 81           5.5         2.4          3.8         1.1 versicolor
## 82           5.5         2.4          3.7         1.0 versicolor
## 83           5.8         2.7          3.9         1.2 versicolor
## 84           6.0         2.7          5.1         1.6 versicolor
## 85           5.4         3.0          4.5         1.5 versicolor
## 86           6.0         3.4          4.5         1.6 versicolor
## 87           6.7         3.1          4.7         1.5 versicolor
## 88           6.3         2.3          4.4         1.3 versicolor
## 89           5.6         3.0          4.1         1.3 versicolor
## 90           5.5         2.5          4.0         1.3 versicolor
## 91           5.5         2.6          4.4         1.2 versicolor
## 92           6.1         3.0          4.6         1.4 versicolor
## 93           5.8         2.6          4.0         1.2 versicolor
## 94           5.0         2.3          3.3         1.0 versicolor
## 95           5.6         2.7          4.2         1.3 versicolor
## 96           5.7         3.0          4.2         1.2 versicolor
## 97           5.7         2.9          4.2         1.3 versicolor
## 98           6.2         2.9          4.3         1.3 versicolor
## 99           5.1         2.5          3.0         1.1 versicolor
## 100          5.7         2.8          4.1         1.3 versicolor
## 101          6.3         3.3          6.0         2.5  virginica
## 102          5.8         2.7          5.1         1.9  virginica
## 103          7.1         3.0          5.9         2.1  virginica
## 104          6.3         2.9          5.6         1.8  virginica
## 105          6.5         3.0          5.8         2.2  virginica
## 106          7.6         3.0          6.6         2.1  virginica
## 107          4.9         2.5          4.5         1.7  virginica
## 108          7.3         2.9          6.3         1.8  virginica
## 109          6.7         2.5          5.8         1.8  virginica
## 110          7.2         3.6          6.1         2.5  virginica
## 111          6.5         3.2          5.1         2.0  virginica
## 112          6.4         2.7          5.3         1.9  virginica
## 113          6.8         3.0          5.5         2.1  virginica
## 114          5.7         2.5          5.0         2.0  virginica
## 115          5.8         2.8          5.1         2.4  virginica
## 116          6.4         3.2          5.3         2.3  virginica
## 117          6.5         3.0          5.5         1.8  virginica
## 118          7.7         3.8          6.7         2.2  virginica
## 119          7.7         2.6          6.9         2.3  virginica
## 120          6.0         2.2          5.0         1.5  virginica
## 121          6.9         3.2          5.7         2.3  virginica
## 122          5.6         2.8          4.9         2.0  virginica
## 123          7.7         2.8          6.7         2.0  virginica
## 124          6.3         2.7          4.9         1.8  virginica
## 125          6.7         3.3          5.7         2.1  virginica
## 126          7.2         3.2          6.0         1.8  virginica
## 127          6.2         2.8          4.8         1.8  virginica
## 128          6.1         3.0          4.9         1.8  virginica
## 129          6.4         2.8          5.6         2.1  virginica
## 130          7.2         3.0          5.8         1.6  virginica
## 131          7.4         2.8          6.1         1.9  virginica
## 132          7.9         3.8          6.4         2.0  virginica
## 133          6.4         2.8          5.6         2.2  virginica
## 134          6.3         2.8          5.1         1.5  virginica
## 135          6.1         2.6          5.6         1.4  virginica
## 136          7.7         3.0          6.1         2.3  virginica
## 137          6.3         3.4          5.6         2.4  virginica
## 138          6.4         3.1          5.5         1.8  virginica
## 139          6.0         3.0          4.8         1.8  virginica
## 140          6.9         3.1          5.4         2.1  virginica
## 141          6.7         3.1          5.6         2.4  virginica
## 142          6.9         3.1          5.1         2.3  virginica
## 143          5.8         2.7          5.1         1.9  virginica
## 144          6.8         3.2          5.9         2.3  virginica
## 145          6.7         3.3          5.7         2.5  virginica
## 146          6.7         3.0          5.2         2.3  virginica
## 147          6.3         2.5          5.0         1.9  virginica
## 148          6.5         3.0          5.2         2.0  virginica
## 149          6.2         3.4          5.4         2.3  virginica
## 150          5.9         3.0          5.1         1.8  virginica</code></pre>
<p><code>rename_with()</code> applies a function to multiple variable names. For example, converting to lowercase can help standardize variable names when merging datasets from different sources.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-wrangling.html#cb21-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="data-wrangling.html#cb21-2" tabindex="-1"></a>  <span class="fu">rename_with</span>(tolower) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   sepal.length sepal.width petal.length petal.width species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
<div id="sorting-in-ascending-or-descending-order" class="section level3 hasAnchor" number="1.1.5">
<h3><span class="header-section-number">1.1.5</span> Sorting in ascending or descending order<a href="data-wrangling.html#sorting-in-ascending-or-descending-order" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sorting is commonly used for (1) identifying extreme values, (2) reviewing data quality, and (3) preparing ordered outputs for tables.</p>
<ul>
<li>put a minus in front of a variable for descending order<br />
Here we sort by <code>Petal.Length</code> ascending, and within that, by <code>Petal.Width</code> descending.</li>
</ul>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-wrangling.html#cb23-1" tabindex="-1"></a><span class="fu">arrange</span>(iris, Petal.Length, <span class="sc">-</span>Petal.Width)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            4.6         3.6          1.0         0.2     setosa
## 2            4.3         3.0          1.1         0.1     setosa
## 3            5.8         4.0          1.2         0.2     setosa
## 4            5.0         3.2          1.2         0.2     setosa
## 5            5.4         3.9          1.3         0.4     setosa
## 6            5.0         3.5          1.3         0.3     setosa
## 7            4.5         2.3          1.3         0.3     setosa
## 8            4.7         3.2          1.3         0.2     setosa
## 9            5.5         3.5          1.3         0.2     setosa
## 10           4.4         3.0          1.3         0.2     setosa
## 11           4.4         3.2          1.3         0.2     setosa
## 12           4.6         3.4          1.4         0.3     setosa
## 13           5.1         3.5          1.4         0.3     setosa
## 14           4.8         3.0          1.4         0.3     setosa
## 15           5.1         3.5          1.4         0.2     setosa
## 16           4.9         3.0          1.4         0.2     setosa
## 17           5.0         3.6          1.4         0.2     setosa
## 18           4.4         2.9          1.4         0.2     setosa
## 19           5.2         3.4          1.4         0.2     setosa
## 20           5.5         4.2          1.4         0.2     setosa
## 21           4.6         3.2          1.4         0.2     setosa
## 22           5.0         3.3          1.4         0.2     setosa
## 23           4.8         3.0          1.4         0.1     setosa
## 24           4.9         3.6          1.4         0.1     setosa
## 25           5.7         4.4          1.5         0.4     setosa
## 26           5.1         3.7          1.5         0.4     setosa
## 27           5.4         3.4          1.5         0.4     setosa
## 28           5.1         3.8          1.5         0.3     setosa
## 29           4.6         3.1          1.5         0.2     setosa
## 30           5.0         3.4          1.5         0.2     setosa
## 31           5.4         3.7          1.5         0.2     setosa
## 32           5.2         3.5          1.5         0.2     setosa
## 33           4.9         3.1          1.5         0.2     setosa
## 34           5.1         3.4          1.5         0.2     setosa
## 35           5.3         3.7          1.5         0.2     setosa
## 36           4.9         3.1          1.5         0.1     setosa
## 37           5.2         4.1          1.5         0.1     setosa
## 38           5.0         3.5          1.6         0.6     setosa
## 39           5.0         3.4          1.6         0.4     setosa
## 40           4.8         3.4          1.6         0.2     setosa
## 41           5.0         3.0          1.6         0.2     setosa
## 42           4.7         3.2          1.6         0.2     setosa
## 43           4.8         3.1          1.6         0.2     setosa
## 44           5.1         3.8          1.6         0.2     setosa
## 45           5.1         3.3          1.7         0.5     setosa
## 46           5.4         3.9          1.7         0.4     setosa
## 47           5.7         3.8          1.7         0.3     setosa
## 48           5.4         3.4          1.7         0.2     setosa
## 49           5.1         3.8          1.9         0.4     setosa
## 50           4.8         3.4          1.9         0.2     setosa
## 51           5.1         2.5          3.0         1.1 versicolor
## 52           4.9         2.4          3.3         1.0 versicolor
## 53           5.0         2.3          3.3         1.0 versicolor
## 54           5.0         2.0          3.5         1.0 versicolor
## 55           5.7         2.6          3.5         1.0 versicolor
## 56           5.6         2.9          3.6         1.3 versicolor
## 57           5.5         2.4          3.7         1.0 versicolor
## 58           5.5         2.4          3.8         1.1 versicolor
## 59           5.2         2.7          3.9         1.4 versicolor
## 60           5.8         2.7          3.9         1.2 versicolor
## 61           5.6         2.5          3.9         1.1 versicolor
## 62           5.5         2.3          4.0         1.3 versicolor
## 63           6.1         2.8          4.0         1.3 versicolor
## 64           5.5         2.5          4.0         1.3 versicolor
## 65           5.8         2.6          4.0         1.2 versicolor
## 66           6.0         2.2          4.0         1.0 versicolor
## 67           5.6         3.0          4.1         1.3 versicolor
## 68           5.7         2.8          4.1         1.3 versicolor
## 69           5.8         2.7          4.1         1.0 versicolor
## 70           5.9         3.0          4.2         1.5 versicolor
## 71           5.6         2.7          4.2         1.3 versicolor
## 72           5.7         2.9          4.2         1.3 versicolor
## 73           5.7         3.0          4.2         1.2 versicolor
## 74           6.4         2.9          4.3         1.3 versicolor
## 75           6.2         2.9          4.3         1.3 versicolor
## 76           6.7         3.1          4.4         1.4 versicolor
## 77           6.6         3.0          4.4         1.4 versicolor
## 78           6.3         2.3          4.4         1.3 versicolor
## 79           5.5         2.6          4.4         1.2 versicolor
## 80           4.9         2.5          4.5         1.7  virginica
## 81           6.0         3.4          4.5         1.6 versicolor
## 82           6.4         3.2          4.5         1.5 versicolor
## 83           5.6         3.0          4.5         1.5 versicolor
## 84           6.2         2.2          4.5         1.5 versicolor
## 85           6.0         2.9          4.5         1.5 versicolor
## 86           5.4         3.0          4.5         1.5 versicolor
## 87           5.7         2.8          4.5         1.3 versicolor
## 88           6.5         2.8          4.6         1.5 versicolor
## 89           6.1         3.0          4.6         1.4 versicolor
## 90           6.6         2.9          4.6         1.3 versicolor
## 91           6.3         3.3          4.7         1.6 versicolor
## 92           6.7         3.1          4.7         1.5 versicolor
## 93           7.0         3.2          4.7         1.4 versicolor
## 94           6.1         2.9          4.7         1.4 versicolor
## 95           6.1         2.8          4.7         1.2 versicolor
## 96           5.9         3.2          4.8         1.8 versicolor
## 97           6.2         2.8          4.8         1.8  virginica
## 98           6.0         3.0          4.8         1.8  virginica
## 99           6.8         2.8          4.8         1.4 versicolor
## 100          5.6         2.8          4.9         2.0  virginica
## 101          6.3         2.7          4.9         1.8  virginica
## 102          6.1         3.0          4.9         1.8  virginica
## 103          6.9         3.1          4.9         1.5 versicolor
## 104          6.3         2.5          4.9         1.5 versicolor
## 105          5.7         2.5          5.0         2.0  virginica
## 106          6.3         2.5          5.0         1.9  virginica
## 107          6.7         3.0          5.0         1.7 versicolor
## 108          6.0         2.2          5.0         1.5  virginica
## 109          5.8         2.8          5.1         2.4  virginica
## 110          6.9         3.1          5.1         2.3  virginica
## 111          6.5         3.2          5.1         2.0  virginica
## 112          5.8         2.7          5.1         1.9  virginica
## 113          5.8         2.7          5.1         1.9  virginica
## 114          5.9         3.0          5.1         1.8  virginica
## 115          6.0         2.7          5.1         1.6 versicolor
## 116          6.3         2.8          5.1         1.5  virginica
## 117          6.7         3.0          5.2         2.3  virginica
## 118          6.5         3.0          5.2         2.0  virginica
## 119          6.4         3.2          5.3         2.3  virginica
## 120          6.4         2.7          5.3         1.9  virginica
## 121          6.2         3.4          5.4         2.3  virginica
## 122          6.9         3.1          5.4         2.1  virginica
## 123          6.8         3.0          5.5         2.1  virginica
## 124          6.5         3.0          5.5         1.8  virginica
## 125          6.4         3.1          5.5         1.8  virginica
## 126          6.3         3.4          5.6         2.4  virginica
## 127          6.7         3.1          5.6         2.4  virginica
## 128          6.4         2.8          5.6         2.2  virginica
## 129          6.4         2.8          5.6         2.1  virginica
## 130          6.3         2.9          5.6         1.8  virginica
## 131          6.1         2.6          5.6         1.4  virginica
## 132          6.7         3.3          5.7         2.5  virginica
## 133          6.9         3.2          5.7         2.3  virginica
## 134          6.7         3.3          5.7         2.1  virginica
## 135          6.5         3.0          5.8         2.2  virginica
## 136          6.7         2.5          5.8         1.8  virginica
## 137          7.2         3.0          5.8         1.6  virginica
## 138          6.8         3.2          5.9         2.3  virginica
## 139          7.1         3.0          5.9         2.1  virginica
## 140          6.3         3.3          6.0         2.5  virginica
## 141          7.2         3.2          6.0         1.8  virginica
## 142          7.2         3.6          6.1         2.5  virginica
## 143          7.7         3.0          6.1         2.3  virginica
## 144          7.4         2.8          6.1         1.9  virginica
## 145          7.3         2.9          6.3         1.8  virginica
## 146          7.9         3.8          6.4         2.0  virginica
## 147          7.6         3.0          6.6         2.1  virginica
## 148          7.7         3.8          6.7         2.2  virginica
## 149          7.7         2.8          6.7         2.0  virginica
## 150          7.7         2.6          6.9         2.3  virginica</code></pre>
</div>
<div id="transform-variables" class="section level3 hasAnchor" number="1.1.6">
<h3><span class="header-section-number">1.1.6</span> Transform variables<a href="data-wrangling.html#transform-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Creating new variables is one of the most common wrangling tasks. Typical use cases include unit conversion, categorization, deriving endpoints, and creating analysis flags.</p>
<p><code>mutate()</code> creates new variables (or overwrites existing variables). Here, we create a new variable and also rescale an existing variable.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-wrangling.html#cb25-1" tabindex="-1"></a><span class="fu">mutate</span>(iris,  <span class="at">newvar=</span> Sepal.Width<span class="sc">*</span><span class="dv">10</span>, <span class="at">Petal.Length=</span>Petal.Length<span class="sc">/</span><span class="dv">100</span>  )</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species newvar
## 1            5.1         3.5        0.014         0.2     setosa     35
## 2            4.9         3.0        0.014         0.2     setosa     30
## 3            4.7         3.2        0.013         0.2     setosa     32
## 4            4.6         3.1        0.015         0.2     setosa     31
## 5            5.0         3.6        0.014         0.2     setosa     36
## 6            5.4         3.9        0.017         0.4     setosa     39
## 7            4.6         3.4        0.014         0.3     setosa     34
## 8            5.0         3.4        0.015         0.2     setosa     34
## 9            4.4         2.9        0.014         0.2     setosa     29
## 10           4.9         3.1        0.015         0.1     setosa     31
## 11           5.4         3.7        0.015         0.2     setosa     37
## 12           4.8         3.4        0.016         0.2     setosa     34
## 13           4.8         3.0        0.014         0.1     setosa     30
## 14           4.3         3.0        0.011         0.1     setosa     30
## 15           5.8         4.0        0.012         0.2     setosa     40
## 16           5.7         4.4        0.015         0.4     setosa     44
## 17           5.4         3.9        0.013         0.4     setosa     39
## 18           5.1         3.5        0.014         0.3     setosa     35
## 19           5.7         3.8        0.017         0.3     setosa     38
## 20           5.1         3.8        0.015         0.3     setosa     38
## 21           5.4         3.4        0.017         0.2     setosa     34
## 22           5.1         3.7        0.015         0.4     setosa     37
## 23           4.6         3.6        0.010         0.2     setosa     36
## 24           5.1         3.3        0.017         0.5     setosa     33
## 25           4.8         3.4        0.019         0.2     setosa     34
## 26           5.0         3.0        0.016         0.2     setosa     30
## 27           5.0         3.4        0.016         0.4     setosa     34
## 28           5.2         3.5        0.015         0.2     setosa     35
## 29           5.2         3.4        0.014         0.2     setosa     34
## 30           4.7         3.2        0.016         0.2     setosa     32
## 31           4.8         3.1        0.016         0.2     setosa     31
## 32           5.4         3.4        0.015         0.4     setosa     34
## 33           5.2         4.1        0.015         0.1     setosa     41
## 34           5.5         4.2        0.014         0.2     setosa     42
## 35           4.9         3.1        0.015         0.2     setosa     31
## 36           5.0         3.2        0.012         0.2     setosa     32
## 37           5.5         3.5        0.013         0.2     setosa     35
## 38           4.9         3.6        0.014         0.1     setosa     36
## 39           4.4         3.0        0.013         0.2     setosa     30
## 40           5.1         3.4        0.015         0.2     setosa     34
## 41           5.0         3.5        0.013         0.3     setosa     35
## 42           4.5         2.3        0.013         0.3     setosa     23
## 43           4.4         3.2        0.013         0.2     setosa     32
## 44           5.0         3.5        0.016         0.6     setosa     35
## 45           5.1         3.8        0.019         0.4     setosa     38
## 46           4.8         3.0        0.014         0.3     setosa     30
## 47           5.1         3.8        0.016         0.2     setosa     38
## 48           4.6         3.2        0.014         0.2     setosa     32
## 49           5.3         3.7        0.015         0.2     setosa     37
## 50           5.0         3.3        0.014         0.2     setosa     33
## 51           7.0         3.2        0.047         1.4 versicolor     32
## 52           6.4         3.2        0.045         1.5 versicolor     32
## 53           6.9         3.1        0.049         1.5 versicolor     31
## 54           5.5         2.3        0.040         1.3 versicolor     23
## 55           6.5         2.8        0.046         1.5 versicolor     28
## 56           5.7         2.8        0.045         1.3 versicolor     28
## 57           6.3         3.3        0.047         1.6 versicolor     33
## 58           4.9         2.4        0.033         1.0 versicolor     24
## 59           6.6         2.9        0.046         1.3 versicolor     29
## 60           5.2         2.7        0.039         1.4 versicolor     27
## 61           5.0         2.0        0.035         1.0 versicolor     20
## 62           5.9         3.0        0.042         1.5 versicolor     30
## 63           6.0         2.2        0.040         1.0 versicolor     22
## 64           6.1         2.9        0.047         1.4 versicolor     29
## 65           5.6         2.9        0.036         1.3 versicolor     29
## 66           6.7         3.1        0.044         1.4 versicolor     31
## 67           5.6         3.0        0.045         1.5 versicolor     30
## 68           5.8         2.7        0.041         1.0 versicolor     27
## 69           6.2         2.2        0.045         1.5 versicolor     22
## 70           5.6         2.5        0.039         1.1 versicolor     25
## 71           5.9         3.2        0.048         1.8 versicolor     32
## 72           6.1         2.8        0.040         1.3 versicolor     28
## 73           6.3         2.5        0.049         1.5 versicolor     25
## 74           6.1         2.8        0.047         1.2 versicolor     28
## 75           6.4         2.9        0.043         1.3 versicolor     29
## 76           6.6         3.0        0.044         1.4 versicolor     30
## 77           6.8         2.8        0.048         1.4 versicolor     28
## 78           6.7         3.0        0.050         1.7 versicolor     30
## 79           6.0         2.9        0.045         1.5 versicolor     29
## 80           5.7         2.6        0.035         1.0 versicolor     26
## 81           5.5         2.4        0.038         1.1 versicolor     24
## 82           5.5         2.4        0.037         1.0 versicolor     24
## 83           5.8         2.7        0.039         1.2 versicolor     27
## 84           6.0         2.7        0.051         1.6 versicolor     27
## 85           5.4         3.0        0.045         1.5 versicolor     30
## 86           6.0         3.4        0.045         1.6 versicolor     34
## 87           6.7         3.1        0.047         1.5 versicolor     31
## 88           6.3         2.3        0.044         1.3 versicolor     23
## 89           5.6         3.0        0.041         1.3 versicolor     30
## 90           5.5         2.5        0.040         1.3 versicolor     25
## 91           5.5         2.6        0.044         1.2 versicolor     26
## 92           6.1         3.0        0.046         1.4 versicolor     30
## 93           5.8         2.6        0.040         1.2 versicolor     26
## 94           5.0         2.3        0.033         1.0 versicolor     23
## 95           5.6         2.7        0.042         1.3 versicolor     27
## 96           5.7         3.0        0.042         1.2 versicolor     30
## 97           5.7         2.9        0.042         1.3 versicolor     29
## 98           6.2         2.9        0.043         1.3 versicolor     29
## 99           5.1         2.5        0.030         1.1 versicolor     25
## 100          5.7         2.8        0.041         1.3 versicolor     28
## 101          6.3         3.3        0.060         2.5  virginica     33
## 102          5.8         2.7        0.051         1.9  virginica     27
## 103          7.1         3.0        0.059         2.1  virginica     30
## 104          6.3         2.9        0.056         1.8  virginica     29
## 105          6.5         3.0        0.058         2.2  virginica     30
## 106          7.6         3.0        0.066         2.1  virginica     30
## 107          4.9         2.5        0.045         1.7  virginica     25
## 108          7.3         2.9        0.063         1.8  virginica     29
## 109          6.7         2.5        0.058         1.8  virginica     25
## 110          7.2         3.6        0.061         2.5  virginica     36
## 111          6.5         3.2        0.051         2.0  virginica     32
## 112          6.4         2.7        0.053         1.9  virginica     27
## 113          6.8         3.0        0.055         2.1  virginica     30
## 114          5.7         2.5        0.050         2.0  virginica     25
## 115          5.8         2.8        0.051         2.4  virginica     28
## 116          6.4         3.2        0.053         2.3  virginica     32
## 117          6.5         3.0        0.055         1.8  virginica     30
## 118          7.7         3.8        0.067         2.2  virginica     38
## 119          7.7         2.6        0.069         2.3  virginica     26
## 120          6.0         2.2        0.050         1.5  virginica     22
## 121          6.9         3.2        0.057         2.3  virginica     32
## 122          5.6         2.8        0.049         2.0  virginica     28
## 123          7.7         2.8        0.067         2.0  virginica     28
## 124          6.3         2.7        0.049         1.8  virginica     27
## 125          6.7         3.3        0.057         2.1  virginica     33
## 126          7.2         3.2        0.060         1.8  virginica     32
## 127          6.2         2.8        0.048         1.8  virginica     28
## 128          6.1         3.0        0.049         1.8  virginica     30
## 129          6.4         2.8        0.056         2.1  virginica     28
## 130          7.2         3.0        0.058         1.6  virginica     30
## 131          7.4         2.8        0.061         1.9  virginica     28
## 132          7.9         3.8        0.064         2.0  virginica     38
## 133          6.4         2.8        0.056         2.2  virginica     28
## 134          6.3         2.8        0.051         1.5  virginica     28
## 135          6.1         2.6        0.056         1.4  virginica     26
## 136          7.7         3.0        0.061         2.3  virginica     30
## 137          6.3         3.4        0.056         2.4  virginica     34
## 138          6.4         3.1        0.055         1.8  virginica     31
## 139          6.0         3.0        0.048         1.8  virginica     30
## 140          6.9         3.1        0.054         2.1  virginica     31
## 141          6.7         3.1        0.056         2.4  virginica     31
## 142          6.9         3.1        0.051         2.3  virginica     31
## 143          5.8         2.7        0.051         1.9  virginica     27
## 144          6.8         3.2        0.059         2.3  virginica     32
## 145          6.7         3.3        0.057         2.5  virginica     33
## 146          6.7         3.0        0.052         2.3  virginica     30
## 147          6.3         2.5        0.050         1.9  virginica     25
## 148          6.5         3.0        0.052         2.0  virginica     30
## 149          6.2         3.4        0.054         2.3  virginica     34
## 150          5.9         3.0        0.051         1.8  virginica     30</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-wrangling.html#cb27-1" tabindex="-1"></a><span class="co"># use mutate and ifelse to categorize the varible</span></span></code></pre></div>
<p><code>rep, sample</code><br />
In practice, you often need to test code before real study data are available. Simulated toy datasets are useful for prototyping pipelines, checking assumptions, and training new team members.</p>
<p>The following example creates a simple longitudinal dataset with three records per subject (<code>year = 0, 1, 2</code>). We also simulate a treatment assignment and a binary adverse event (<code>se_headache</code>).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data-wrangling.html#cb28-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb28-2"><a href="data-wrangling.html#cb28-2" tabindex="-1"></a></span>
<span id="cb28-3"><a href="data-wrangling.html#cb28-3" tabindex="-1"></a>drug_trial <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb28-4"><a href="data-wrangling.html#cb28-4" tabindex="-1"></a>  <span class="co">#  each id has three </span></span>
<span id="cb28-5"><a href="data-wrangling.html#cb28-5" tabindex="-1"></a>  <span class="at">id =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="at">each =</span> <span class="dv">3</span>),</span>
<span id="cb28-6"><a href="data-wrangling.html#cb28-6" tabindex="-1"></a>  <span class="co">#  all has 20</span></span>
<span id="cb28-7"><a href="data-wrangling.html#cb28-7" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">rep</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">times =</span> <span class="dv">20</span>),</span>
<span id="cb28-8"><a href="data-wrangling.html#cb28-8" tabindex="-1"></a>  <span class="co"># sample 20 and each repeat 3  </span></span>
<span id="cb28-9"><a href="data-wrangling.html#cb28-9" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">sample</span>(<span class="dv">35</span><span class="sc">:</span><span class="dv">75</span>, <span class="dv">20</span>, <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">rep</span>(<span class="at">each =</span> <span class="dv">3</span>),</span>
<span id="cb28-10"><a href="data-wrangling.html#cb28-10" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb28-11"><a href="data-wrangling.html#cb28-11" tabindex="-1"></a>  <span class="at">drug =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;Placebo&quot;</span>, <span class="st">&quot;Active&quot;</span>), <span class="dv">20</span>, <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-12"><a href="data-wrangling.html#cb28-12" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="at">each =</span> <span class="dv">3</span>),</span>
<span id="cb28-13"><a href="data-wrangling.html#cb28-13" tabindex="-1"></a>  <span class="co">#  </span></span>
<span id="cb28-14"><a href="data-wrangling.html#cb28-14" tabindex="-1"></a>  <span class="at">se_headache =</span> <span class="fu">if_else</span>(</span>
<span id="cb28-15"><a href="data-wrangling.html#cb28-15" tabindex="-1"></a>    drug <span class="sc">==</span> <span class="st">&quot;Placebo&quot;</span>, </span>
<span id="cb28-16"><a href="data-wrangling.html#cb28-16" tabindex="-1"></a>    <span class="co"># the possibility that outcome is 1</span></span>
<span id="cb28-17"><a href="data-wrangling.html#cb28-17" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">60</span>, <span class="cn">TRUE</span>, <span class="fu">c</span>(.<span class="dv">95</span>,.<span class="dv">05</span>)), </span>
<span id="cb28-18"><a href="data-wrangling.html#cb28-18" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">60</span>, <span class="cn">TRUE</span>, <span class="fu">c</span>(.<span class="dv">10</span>, .<span class="dv">90</span>))</span>
<span id="cb28-19"><a href="data-wrangling.html#cb28-19" tabindex="-1"></a>  )</span>
<span id="cb28-20"><a href="data-wrangling.html#cb28-20" tabindex="-1"></a>  <span class="co">#  </span></span>
<span id="cb28-21"><a href="data-wrangling.html#cb28-21" tabindex="-1"></a>)</span>
<span id="cb28-22"><a href="data-wrangling.html#cb28-22" tabindex="-1"></a><span class="fu">head</span>(drug_trial)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##      id  year   age drug   se_headache
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;        &lt;int&gt;
## 1     1     0    65 Active           0
## 2     1     1    65 Active           1
## 3     1     2    65 Active           1
## 4     2     0    49 Active           1
## 5     2     1    49 Active           0
## 6     2     2    49 Active           1</code></pre>
<p>A quick check with <code>head()</code> helps confirm the dataset structure and that variables were created as expected.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data-wrangling.html#cb30-1" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb30-2"><a href="data-wrangling.html#cb30-2" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="data-wrangling.html#cb30-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">complete =</span> <span class="fu">c</span>(<span class="dv">1</span>))</span></code></pre></div>
<pre><code>## # A tibble: 60 × 6
##       id  year   age drug    se_headache complete
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt;    &lt;dbl&gt;
##  1     1     0    65 Active            0        1
##  2     1     1    65 Active            1        1
##  3     1     2    65 Active            1        1
##  4     2     0    49 Active            1        1
##  5     2     1    49 Active            0        1
##  6     2     2    49 Active            1        1
##  7     3     0    48 Placebo           0        1
##  8     3     1    48 Placebo           0        1
##  9     3     2    48 Placebo           0        1
## 10     4     0    37 Placebo           0        1
## # ℹ 50 more rows</code></pre>
<p><code>factor is just for factor (labeling the value; while</code>rename<code>labeling the variable) and recode is for different types whose outcome depends on the right side of the equation sign. factor can change the reference group.</code><br />
This is an important concept in statistical work:<br />
- <code>rename()</code> changes the <em>variable name</em> (column name).<br />
- <code>factor()</code> changes the <em>data type</em> and attaches <em>value labels</em> to categories. Factors also have an ordering of levels, which can affect summaries and regression reference categories.<br />
- <code>recode()</code> maps old values to new values (useful for harmonizing coding across sources, or mapping numeric codes to analytic codes).</p>
<p>Below we (1) create labeled factors for the headache indicator, (2) create a reversed reference order to demonstrate how factor level order changes the reference group, and (3) create a recoded numeric variable.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data-wrangling.html#cb32-1" tabindex="-1"></a>drug_trial<span class="ot">=</span>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="data-wrangling.html#cb32-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mi_f =</span> <span class="fu">factor</span>(se_headache , <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>, <span class="st">&quot;Yes&quot;</span>)))<span class="sc">%&gt;%</span>  </span>
<span id="cb32-3"><a href="data-wrangling.html#cb32-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mi_f_reverse =</span> <span class="fu">factor</span>(se_headache , <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>), <span class="fu">c</span>(<span class="st">&quot;yes&quot;</span>, <span class="st">&quot;no&quot;</span>)))<span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="data-wrangling.html#cb32-4" tabindex="-1"></a>  <span class="co"># change the reference group by using factor</span></span>
<span id="cb32-5"><a href="data-wrangling.html#cb32-5" tabindex="-1"></a>  </span>
<span id="cb32-6"><a href="data-wrangling.html#cb32-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mi  =</span> <span class="fu">recode</span>(se_headache ,  <span class="st">&quot;0&quot;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&quot;1&quot;</span><span class="ot">=</span><span class="dv">1</span>))</span>
<span id="cb32-7"><a href="data-wrangling.html#cb32-7" tabindex="-1"></a></span>
<span id="cb32-8"><a href="data-wrangling.html#cb32-8" tabindex="-1"></a><span class="fu">str</span>(drug_trial)</span></code></pre></div>
<pre><code>## tibble [60 × 8] (S3: tbl_df/tbl/data.frame)
##  $ id          : int [1:60] 1 1 1 2 2 2 3 3 3 4 ...
##  $ year        : int [1:60] 0 1 2 0 1 2 0 1 2 0 ...
##  $ age         : int [1:60] 65 65 65 49 49 49 48 48 48 37 ...
##  $ drug        : chr [1:60] &quot;Active&quot; &quot;Active&quot; &quot;Active&quot; &quot;Active&quot; ...
##  $ se_headache : int [1:60] 0 1 1 1 0 1 0 0 0 0 ...
##  $ mi_f        : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 2 2 2 1 2 1 1 1 1 ...
##  $ mi_f_reverse: Factor w/ 2 levels &quot;yes&quot;,&quot;no&quot;: 2 1 1 1 2 1 2 2 2 2 ...
##  $ mi          : num [1:60] 2 1 1 1 2 1 2 2 2 2 ...</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data-wrangling.html#cb34-1" tabindex="-1"></a><span class="fu">table</span> (drug_trial<span class="sc">$</span>mi_f)</span></code></pre></div>
<pre><code>## 
##  No Yes 
##  40  20</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-wrangling.html#cb36-1" tabindex="-1"></a><span class="fu">table</span> (drug_trial<span class="sc">$</span>mi_f_reverse)</span></code></pre></div>
<pre><code>## 
## yes  no 
##  20  40</code></pre>
<p>Row-wise operations apply calculations to each row independently. This is helpful when you need to combine multiple columns within a row (e.g., “any adverse event occurred”, “max lab value within row”, etc.).<br />
However, for most group-level summaries (e.g., by subject), <code>group_by()</code> is usually more efficient and more common.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data-wrangling.html#cb38-1" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="data-wrangling.html#cb38-2" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="data-wrangling.html#cb38-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">any_se_year =</span> <span class="fu">sum</span>(se_headache, year) <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 60 × 9
## # Rowwise: 
##       id  year   age drug    se_headache mi_f  mi_f_reverse    mi any_se_year
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;        &lt;dbl&gt; &lt;lgl&gt;      
##  1     1     0    65 Active            0 No    no               2 FALSE      
##  2     1     1    65 Active            1 Yes   yes              1 TRUE       
##  3     1     2    65 Active            1 Yes   yes              1 TRUE       
##  4     2     0    49 Active            1 Yes   yes              1 TRUE       
##  5     2     1    49 Active            0 No    no               2 TRUE       
##  6     2     2    49 Active            1 Yes   yes              1 TRUE       
##  7     3     0    48 Placebo           0 No    no               2 FALSE      
##  8     3     1    48 Placebo           0 No    no               2 TRUE       
##  9     3     2    48 Placebo           0 No    no               2 TRUE       
## 10     4     0    37 Placebo           0 No    no               2 FALSE      
## # ℹ 50 more rows</code></pre>
<p><code>what is the difference of rowwise and group_by</code><br />
- <code>group_by(id)</code> means operations are performed within each subject group. This is typically used for subject-level summaries, longitudinal flags, and group totals.<br />
- <code>rowwise()</code> means operations are performed for each row. This is best when combining multiple variables across columns within the same row.</p>
<p>In the examples below, compare what happens when you compute <code>sum(se_headache, year)</code> under different grouping structures.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data-wrangling.html#cb40-1" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="data-wrangling.html#cb40-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">any_se_year =</span> <span class="fu">sum</span>(se_headache, year)  )</span></code></pre></div>
<pre><code>## # A tibble: 60 × 9
## # Groups:   id [20]
##       id  year   age drug    se_headache mi_f  mi_f_reverse    mi any_se_year
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;        &lt;dbl&gt;       &lt;int&gt;
##  1     1     0    65 Active            0 No    no               2           5
##  2     1     1    65 Active            1 Yes   yes              1           5
##  3     1     2    65 Active            1 Yes   yes              1           5
##  4     2     0    49 Active            1 Yes   yes              1           5
##  5     2     1    49 Active            0 No    no               2           5
##  6     2     2    49 Active            1 Yes   yes              1           5
##  7     3     0    48 Placebo           0 No    no               2           3
##  8     3     1    48 Placebo           0 No    no               2           3
##  9     3     2    48 Placebo           0 No    no               2           3
## 10     4     0    37 Placebo           0 No    no               2           3
## # ℹ 50 more rows</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data-wrangling.html#cb42-1" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="data-wrangling.html#cb42-2" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="data-wrangling.html#cb42-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">any_se_year =</span> <span class="fu">sum</span>(se_headache, year)  )</span></code></pre></div>
<pre><code>## # A tibble: 60 × 9
## # Rowwise: 
##       id  year   age drug    se_headache mi_f  mi_f_reverse    mi any_se_year
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;        &lt;dbl&gt;       &lt;int&gt;
##  1     1     0    65 Active            0 No    no               2           0
##  2     1     1    65 Active            1 Yes   yes              1           2
##  3     1     2    65 Active            1 Yes   yes              1           3
##  4     2     0    49 Active            1 Yes   yes              1           1
##  5     2     1    49 Active            0 No    no               2           1
##  6     2     2    49 Active            1 Yes   yes              1           3
##  7     3     0    48 Placebo           0 No    no               2           0
##  8     3     1    48 Placebo           0 No    no               2           1
##  9     3     2    48 Placebo           0 No    no               2           2
## 10     4     0    37 Placebo           0 No    no               2           0
## # ℹ 50 more rows</code></pre>
<p><code>starts_with and end_with</code><br />
Selector helpers such as <code>starts_with()</code> are useful when working with datasets that have many related variables with consistent naming patterns (e.g., adverse event indicators, lab variables, visit-level measurements).</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-wrangling.html#cb44-1" tabindex="-1"></a>drug_trial_sub <span class="ot">&lt;-</span> drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="data-wrangling.html#cb44-2" tabindex="-1"></a>  <span class="fu">select</span>(id, year, <span class="fu">starts_with</span>(<span class="st">&quot;se&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="data-wrangling.html#cb44-3" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 60 × 3
##       id  year se_headache
##    &lt;int&gt; &lt;int&gt;       &lt;int&gt;
##  1     1     0           0
##  2     1     1           1
##  3     1     2           1
##  4     2     0           1
##  5     2     1           0
##  6     2     2           1
##  7     3     0           0
##  8     3     1           0
##  9     3     2           0
## 10     4     0           0
## # ℹ 50 more rows</code></pre>
<p><code>keep all combination levels even 0 times</code><br />
When summarizing counts for categorical combinations, you sometimes want to display categories even if the count is zero. This is particularly important in reporting (e.g., safety tables, disposition tables).<br />
Here, <code>.drop = FALSE</code> keeps all factor combinations in the grouped output.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-wrangling.html#cb46-1" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="data-wrangling.html#cb46-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="data-wrangling.html#cb46-3" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&lt;</span> <span class="dv">65</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-4"><a href="data-wrangling.html#cb46-4" tabindex="-1"></a>  <span class="fu">group_by</span>(drug, se_headache, <span class="at">.drop =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-5"><a href="data-wrangling.html#cb46-5" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;drug&#39;. You can
## override using the `.groups` argument.</code></pre>
<pre><code>## # A tibble: 3 × 3
## # Groups:   drug [2]
##   drug    se_headache     n
##   &lt;chr&gt;         &lt;int&gt; &lt;int&gt;
## 1 Active            1     5
## 2 Placebo           0    11
## 3 Placebo           1     1</code></pre>
<p><code>group_by</code><br />
A very common pattern is: filter to the analytic dataset, group by a key variable (e.g., treatment), then summarize.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-wrangling.html#cb49-1" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href="data-wrangling.html#cb49-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(age)) <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href="data-wrangling.html#cb49-3" tabindex="-1"></a>  <span class="fu">group_by</span>(drug) <span class="sc">%&gt;%</span> </span>
<span id="cb49-4"><a href="data-wrangling.html#cb49-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_age =</span> <span class="fu">mean</span>(age))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
##   drug    mean_age
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 Active      54.7
## 2 Placebo     53.2</code></pre>
</div>
<div id="working-with-pipes" class="section level3 hasAnchor" number="1.1.7">
<h3><span class="header-section-number">1.1.7</span> Working with pipes %&gt;%<a href="data-wrangling.html#working-with-pipes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The pipe operator <code>%&gt;%</code> is used to chain steps in a readable sequence. This style matches how we typically describe data processing: “filter, then transform, then select, then sort.”<br />
In practice, pipes help build reproducible and auditable wrangling pipelines.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-wrangling.html#cb51-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href="data-wrangling.html#cb51-2" tabindex="-1"></a>  <span class="fu">filter</span>(Species<span class="sc">==</span><span class="st">&quot;setosa&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="data-wrangling.html#cb51-3" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">newvar=</span>Sepal.Width<span class="sc">*</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb51-4"><a href="data-wrangling.html#cb51-4" tabindex="-1"></a>  <span class="fu">select</span> (<span class="sc">-</span>Sepal.Width, <span class="sc">-</span>Petal.Width) <span class="sc">%&gt;%</span> </span>
<span id="cb51-5"><a href="data-wrangling.html#cb51-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>Sepal.Length, newvar)</span></code></pre></div>
<pre><code>##    Sepal.Length Petal.Length Species newvar
## 1           5.8          1.2  setosa     40
## 2           5.7          1.7  setosa     38
## 3           5.7          1.5  setosa     44
## 4           5.5          1.3  setosa     35
## 5           5.5          1.4  setosa     42
## 6           5.4          1.7  setosa     34
## 7           5.4          1.5  setosa     34
## 8           5.4          1.5  setosa     37
## 9           5.4          1.7  setosa     39
## 10          5.4          1.3  setosa     39
## 11          5.3          1.5  setosa     37
## 12          5.2          1.4  setosa     34
## 13          5.2          1.5  setosa     35
## 14          5.2          1.5  setosa     41
## 15          5.1          1.7  setosa     33
## 16          5.1          1.5  setosa     34
## 17          5.1          1.4  setosa     35
## 18          5.1          1.4  setosa     35
## 19          5.1          1.5  setosa     37
## 20          5.1          1.5  setosa     38
## 21          5.1          1.9  setosa     38
## 22          5.1          1.6  setosa     38
## 23          5.0          1.6  setosa     30
## 24          5.0          1.2  setosa     32
## 25          5.0          1.4  setosa     33
## 26          5.0          1.5  setosa     34
## 27          5.0          1.6  setosa     34
## 28          5.0          1.3  setosa     35
## 29          5.0          1.6  setosa     35
## 30          5.0          1.4  setosa     36
## 31          4.9          1.4  setosa     30
## 32          4.9          1.5  setosa     31
## 33          4.9          1.5  setosa     31
## 34          4.9          1.4  setosa     36
## 35          4.8          1.4  setosa     30
## 36          4.8          1.4  setosa     30
## 37          4.8          1.6  setosa     31
## 38          4.8          1.6  setosa     34
## 39          4.8          1.9  setosa     34
## 40          4.7          1.3  setosa     32
## 41          4.7          1.6  setosa     32
## 42          4.6          1.5  setosa     31
## 43          4.6          1.4  setosa     32
## 44          4.6          1.4  setosa     34
## 45          4.6          1.0  setosa     36
## 46          4.5          1.3  setosa     23
## 47          4.4          1.4  setosa     29
## 48          4.4          1.3  setosa     30
## 49          4.4          1.3  setosa     32
## 50          4.3          1.1  setosa     30</code></pre>
</div>
<div id="pivot-wider-long-to-wide" class="section level3 hasAnchor" number="1.1.8">
<h3><span class="header-section-number">1.1.8</span> Pivot wider (long to wide)<a href="data-wrangling.html#pivot-wider-long-to-wide" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Reshaping data is common in longitudinal analysis and reporting.<br />
- Long format (one row per subject-visit) is common for modeling and plotting.<br />
- Wide format (one row per subject, with multiple columns for repeated measures) is sometimes required for specific reporting formats or certain algorithms.</p>
<ul>
<li>If no unique identifier row in each group <strong>doesn’t work</strong><br />
Pivoting wider requires a unique key for each output row. If the key is not unique, values can collide and pivoting may fail or require aggregation.</li>
</ul>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-wrangling.html#cb53-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb53-2"><a href="data-wrangling.html#cb53-2" tabindex="-1"></a><span class="fu">pivot_wider</span>(  <span class="at">names_from=</span>Species, <span class="at">values_from=</span> <span class="fu">c</span>(Sepal.Length))</span></code></pre></div>
<pre><code>## Warning: Values from `Sepal.Length` are not uniquely
## identified; output will contain list-cols.
## • Use `values_fn = list` to suppress this warning.
## • Use `values_fn = {summary_fun}` to summarise
##   duplicates.
## • Use the following dplyr code to identify duplicates.
##   {data} |&gt;
##   dplyr::summarise(n = dplyr::n(), .by =
##   c(Sepal.Width, Petal.Length, Petal.Width, Species))
##   |&gt;
##   dplyr::filter(n &gt; 1L)</code></pre>
<pre><code>## # A tibble: 143 × 6
##    Sepal.Width Petal.Length Petal.Width setosa    versicolor virginica
##          &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;list&gt;    &lt;list&gt;     &lt;list&gt;   
##  1         3.5          1.4         0.2 &lt;dbl [1]&gt; &lt;NULL&gt;     &lt;NULL&gt;   
##  2         3            1.4         0.2 &lt;dbl [1]&gt; &lt;NULL&gt;     &lt;NULL&gt;   
##  3         3.2          1.3         0.2 &lt;dbl [2]&gt; &lt;NULL&gt;     &lt;NULL&gt;   
##  4         3.1          1.5         0.2 &lt;dbl [2]&gt; &lt;NULL&gt;     &lt;NULL&gt;   
##  5         3.6          1.4         0.2 &lt;dbl [1]&gt; &lt;NULL&gt;     &lt;NULL&gt;   
##  6         3.9          1.7         0.4 &lt;dbl [1]&gt; &lt;NULL&gt;     &lt;NULL&gt;   
##  7         3.4          1.4         0.3 &lt;dbl [1]&gt; &lt;NULL&gt;     &lt;NULL&gt;   
##  8         3.4          1.5         0.2 &lt;dbl [2]&gt; &lt;NULL&gt;     &lt;NULL&gt;   
##  9         2.9          1.4         0.2 &lt;dbl [1]&gt; &lt;NULL&gt;     &lt;NULL&gt;   
## 10         3.1          1.5         0.1 &lt;dbl [1]&gt; &lt;NULL&gt;     &lt;NULL&gt;   
## # ℹ 133 more rows</code></pre>
<ul>
<li>Create a unique identifier row for each name and then use pivot_wider<br />
Here we create a row number within each <code>Species</code> group, which becomes part of the unique key.</li>
</ul>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data-wrangling.html#cb56-1" tabindex="-1"></a>widedata <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="data-wrangling.html#cb56-2" tabindex="-1"></a>  <span class="co"># create groups then assign unique identifier row number in each group</span></span>
<span id="cb56-3"><a href="data-wrangling.html#cb56-3" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb56-4"><a href="data-wrangling.html#cb56-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">row =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb56-5"><a href="data-wrangling.html#cb56-5" tabindex="-1"></a><span class="fu">pivot_wider</span>(<span class="at">names_from=</span>Species, <span class="at">values_from=</span> <span class="fu">c</span>(Petal.Length,Sepal.Length,Petal.Width,Sepal.Width))</span>
<span id="cb56-6"><a href="data-wrangling.html#cb56-6" tabindex="-1"></a>widedata</span></code></pre></div>
<pre><code>## # A tibble: 50 × 13
##      row Petal.Length_setosa Petal.Length_versicolor Petal.Length_virginica
##    &lt;int&gt;               &lt;dbl&gt;                   &lt;dbl&gt;                  &lt;dbl&gt;
##  1     1                 1.4                     4.7                    6  
##  2     2                 1.4                     4.5                    5.1
##  3     3                 1.3                     4.9                    5.9
##  4     4                 1.5                     4                      5.6
##  5     5                 1.4                     4.6                    5.8
##  6     6                 1.7                     4.5                    6.6
##  7     7                 1.4                     4.7                    4.5
##  8     8                 1.5                     3.3                    6.3
##  9     9                 1.4                     4.6                    5.8
## 10    10                 1.5                     3.9                    6.1
## # ℹ 40 more rows
## # ℹ 9 more variables: Sepal.Length_setosa &lt;dbl&gt;, Sepal.Length_versicolor &lt;dbl&gt;,
## #   Sepal.Length_virginica &lt;dbl&gt;, Petal.Width_setosa &lt;dbl&gt;,
## #   Petal.Width_versicolor &lt;dbl&gt;, Petal.Width_virginica &lt;dbl&gt;,
## #   Sepal.Width_setosa &lt;dbl&gt;, Sepal.Width_versicolor &lt;dbl&gt;,
## #   Sepal.Width_virginica &lt;dbl&gt;</code></pre>
<p>This is a smaller example, pivoting only a subset of variables.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data-wrangling.html#cb58-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="data-wrangling.html#cb58-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="data-wrangling.html#cb58-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">row =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="data-wrangling.html#cb58-4" tabindex="-1"></a><span class="fu">pivot_wider</span>( <span class="at">names_from=</span>Species, <span class="at">values_from=</span> <span class="fu">c</span>(Petal.Length, Petal.Width))</span></code></pre></div>
<pre><code>## # A tibble: 150 × 9
##    Sepal.Length Sepal.Width   row Petal.Length_setosa Petal.Length_versicolor
##           &lt;dbl&gt;       &lt;dbl&gt; &lt;int&gt;               &lt;dbl&gt;                   &lt;dbl&gt;
##  1          5.1         3.5     1                 1.4                      NA
##  2          4.9         3       2                 1.4                      NA
##  3          4.7         3.2     3                 1.3                      NA
##  4          4.6         3.1     4                 1.5                      NA
##  5          5           3.6     5                 1.4                      NA
##  6          5.4         3.9     6                 1.7                      NA
##  7          4.6         3.4     7                 1.4                      NA
##  8          5           3.4     8                 1.5                      NA
##  9          4.4         2.9     9                 1.4                      NA
## 10          4.9         3.1    10                 1.5                      NA
## # ℹ 140 more rows
## # ℹ 4 more variables: Petal.Length_virginica &lt;dbl&gt;, Petal.Width_setosa &lt;dbl&gt;,
## #   Petal.Width_versicolor &lt;dbl&gt;, Petal.Width_virginica &lt;dbl&gt;</code></pre>
</div>
<div id="pivot-longer-wide-to-long" class="section level3 hasAnchor" number="1.1.9">
<h3><span class="header-section-number">1.1.9</span> Pivot longer (wide to long)<a href="data-wrangling.html#pivot-longer-wide-to-long" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>why long format? there are many analytic techniques that require our data to be in this format, like plotting.<br />
In clinical trial and observational research, long format is often the default because it supports:<br />
- longitudinal models (e.g., MMRM, mixed models)<br />
- visit-based summaries<br />
- plotting repeated measures over time<br />
- tidy workflows where “one observation per row” is preferred</p>
<p>The next example converts selected wide columns into a long structure.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data-wrangling.html#cb60-1" tabindex="-1"></a>longdata <span class="ot">=</span> <span class="fu">pivot_longer</span>(widedata, <span class="sc">-</span></span>
<span id="cb60-2"><a href="data-wrangling.html#cb60-2" tabindex="-1"></a>                          <span class="fu">c</span>(  <span class="st">&quot;row&quot;</span>   ,                  <span class="st">&quot;Petal.Length_setosa&quot;</span> ,    <span class="st">&quot;Petal.Length_versicolor&quot;</span>,</span>
<span id="cb60-3"><a href="data-wrangling.html#cb60-3" tabindex="-1"></a>  <span class="st">&quot;Petal.Length_virginica&quot;</span>,  <span class="st">&quot;Sepal.Length_setosa&quot;</span>  ,   <span class="st">&quot;Sepal.Length_versicolor&quot;</span>,</span>
<span id="cb60-4"><a href="data-wrangling.html#cb60-4" tabindex="-1"></a>  <span class="st">&quot;Sepal.Length_virginica&quot;</span> , <span class="st">&quot;Petal.Width_setosa&quot;</span>    ,  <span class="st">&quot;Petal.Width_versicolor&quot;</span> ,</span>
<span id="cb60-5"><a href="data-wrangling.html#cb60-5" tabindex="-1"></a>  <span class="st">&quot;Petal.Width_virginica&quot;</span>    )        , <span class="at">names_to=</span><span class="st">&quot;Sepal.Width&quot;</span>, <span class="at">values_to=</span><span class="st">&quot;Sepal.Width.value&quot;</span>)</span>
<span id="cb60-6"><a href="data-wrangling.html#cb60-6" tabindex="-1"></a>longdata</span></code></pre></div>
<pre><code>## # A tibble: 150 × 12
##      row Petal.Length_setosa Petal.Length_versicolor Petal.Length_virginica
##    &lt;int&gt;               &lt;dbl&gt;                   &lt;dbl&gt;                  &lt;dbl&gt;
##  1     1                 1.4                     4.7                    6  
##  2     1                 1.4                     4.7                    6  
##  3     1                 1.4                     4.7                    6  
##  4     2                 1.4                     4.5                    5.1
##  5     2                 1.4                     4.5                    5.1
##  6     2                 1.4                     4.5                    5.1
##  7     3                 1.3                     4.9                    5.9
##  8     3                 1.3                     4.9                    5.9
##  9     3                 1.3                     4.9                    5.9
## 10     4                 1.5                     4                      5.6
## # ℹ 140 more rows
## # ℹ 8 more variables: Sepal.Length_setosa &lt;dbl&gt;, Sepal.Length_versicolor &lt;dbl&gt;,
## #   Sepal.Length_virginica &lt;dbl&gt;, Petal.Width_setosa &lt;dbl&gt;,
## #   Petal.Width_versicolor &lt;dbl&gt;, Petal.Width_virginica &lt;dbl&gt;,
## #   Sepal.Width &lt;chr&gt;, Sepal.Width.value &lt;dbl&gt;</code></pre>
<p>The following <code>babies</code> dataset is a simple example of repeated measurements stored in wide format (e.g., <code>weight_3</code>, <code>weight_6</code>). This naming pattern is common in real datasets: variable name + underscore + timepoint.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="data-wrangling.html#cb62-1" tabindex="-1"></a>babies <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb62-2"><a href="data-wrangling.html#cb62-2" tabindex="-1"></a>  <span class="at">id       =</span> <span class="dv">1001</span><span class="sc">:</span><span class="dv">1008</span>,</span>
<span id="cb62-3"><a href="data-wrangling.html#cb62-3" tabindex="-1"></a>  <span class="at">sex      =</span> <span class="fu">c</span>(<span class="st">&quot;F&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>),</span>
<span id="cb62-4"><a href="data-wrangling.html#cb62-4" tabindex="-1"></a>  <span class="at">weight_3  =</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">17</span>, <span class="dv">16</span>, <span class="dv">11</span>, <span class="dv">17</span>, <span class="dv">16</span>, <span class="dv">15</span>),</span>
<span id="cb62-5"><a href="data-wrangling.html#cb62-5" tabindex="-1"></a>  <span class="at">weight_6  =</span> <span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">16</span>, <span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">17</span>, <span class="dv">16</span>),</span>
<span id="cb62-6"><a href="data-wrangling.html#cb62-6" tabindex="-1"></a>  <span class="at">weight_9  =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">23</span>, <span class="dv">21</span>, <span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">19</span>, <span class="dv">18</span>),</span>
<span id="cb62-7"><a href="data-wrangling.html#cb62-7" tabindex="-1"></a>  <span class="at">weight_12 =</span> <span class="fu">c</span>(<span class="dv">17</span>, <span class="dv">20</span>, <span class="dv">24</span>, <span class="dv">22</span>, <span class="dv">18</span>, <span class="dv">26</span>, <span class="dv">21</span>, <span class="dv">19</span>)</span>
<span id="cb62-8"><a href="data-wrangling.html#cb62-8" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-9"><a href="data-wrangling.html#cb62-9" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 8 × 6
##      id sex   weight_3 weight_6 weight_9 weight_12
##   &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1  1001 F            9       13       16        17
## 2  1002 F           11       16       17        20
## 3  1003 M           17       20       23        24
## 4  1004 F           16       18       21        22
## 5  1005 M           11       15       16        18
## 6  1006 M           17       21       25        26
## 7  1007 M           16       17       19        21
## 8  1008 F           15       16       18        19</code></pre>
<p><code>select which cols</code><br />
<code>pivot_longer()</code> converts multiple columns into key-value pairs. Here, we reshape all columns that start with <code>"weight"</code>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="data-wrangling.html#cb64-1" tabindex="-1"></a>babies <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="data-wrangling.html#cb64-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb64-3"><a href="data-wrangling.html#cb64-3" tabindex="-1"></a>    <span class="at">cols         =</span> <span class="fu">starts_with</span>(<span class="st">&quot;weight&quot;</span>),  <span class="co">#which cols</span></span>
<span id="cb64-4"><a href="data-wrangling.html#cb64-4" tabindex="-1"></a>    <span class="at">names_to     =</span> <span class="st">&quot;months&quot;</span>,</span>
<span id="cb64-5"><a href="data-wrangling.html#cb64-5" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">&quot;weight_&quot;</span>,  <span class="co">#remove prefix </span></span>
<span id="cb64-6"><a href="data-wrangling.html#cb64-6" tabindex="-1"></a>    <span class="at">values_to    =</span> <span class="st">&quot;weight&quot;</span></span>
<span id="cb64-7"><a href="data-wrangling.html#cb64-7" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 32 × 4
##       id sex   months weight
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;
##  1  1001 F     3           9
##  2  1001 F     6          13
##  3  1001 F     9          16
##  4  1001 F     12         17
##  5  1002 F     3          11
##  6  1002 F     6          16
##  7  1002 F     9          17
##  8  1002 F     12         20
##  9  1003 M     3          17
## 10  1003 M     6          20
## # ℹ 22 more rows</code></pre>
<p><code>using names_prefix argument</code><br />
<code>names_prefix</code> removes a fixed prefix from the variable names. This is useful to keep only the meaningful portion (e.g., the timepoint).</p>
<p>“it is a regular expression used to remove matching text from the start of each variable name.”</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data-wrangling.html#cb66-1" tabindex="-1"></a>babies <span class="sc">%&gt;%</span> </span>
<span id="cb66-2"><a href="data-wrangling.html#cb66-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb66-3"><a href="data-wrangling.html#cb66-3" tabindex="-1"></a>    <span class="at">cols         =</span> <span class="fu">starts_with</span>(<span class="st">&quot;weight&quot;</span>),</span>
<span id="cb66-4"><a href="data-wrangling.html#cb66-4" tabindex="-1"></a>    <span class="at">names_to     =</span> <span class="st">&quot;months&quot;</span>,</span>
<span id="cb66-5"><a href="data-wrangling.html#cb66-5" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">w+_&quot;</span></span>
<span id="cb66-6"><a href="data-wrangling.html#cb66-6" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 32 × 4
##       id sex   months value
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
##  1  1001 F     3          9
##  2  1001 F     6         13
##  3  1001 F     9         16
##  4  1001 F     12        17
##  5  1002 F     3         11
##  6  1002 F     6         16
##  7  1002 F     9         17
##  8  1002 F     12        20
##  9  1003 M     3         17
## 10  1003 M     6         20
## # ℹ 22 more rows</code></pre>
<p><code>using default argument</code><br />
If you do not specify <code>names_to</code> or <code>values_to</code>, <code>pivot_longer()</code> uses defaults. This is convenient for quick exploration, but in practice you usually want explicit names for clarity.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-wrangling.html#cb68-1" tabindex="-1"></a>babies <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="data-wrangling.html#cb68-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb68-3"><a href="data-wrangling.html#cb68-3" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;weight&quot;</span>)</span>
<span id="cb68-4"><a href="data-wrangling.html#cb68-4" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 32 × 4
##       id sex   name      value
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
##  1  1001 F     weight_3      9
##  2  1001 F     weight_6     13
##  3  1001 F     weight_9     16
##  4  1001 F     weight_12    17
##  5  1002 F     weight_3     11
##  6  1002 F     weight_6     16
##  7  1002 F     weight_9     17
##  8  1002 F     weight_12    20
##  9  1003 M     weight_3     17
## 10  1003 M     weight_6     20
## # ℹ 22 more rows</code></pre>
<p>This extended example includes both weight and length measured at multiple timepoints. We will demonstrate how to reshape multiple measurement types in one step.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data-wrangling.html#cb70-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb70-2"><a href="data-wrangling.html#cb70-2" tabindex="-1"></a>babies <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb70-3"><a href="data-wrangling.html#cb70-3" tabindex="-1"></a>  <span class="at">id       =</span> <span class="dv">1001</span><span class="sc">:</span><span class="dv">1008</span>,</span>
<span id="cb70-4"><a href="data-wrangling.html#cb70-4" tabindex="-1"></a>  <span class="at">sex      =</span> <span class="fu">c</span>(<span class="st">&quot;F&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>),</span>
<span id="cb70-5"><a href="data-wrangling.html#cb70-5" tabindex="-1"></a>  <span class="at">weight_3  =</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">17</span>, <span class="dv">16</span>, <span class="dv">11</span>, <span class="dv">17</span>, <span class="dv">16</span>, <span class="dv">15</span>),</span>
<span id="cb70-6"><a href="data-wrangling.html#cb70-6" tabindex="-1"></a>  <span class="at">weight_6  =</span> <span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">16</span>, <span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">17</span>, <span class="dv">16</span>),</span>
<span id="cb70-7"><a href="data-wrangling.html#cb70-7" tabindex="-1"></a>  <span class="at">weight_9  =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">23</span>, <span class="dv">21</span>, <span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">19</span>, <span class="dv">18</span>),</span>
<span id="cb70-8"><a href="data-wrangling.html#cb70-8" tabindex="-1"></a>  <span class="at">weight_12 =</span> <span class="fu">c</span>(<span class="dv">17</span>, <span class="dv">20</span>, <span class="dv">24</span>, <span class="dv">22</span>, <span class="dv">18</span>, <span class="dv">26</span>, <span class="dv">21</span>, <span class="dv">19</span>),</span>
<span id="cb70-9"><a href="data-wrangling.html#cb70-9" tabindex="-1"></a>  <span class="at">length_3  =</span> <span class="fu">c</span>(<span class="dv">17</span>, <span class="dv">19</span>, <span class="dv">23</span>, <span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">22</span>, <span class="dv">21</span>, <span class="dv">18</span>),</span>
<span id="cb70-10"><a href="data-wrangling.html#cb70-10" tabindex="-1"></a>  <span class="at">length_6  =</span> <span class="fu">round</span>(length_3 <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">1</span>)),</span>
<span id="cb70-11"><a href="data-wrangling.html#cb70-11" tabindex="-1"></a>  <span class="at">length_9  =</span> <span class="fu">round</span>(length_6 <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">1</span>)),</span>
<span id="cb70-12"><a href="data-wrangling.html#cb70-12" tabindex="-1"></a>  <span class="at">length_12 =</span> <span class="fu">round</span>(length_9 <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">1</span>)),</span>
<span id="cb70-13"><a href="data-wrangling.html#cb70-13" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-14"><a href="data-wrangling.html#cb70-14" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 8 × 10
##      id sex   weight_3 weight_6 weight_9 weight_12 length_3 length_6 length_9
##   &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1  1001 F            9       13       16        17       17       18       19
## 2  1002 F           11       16       17        20       19       21       23
## 3  1003 M           17       20       23        24       23       27       30
## 4  1004 F           16       18       21        22       20       22       24
## 5  1005 M           11       15       16        18       18       20       22
## 6  1006 M           17       21       25        26       22       26       28
## 7  1007 M           16       17       19        21       21       23       24
## 8  1008 F           15       16       18        19       18       19       23
## # ℹ 1 more variable: length_12 &lt;dbl&gt;</code></pre>
<ul>
<li>pivoting multiple sets of cols<br />
When variable names contain multiple components (e.g., <code>weight_3</code>), you can split them into separate columns using <code>names_sep</code>.<br />
Using <code>.value</code> is a powerful technique: it tells <code>pivot_longer()</code> to create a separate output column for each measurement type (e.g., weight and length).<br />
This format is especially helpful for longitudinal plotting and modeling where you want one row per subject-month.</li>
</ul>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data-wrangling.html#cb72-1" tabindex="-1"></a>babies <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="data-wrangling.html#cb72-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb72-3"><a href="data-wrangling.html#cb72-3" tabindex="-1"></a>    <span class="at">cols      =</span> <span class="fu">c</span>(<span class="sc">-</span>id, <span class="sc">-</span>sex),</span>
<span id="cb72-4"><a href="data-wrangling.html#cb72-4" tabindex="-1"></a>    <span class="at">names_to  =</span> <span class="fu">c</span>(<span class="st">&quot;.value&quot;</span>, <span class="st">&quot;months&quot;</span>),</span>
<span id="cb72-5"><a href="data-wrangling.html#cb72-5" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb72-6"><a href="data-wrangling.html#cb72-6" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 32 × 5
##       id sex   months weight length
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;
##  1  1001 F     3           9     17
##  2  1001 F     6          13     18
##  3  1001 F     9          16     19
##  4  1001 F     12         17     21
##  5  1002 F     3          11     19
##  6  1002 F     6          16     21
##  7  1002 F     9          17     23
##  8  1002 F     12         20     23
##  9  1003 M     3          17     23
## 10  1003 M     6          20     27
## # ℹ 22 more rows</code></pre>
<p>This alternative example reshapes into a simpler long format with one value column. This is useful when you want a single measurement (e.g., weight only).</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data-wrangling.html#cb74-1" tabindex="-1"></a>babies <span class="sc">%&gt;%</span> </span>
<span id="cb74-2"><a href="data-wrangling.html#cb74-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb74-3"><a href="data-wrangling.html#cb74-3" tabindex="-1"></a>    <span class="at">cols      =</span> <span class="fu">c</span>(<span class="sc">-</span>id, <span class="sc">-</span>sex),</span>
<span id="cb74-4"><a href="data-wrangling.html#cb74-4" tabindex="-1"></a>    <span class="at">names_to  =</span> <span class="st">&quot;months&quot;</span>,</span>
<span id="cb74-5"><a href="data-wrangling.html#cb74-5" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;weight&quot;</span></span>
<span id="cb74-6"><a href="data-wrangling.html#cb74-6" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb74-7"><a href="data-wrangling.html#cb74-7" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 64 × 4
##       id sex   months    weight
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;
##  1  1001 F     weight_3       9
##  2  1001 F     weight_6      13
##  3  1001 F     weight_9      16
##  4  1001 F     weight_12     17
##  5  1001 F     length_3      17
##  6  1001 F     length_6      18
##  7  1001 F     length_9      19
##  8  1001 F     length_12     21
##  9  1002 F     weight_3      11
## 10  1002 F     weight_6      16
## # ℹ 54 more rows</code></pre>
<p><code>using names_sep and .value argument</code><br />
Here we keep both parts of the name as separate columns: <code>measure</code> and <code>months</code>. This creates a “tidy” dataset with one value column and a measure identifier.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="data-wrangling.html#cb76-1" tabindex="-1"></a>babies <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="data-wrangling.html#cb76-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb76-3"><a href="data-wrangling.html#cb76-3" tabindex="-1"></a>    <span class="at">cols      =</span> <span class="fu">c</span>(<span class="sc">-</span>id, <span class="sc">-</span>sex),</span>
<span id="cb76-4"><a href="data-wrangling.html#cb76-4" tabindex="-1"></a>    <span class="at">names_to  =</span> <span class="fu">c</span>(<span class="st">&quot;measure&quot;</span>, <span class="st">&quot;months&quot;</span>),</span>
<span id="cb76-5"><a href="data-wrangling.html#cb76-5" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb76-6"><a href="data-wrangling.html#cb76-6" tabindex="-1"></a>  ) </span></code></pre></div>
<pre><code>## # A tibble: 64 × 5
##       id sex   measure months value
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;
##  1  1001 F     weight  3          9
##  2  1001 F     weight  6         13
##  3  1001 F     weight  9         16
##  4  1001 F     weight  12        17
##  5  1001 F     length  3         17
##  6  1001 F     length  6         18
##  7  1001 F     length  9         19
##  8  1001 F     length  12        21
##  9  1002 F     weight  3         11
## 10  1002 F     weight  6         16
## # ℹ 54 more rows</code></pre>
<p><code>.value tells pivot_longer() to create a new column for each unique character string that is in front of the underscore</code><br />
This is often the most practical output when you have multiple repeated-measure variables collected at the same timepoints.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="data-wrangling.html#cb78-1" tabindex="-1"></a>babies <span class="sc">%&gt;%</span> </span>
<span id="cb78-2"><a href="data-wrangling.html#cb78-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb78-3"><a href="data-wrangling.html#cb78-3" tabindex="-1"></a>    <span class="at">cols      =</span> <span class="fu">c</span>(<span class="sc">-</span>id, <span class="sc">-</span>sex),</span>
<span id="cb78-4"><a href="data-wrangling.html#cb78-4" tabindex="-1"></a>    <span class="at">names_to  =</span> <span class="fu">c</span>( <span class="st">&quot;.value&quot;</span>,<span class="st">&quot;months&quot;</span> ), </span>
<span id="cb78-5"><a href="data-wrangling.html#cb78-5" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb78-6"><a href="data-wrangling.html#cb78-6" tabindex="-1"></a>  )  </span></code></pre></div>
<pre><code>## # A tibble: 32 × 5
##       id sex   months weight length
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;
##  1  1001 F     3           9     17
##  2  1001 F     6          13     18
##  3  1001 F     9          16     19
##  4  1001 F     12         17     21
##  5  1002 F     3          11     19
##  6  1002 F     6          16     21
##  7  1002 F     9          17     23
##  8  1002 F     12         20     23
##  9  1003 M     3          17     23
## 10  1003 M     6          20     27
## # ℹ 22 more rows</code></pre>
<p>Swapping the order changes the interpretation of the split name pieces. This example is mainly to show that the mapping is positional.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="data-wrangling.html#cb80-1" tabindex="-1"></a>babies <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="data-wrangling.html#cb80-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb80-3"><a href="data-wrangling.html#cb80-3" tabindex="-1"></a>    <span class="at">cols      =</span> <span class="fu">c</span>(<span class="sc">-</span>id, <span class="sc">-</span>sex),</span>
<span id="cb80-4"><a href="data-wrangling.html#cb80-4" tabindex="-1"></a>    <span class="at">names_to  =</span> <span class="fu">c</span>( <span class="st">&quot;months&quot;</span>, <span class="st">&quot;.value&quot;</span>),</span>
<span id="cb80-5"><a href="data-wrangling.html#cb80-5" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb80-6"><a href="data-wrangling.html#cb80-6" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 16 × 7
##       id sex   months   `3`   `6`   `9`  `12`
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  1001 F     weight     9    13    16    17
##  2  1001 F     length    17    18    19    21
##  3  1002 F     weight    11    16    17    20
##  4  1002 F     length    19    21    23    23
##  5  1003 M     weight    17    20    23    24
##  6  1003 M     length    23    27    30    33
##  7  1004 F     weight    16    18    21    22
##  8  1004 F     length    20    22    24    26
##  9  1005 M     weight    11    15    16    18
## 10  1005 M     length    18    20    22    23
## 11  1006 M     weight    17    21    25    26
## 12  1006 M     length    22    26    28    30
## 13  1007 M     weight    16    17    19    21
## 14  1007 M     length    21    23    24    25
## 15  1008 F     weight    15    16    18    19
## 16  1008 F     length    18    19    23    24</code></pre>
<ul>
<li>Pivot wider again (long to wide)<br />
After processing data in long format (e.g., computing summaries by month), you may want to convert back to wide format for reporting.</li>
</ul>
<p><code>pivoting to multiple sets of cols</code><br />
This demonstrates a common workflow: wide → long (for analysis) → wide (for reporting).</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="data-wrangling.html#cb82-1" tabindex="-1"></a>babies <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="data-wrangling.html#cb82-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb82-3"><a href="data-wrangling.html#cb82-3" tabindex="-1"></a>    <span class="at">cols      =</span> <span class="fu">c</span>(<span class="sc">-</span>id, <span class="sc">-</span>sex),</span>
<span id="cb82-4"><a href="data-wrangling.html#cb82-4" tabindex="-1"></a>    <span class="at">names_to  =</span> <span class="fu">c</span>( <span class="st">&quot;.value&quot;</span>,<span class="st">&quot;months&quot;</span> ), </span>
<span id="cb82-5"><a href="data-wrangling.html#cb82-5" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb82-6"><a href="data-wrangling.html#cb82-6" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb82-7"><a href="data-wrangling.html#cb82-7" tabindex="-1"></a>  <span class="fu">pivot_wider</span>( <span class="at">names_from=</span>months, <span class="at">values_from=</span> <span class="fu">c</span>(weight, length ))</span></code></pre></div>
<pre><code>## # A tibble: 8 × 10
##      id sex   weight_3 weight_6 weight_9 weight_12 length_3 length_6 length_9
##   &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1  1001 F            9       13       16        17       17       18       19
## 2  1002 F           11       16       17        20       19       21       23
## 3  1003 M           17       20       23        24       23       27       30
## 4  1004 F           16       18       21        22       20       22       24
## 5  1005 M           11       15       16        18       18       20       22
## 6  1006 M           17       21       25        26       22       26       28
## 7  1007 M           16       17       19        21       21       23       24
## 8  1008 F           15       16       18        19       18       19       23
## # ℹ 1 more variable: length_12 &lt;dbl&gt;</code></pre>
<p>This example pivots the previously created <code>longdata</code> object back to wide.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="data-wrangling.html#cb84-1" tabindex="-1"></a><span class="fu">pivot_wider</span>(longdata, <span class="at">names_from=</span>Sepal.Width, <span class="at">values_from=</span> <span class="fu">c</span>(Sepal.Width.value))</span></code></pre></div>
<pre><code>## # A tibble: 50 × 13
##      row Petal.Length_setosa Petal.Length_versicolor Petal.Length_virginica
##    &lt;int&gt;               &lt;dbl&gt;                   &lt;dbl&gt;                  &lt;dbl&gt;
##  1     1                 1.4                     4.7                    6  
##  2     2                 1.4                     4.5                    5.1
##  3     3                 1.3                     4.9                    5.9
##  4     4                 1.5                     4                      5.6
##  5     5                 1.4                     4.6                    5.8
##  6     6                 1.7                     4.5                    6.6
##  7     7                 1.4                     4.7                    4.5
##  8     8                 1.5                     3.3                    6.3
##  9     9                 1.4                     4.6                    5.8
## 10    10                 1.5                     3.9                    6.1
## # ℹ 40 more rows
## # ℹ 9 more variables: Sepal.Length_setosa &lt;dbl&gt;, Sepal.Length_versicolor &lt;dbl&gt;,
## #   Sepal.Length_virginica &lt;dbl&gt;, Petal.Width_setosa &lt;dbl&gt;,
## #   Petal.Width_versicolor &lt;dbl&gt;, Petal.Width_virginica &lt;dbl&gt;,
## #   Sepal.Width_setosa &lt;dbl&gt;, Sepal.Width_versicolor &lt;dbl&gt;,
## #   Sepal.Width_virginica &lt;dbl&gt;</code></pre>
</div>
<div id="separate-columns" class="section level3 hasAnchor" number="1.1.10">
<h3><span class="header-section-number">1.1.10</span> Separate columns<a href="data-wrangling.html#separate-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Separating columns is useful when a single string variable contains multiple components. In practice, this appears in fields like codes (e.g., lab test codes), composite identifiers, or delimited values.<br />
Here we split <code>Species</code> into three parts using <code>"o"</code> as the separator. This is a toy example to demonstrate the function.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="data-wrangling.html#cb86-1" tabindex="-1"></a><span class="fu">separate</span>(iris, Species, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;integer&quot;</span>,<span class="st">&quot;decimal&quot;</span>,<span class="st">&quot;third&quot;</span>), <span class="at">sep=</span><span class="st">&quot;o&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Expected 3 pieces. Missing pieces filled with `NA` in
## 100 rows [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,
## 14, 15, 16, 17, 18, 19, 20, ...].</code></pre>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   integer decimal third
## 1            5.1         3.5          1.4         0.2       set      sa  &lt;NA&gt;
## 2            4.9         3.0          1.4         0.2       set      sa  &lt;NA&gt;
## 3            4.7         3.2          1.3         0.2       set      sa  &lt;NA&gt;
## 4            4.6         3.1          1.5         0.2       set      sa  &lt;NA&gt;
## 5            5.0         3.6          1.4         0.2       set      sa  &lt;NA&gt;
## 6            5.4         3.9          1.7         0.4       set      sa  &lt;NA&gt;
## 7            4.6         3.4          1.4         0.3       set      sa  &lt;NA&gt;
## 8            5.0         3.4          1.5         0.2       set      sa  &lt;NA&gt;
## 9            4.4         2.9          1.4         0.2       set      sa  &lt;NA&gt;
## 10           4.9         3.1          1.5         0.1       set      sa  &lt;NA&gt;
## 11           5.4         3.7          1.5         0.2       set      sa  &lt;NA&gt;
## 12           4.8         3.4          1.6         0.2       set      sa  &lt;NA&gt;
## 13           4.8         3.0          1.4         0.1       set      sa  &lt;NA&gt;
## 14           4.3         3.0          1.1         0.1       set      sa  &lt;NA&gt;
## 15           5.8         4.0          1.2         0.2       set      sa  &lt;NA&gt;
## 16           5.7         4.4          1.5         0.4       set      sa  &lt;NA&gt;
## 17           5.4         3.9          1.3         0.4       set      sa  &lt;NA&gt;
## 18           5.1         3.5          1.4         0.3       set      sa  &lt;NA&gt;
## 19           5.7         3.8          1.7         0.3       set      sa  &lt;NA&gt;
## 20           5.1         3.8          1.5         0.3       set      sa  &lt;NA&gt;
## 21           5.4         3.4          1.7         0.2       set      sa  &lt;NA&gt;
## 22           5.1         3.7          1.5         0.4       set      sa  &lt;NA&gt;
## 23           4.6         3.6          1.0         0.2       set      sa  &lt;NA&gt;
## 24           5.1         3.3          1.7         0.5       set      sa  &lt;NA&gt;
## 25           4.8         3.4          1.9         0.2       set      sa  &lt;NA&gt;
## 26           5.0         3.0          1.6         0.2       set      sa  &lt;NA&gt;
## 27           5.0         3.4          1.6         0.4       set      sa  &lt;NA&gt;
## 28           5.2         3.5          1.5         0.2       set      sa  &lt;NA&gt;
## 29           5.2         3.4          1.4         0.2       set      sa  &lt;NA&gt;
## 30           4.7         3.2          1.6         0.2       set      sa  &lt;NA&gt;
## 31           4.8         3.1          1.6         0.2       set      sa  &lt;NA&gt;
## 32           5.4         3.4          1.5         0.4       set      sa  &lt;NA&gt;
## 33           5.2         4.1          1.5         0.1       set      sa  &lt;NA&gt;
## 34           5.5         4.2          1.4         0.2       set      sa  &lt;NA&gt;
## 35           4.9         3.1          1.5         0.2       set      sa  &lt;NA&gt;
## 36           5.0         3.2          1.2         0.2       set      sa  &lt;NA&gt;
## 37           5.5         3.5          1.3         0.2       set      sa  &lt;NA&gt;
## 38           4.9         3.6          1.4         0.1       set      sa  &lt;NA&gt;
## 39           4.4         3.0          1.3         0.2       set      sa  &lt;NA&gt;
## 40           5.1         3.4          1.5         0.2       set      sa  &lt;NA&gt;
## 41           5.0         3.5          1.3         0.3       set      sa  &lt;NA&gt;
## 42           4.5         2.3          1.3         0.3       set      sa  &lt;NA&gt;
## 43           4.4         3.2          1.3         0.2       set      sa  &lt;NA&gt;
## 44           5.0         3.5          1.6         0.6       set      sa  &lt;NA&gt;
## 45           5.1         3.8          1.9         0.4       set      sa  &lt;NA&gt;
## 46           4.8         3.0          1.4         0.3       set      sa  &lt;NA&gt;
## 47           5.1         3.8          1.6         0.2       set      sa  &lt;NA&gt;
## 48           4.6         3.2          1.4         0.2       set      sa  &lt;NA&gt;
## 49           5.3         3.7          1.5         0.2       set      sa  &lt;NA&gt;
## 50           5.0         3.3          1.4         0.2       set      sa  &lt;NA&gt;
## 51           7.0         3.2          4.7         1.4    versic       l     r
## 52           6.4         3.2          4.5         1.5    versic       l     r
## 53           6.9         3.1          4.9         1.5    versic       l     r
## 54           5.5         2.3          4.0         1.3    versic       l     r
## 55           6.5         2.8          4.6         1.5    versic       l     r
## 56           5.7         2.8          4.5         1.3    versic       l     r
## 57           6.3         3.3          4.7         1.6    versic       l     r
## 58           4.9         2.4          3.3         1.0    versic       l     r
## 59           6.6         2.9          4.6         1.3    versic       l     r
## 60           5.2         2.7          3.9         1.4    versic       l     r
## 61           5.0         2.0          3.5         1.0    versic       l     r
## 62           5.9         3.0          4.2         1.5    versic       l     r
## 63           6.0         2.2          4.0         1.0    versic       l     r
## 64           6.1         2.9          4.7         1.4    versic       l     r
## 65           5.6         2.9          3.6         1.3    versic       l     r
## 66           6.7         3.1          4.4         1.4    versic       l     r
## 67           5.6         3.0          4.5         1.5    versic       l     r
## 68           5.8         2.7          4.1         1.0    versic       l     r
## 69           6.2         2.2          4.5         1.5    versic       l     r
## 70           5.6         2.5          3.9         1.1    versic       l     r
## 71           5.9         3.2          4.8         1.8    versic       l     r
## 72           6.1         2.8          4.0         1.3    versic       l     r
## 73           6.3         2.5          4.9         1.5    versic       l     r
## 74           6.1         2.8          4.7         1.2    versic       l     r
## 75           6.4         2.9          4.3         1.3    versic       l     r
## 76           6.6         3.0          4.4         1.4    versic       l     r
## 77           6.8         2.8          4.8         1.4    versic       l     r
## 78           6.7         3.0          5.0         1.7    versic       l     r
## 79           6.0         2.9          4.5         1.5    versic       l     r
## 80           5.7         2.6          3.5         1.0    versic       l     r
## 81           5.5         2.4          3.8         1.1    versic       l     r
## 82           5.5         2.4          3.7         1.0    versic       l     r
## 83           5.8         2.7          3.9         1.2    versic       l     r
## 84           6.0         2.7          5.1         1.6    versic       l     r
## 85           5.4         3.0          4.5         1.5    versic       l     r
## 86           6.0         3.4          4.5         1.6    versic       l     r
## 87           6.7         3.1          4.7         1.5    versic       l     r
## 88           6.3         2.3          4.4         1.3    versic       l     r
## 89           5.6         3.0          4.1         1.3    versic       l     r
## 90           5.5         2.5          4.0         1.3    versic       l     r
## 91           5.5         2.6          4.4         1.2    versic       l     r
## 92           6.1         3.0          4.6         1.4    versic       l     r
## 93           5.8         2.6          4.0         1.2    versic       l     r
## 94           5.0         2.3          3.3         1.0    versic       l     r
## 95           5.6         2.7          4.2         1.3    versic       l     r
## 96           5.7         3.0          4.2         1.2    versic       l     r
## 97           5.7         2.9          4.2         1.3    versic       l     r
## 98           6.2         2.9          4.3         1.3    versic       l     r
## 99           5.1         2.5          3.0         1.1    versic       l     r
## 100          5.7         2.8          4.1         1.3    versic       l     r
## 101          6.3         3.3          6.0         2.5 virginica    &lt;NA&gt;  &lt;NA&gt;
## 102          5.8         2.7          5.1         1.9 virginica    &lt;NA&gt;  &lt;NA&gt;
## 103          7.1         3.0          5.9         2.1 virginica    &lt;NA&gt;  &lt;NA&gt;
## 104          6.3         2.9          5.6         1.8 virginica    &lt;NA&gt;  &lt;NA&gt;
## 105          6.5         3.0          5.8         2.2 virginica    &lt;NA&gt;  &lt;NA&gt;
## 106          7.6         3.0          6.6         2.1 virginica    &lt;NA&gt;  &lt;NA&gt;
## 107          4.9         2.5          4.5         1.7 virginica    &lt;NA&gt;  &lt;NA&gt;
## 108          7.3         2.9          6.3         1.8 virginica    &lt;NA&gt;  &lt;NA&gt;
## 109          6.7         2.5          5.8         1.8 virginica    &lt;NA&gt;  &lt;NA&gt;
## 110          7.2         3.6          6.1         2.5 virginica    &lt;NA&gt;  &lt;NA&gt;
## 111          6.5         3.2          5.1         2.0 virginica    &lt;NA&gt;  &lt;NA&gt;
## 112          6.4         2.7          5.3         1.9 virginica    &lt;NA&gt;  &lt;NA&gt;
## 113          6.8         3.0          5.5         2.1 virginica    &lt;NA&gt;  &lt;NA&gt;
## 114          5.7         2.5          5.0         2.0 virginica    &lt;NA&gt;  &lt;NA&gt;
## 115          5.8         2.8          5.1         2.4 virginica    &lt;NA&gt;  &lt;NA&gt;
## 116          6.4         3.2          5.3         2.3 virginica    &lt;NA&gt;  &lt;NA&gt;
## 117          6.5         3.0          5.5         1.8 virginica    &lt;NA&gt;  &lt;NA&gt;
## 118          7.7         3.8          6.7         2.2 virginica    &lt;NA&gt;  &lt;NA&gt;
## 119          7.7         2.6          6.9         2.3 virginica    &lt;NA&gt;  &lt;NA&gt;
## 120          6.0         2.2          5.0         1.5 virginica    &lt;NA&gt;  &lt;NA&gt;
## 121          6.9         3.2          5.7         2.3 virginica    &lt;NA&gt;  &lt;NA&gt;
## 122          5.6         2.8          4.9         2.0 virginica    &lt;NA&gt;  &lt;NA&gt;
## 123          7.7         2.8          6.7         2.0 virginica    &lt;NA&gt;  &lt;NA&gt;
## 124          6.3         2.7          4.9         1.8 virginica    &lt;NA&gt;  &lt;NA&gt;
## 125          6.7         3.3          5.7         2.1 virginica    &lt;NA&gt;  &lt;NA&gt;
## 126          7.2         3.2          6.0         1.8 virginica    &lt;NA&gt;  &lt;NA&gt;
## 127          6.2         2.8          4.8         1.8 virginica    &lt;NA&gt;  &lt;NA&gt;
## 128          6.1         3.0          4.9         1.8 virginica    &lt;NA&gt;  &lt;NA&gt;
## 129          6.4         2.8          5.6         2.1 virginica    &lt;NA&gt;  &lt;NA&gt;
## 130          7.2         3.0          5.8         1.6 virginica    &lt;NA&gt;  &lt;NA&gt;
## 131          7.4         2.8          6.1         1.9 virginica    &lt;NA&gt;  &lt;NA&gt;
## 132          7.9         3.8          6.4         2.0 virginica    &lt;NA&gt;  &lt;NA&gt;
## 133          6.4         2.8          5.6         2.2 virginica    &lt;NA&gt;  &lt;NA&gt;
## 134          6.3         2.8          5.1         1.5 virginica    &lt;NA&gt;  &lt;NA&gt;
## 135          6.1         2.6          5.6         1.4 virginica    &lt;NA&gt;  &lt;NA&gt;
## 136          7.7         3.0          6.1         2.3 virginica    &lt;NA&gt;  &lt;NA&gt;
## 137          6.3         3.4          5.6         2.4 virginica    &lt;NA&gt;  &lt;NA&gt;
## 138          6.4         3.1          5.5         1.8 virginica    &lt;NA&gt;  &lt;NA&gt;
## 139          6.0         3.0          4.8         1.8 virginica    &lt;NA&gt;  &lt;NA&gt;
## 140          6.9         3.1          5.4         2.1 virginica    &lt;NA&gt;  &lt;NA&gt;
## 141          6.7         3.1          5.6         2.4 virginica    &lt;NA&gt;  &lt;NA&gt;
## 142          6.9         3.1          5.1         2.3 virginica    &lt;NA&gt;  &lt;NA&gt;
## 143          5.8         2.7          5.1         1.9 virginica    &lt;NA&gt;  &lt;NA&gt;
## 144          6.8         3.2          5.9         2.3 virginica    &lt;NA&gt;  &lt;NA&gt;
## 145          6.7         3.3          5.7         2.5 virginica    &lt;NA&gt;  &lt;NA&gt;
## 146          6.7         3.0          5.2         2.3 virginica    &lt;NA&gt;  &lt;NA&gt;
## 147          6.3         2.5          5.0         1.9 virginica    &lt;NA&gt;  &lt;NA&gt;
## 148          6.5         3.0          5.2         2.0 virginica    &lt;NA&gt;  &lt;NA&gt;
## 149          6.2         3.4          5.4         2.3 virginica    &lt;NA&gt;  &lt;NA&gt;
## 150          5.9         3.0          5.1         1.8 virginica    &lt;NA&gt;  &lt;NA&gt;</code></pre>
</div>
<div id="recoderelabel-data" class="section level3 hasAnchor" number="1.1.11">
<h3><span class="header-section-number">1.1.11</span> Recode/relabel data<a href="data-wrangling.html#recoderelabel-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Recoding is commonly used to standardize categories, shorten labels, or map source system codes to analysis-friendly values.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data-wrangling.html#cb89-1" tabindex="-1"></a><span class="fu">mutate</span>(iris, <span class="at">Species2 =</span> <span class="fu">recode</span>(Species, <span class="st">&quot;setosa&quot;</span><span class="ot">=</span><span class="st">&quot;seto&quot;</span>, <span class="st">&quot;versicolor&quot;</span><span class="ot">=</span><span class="st">&quot;versi&quot;</span>))</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species  Species2
## 1            5.1         3.5          1.4         0.2     setosa      seto
## 2            4.9         3.0          1.4         0.2     setosa      seto
## 3            4.7         3.2          1.3         0.2     setosa      seto
## 4            4.6         3.1          1.5         0.2     setosa      seto
## 5            5.0         3.6          1.4         0.2     setosa      seto
## 6            5.4         3.9          1.7         0.4     setosa      seto
## 7            4.6         3.4          1.4         0.3     setosa      seto
## 8            5.0         3.4          1.5         0.2     setosa      seto
## 9            4.4         2.9          1.4         0.2     setosa      seto
## 10           4.9         3.1          1.5         0.1     setosa      seto
## 11           5.4         3.7          1.5         0.2     setosa      seto
## 12           4.8         3.4          1.6         0.2     setosa      seto
## 13           4.8         3.0          1.4         0.1     setosa      seto
## 14           4.3         3.0          1.1         0.1     setosa      seto
## 15           5.8         4.0          1.2         0.2     setosa      seto
## 16           5.7         4.4          1.5         0.4     setosa      seto
## 17           5.4         3.9          1.3         0.4     setosa      seto
## 18           5.1         3.5          1.4         0.3     setosa      seto
## 19           5.7         3.8          1.7         0.3     setosa      seto
## 20           5.1         3.8          1.5         0.3     setosa      seto
## 21           5.4         3.4          1.7         0.2     setosa      seto
## 22           5.1         3.7          1.5         0.4     setosa      seto
## 23           4.6         3.6          1.0         0.2     setosa      seto
## 24           5.1         3.3          1.7         0.5     setosa      seto
## 25           4.8         3.4          1.9         0.2     setosa      seto
## 26           5.0         3.0          1.6         0.2     setosa      seto
## 27           5.0         3.4          1.6         0.4     setosa      seto
## 28           5.2         3.5          1.5         0.2     setosa      seto
## 29           5.2         3.4          1.4         0.2     setosa      seto
## 30           4.7         3.2          1.6         0.2     setosa      seto
## 31           4.8         3.1          1.6         0.2     setosa      seto
## 32           5.4         3.4          1.5         0.4     setosa      seto
## 33           5.2         4.1          1.5         0.1     setosa      seto
## 34           5.5         4.2          1.4         0.2     setosa      seto
## 35           4.9         3.1          1.5         0.2     setosa      seto
## 36           5.0         3.2          1.2         0.2     setosa      seto
## 37           5.5         3.5          1.3         0.2     setosa      seto
## 38           4.9         3.6          1.4         0.1     setosa      seto
## 39           4.4         3.0          1.3         0.2     setosa      seto
## 40           5.1         3.4          1.5         0.2     setosa      seto
## 41           5.0         3.5          1.3         0.3     setosa      seto
## 42           4.5         2.3          1.3         0.3     setosa      seto
## 43           4.4         3.2          1.3         0.2     setosa      seto
## 44           5.0         3.5          1.6         0.6     setosa      seto
## 45           5.1         3.8          1.9         0.4     setosa      seto
## 46           4.8         3.0          1.4         0.3     setosa      seto
## 47           5.1         3.8          1.6         0.2     setosa      seto
## 48           4.6         3.2          1.4         0.2     setosa      seto
## 49           5.3         3.7          1.5         0.2     setosa      seto
## 50           5.0         3.3          1.4         0.2     setosa      seto
## 51           7.0         3.2          4.7         1.4 versicolor     versi
## 52           6.4         3.2          4.5         1.5 versicolor     versi
## 53           6.9         3.1          4.9         1.5 versicolor     versi
## 54           5.5         2.3          4.0         1.3 versicolor     versi
## 55           6.5         2.8          4.6         1.5 versicolor     versi
## 56           5.7         2.8          4.5         1.3 versicolor     versi
## 57           6.3         3.3          4.7         1.6 versicolor     versi
## 58           4.9         2.4          3.3         1.0 versicolor     versi
## 59           6.6         2.9          4.6         1.3 versicolor     versi
## 60           5.2         2.7          3.9         1.4 versicolor     versi
## 61           5.0         2.0          3.5         1.0 versicolor     versi
## 62           5.9         3.0          4.2         1.5 versicolor     versi
## 63           6.0         2.2          4.0         1.0 versicolor     versi
## 64           6.1         2.9          4.7         1.4 versicolor     versi
## 65           5.6         2.9          3.6         1.3 versicolor     versi
## 66           6.7         3.1          4.4         1.4 versicolor     versi
## 67           5.6         3.0          4.5         1.5 versicolor     versi
## 68           5.8         2.7          4.1         1.0 versicolor     versi
## 69           6.2         2.2          4.5         1.5 versicolor     versi
## 70           5.6         2.5          3.9         1.1 versicolor     versi
## 71           5.9         3.2          4.8         1.8 versicolor     versi
## 72           6.1         2.8          4.0         1.3 versicolor     versi
## 73           6.3         2.5          4.9         1.5 versicolor     versi
## 74           6.1         2.8          4.7         1.2 versicolor     versi
## 75           6.4         2.9          4.3         1.3 versicolor     versi
## 76           6.6         3.0          4.4         1.4 versicolor     versi
## 77           6.8         2.8          4.8         1.4 versicolor     versi
## 78           6.7         3.0          5.0         1.7 versicolor     versi
## 79           6.0         2.9          4.5         1.5 versicolor     versi
## 80           5.7         2.6          3.5         1.0 versicolor     versi
## 81           5.5         2.4          3.8         1.1 versicolor     versi
## 82           5.5         2.4          3.7         1.0 versicolor     versi
## 83           5.8         2.7          3.9         1.2 versicolor     versi
## 84           6.0         2.7          5.1         1.6 versicolor     versi
## 85           5.4         3.0          4.5         1.5 versicolor     versi
## 86           6.0         3.4          4.5         1.6 versicolor     versi
## 87           6.7         3.1          4.7         1.5 versicolor     versi
## 88           6.3         2.3          4.4         1.3 versicolor     versi
## 89           5.6         3.0          4.1         1.3 versicolor     versi
## 90           5.5         2.5          4.0         1.3 versicolor     versi
## 91           5.5         2.6          4.4         1.2 versicolor     versi
## 92           6.1         3.0          4.6         1.4 versicolor     versi
## 93           5.8         2.6          4.0         1.2 versicolor     versi
## 94           5.0         2.3          3.3         1.0 versicolor     versi
## 95           5.6         2.7          4.2         1.3 versicolor     versi
## 96           5.7         3.0          4.2         1.2 versicolor     versi
## 97           5.7         2.9          4.2         1.3 versicolor     versi
## 98           6.2         2.9          4.3         1.3 versicolor     versi
## 99           5.1         2.5          3.0         1.1 versicolor     versi
## 100          5.7         2.8          4.1         1.3 versicolor     versi
## 101          6.3         3.3          6.0         2.5  virginica virginica
## 102          5.8         2.7          5.1         1.9  virginica virginica
## 103          7.1         3.0          5.9         2.1  virginica virginica
## 104          6.3         2.9          5.6         1.8  virginica virginica
## 105          6.5         3.0          5.8         2.2  virginica virginica
## 106          7.6         3.0          6.6         2.1  virginica virginica
## 107          4.9         2.5          4.5         1.7  virginica virginica
## 108          7.3         2.9          6.3         1.8  virginica virginica
## 109          6.7         2.5          5.8         1.8  virginica virginica
## 110          7.2         3.6          6.1         2.5  virginica virginica
## 111          6.5         3.2          5.1         2.0  virginica virginica
## 112          6.4         2.7          5.3         1.9  virginica virginica
## 113          6.8         3.0          5.5         2.1  virginica virginica
## 114          5.7         2.5          5.0         2.0  virginica virginica
## 115          5.8         2.8          5.1         2.4  virginica virginica
## 116          6.4         3.2          5.3         2.3  virginica virginica
## 117          6.5         3.0          5.5         1.8  virginica virginica
## 118          7.7         3.8          6.7         2.2  virginica virginica
## 119          7.7         2.6          6.9         2.3  virginica virginica
## 120          6.0         2.2          5.0         1.5  virginica virginica
## 121          6.9         3.2          5.7         2.3  virginica virginica
## 122          5.6         2.8          4.9         2.0  virginica virginica
## 123          7.7         2.8          6.7         2.0  virginica virginica
## 124          6.3         2.7          4.9         1.8  virginica virginica
## 125          6.7         3.3          5.7         2.1  virginica virginica
## 126          7.2         3.2          6.0         1.8  virginica virginica
## 127          6.2         2.8          4.8         1.8  virginica virginica
## 128          6.1         3.0          4.9         1.8  virginica virginica
## 129          6.4         2.8          5.6         2.1  virginica virginica
## 130          7.2         3.0          5.8         1.6  virginica virginica
## 131          7.4         2.8          6.1         1.9  virginica virginica
## 132          7.9         3.8          6.4         2.0  virginica virginica
## 133          6.4         2.8          5.6         2.2  virginica virginica
## 134          6.3         2.8          5.1         1.5  virginica virginica
## 135          6.1         2.6          5.6         1.4  virginica virginica
## 136          7.7         3.0          6.1         2.3  virginica virginica
## 137          6.3         3.4          5.6         2.4  virginica virginica
## 138          6.4         3.1          5.5         1.8  virginica virginica
## 139          6.0         3.0          4.8         1.8  virginica virginica
## 140          6.9         3.1          5.4         2.1  virginica virginica
## 141          6.7         3.1          5.6         2.4  virginica virginica
## 142          6.9         3.1          5.1         2.3  virginica virginica
## 143          5.8         2.7          5.1         1.9  virginica virginica
## 144          6.8         3.2          5.9         2.3  virginica virginica
## 145          6.7         3.3          5.7         2.5  virginica virginica
## 146          6.7         3.0          5.2         2.3  virginica virginica
## 147          6.3         2.5          5.0         1.9  virginica virginica
## 148          6.5         3.0          5.2         2.0  virginica virginica
## 149          6.2         3.4          5.4         2.3  virginica virginica
## 150          5.9         3.0          5.1         1.8  virginica virginica</code></pre>
</div>
<div id="deduplication" class="section level3 hasAnchor" number="1.1.12">
<h3><span class="header-section-number">1.1.12</span> deduplication<a href="data-wrangling.html#deduplication" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Duplicate rows can occur due to data entry issues, merges that unintentionally replicate records, or repeated extracts.<br />
A typical cleaning step is to either remove duplicates or flag them for review.</p>
<div id="complete-duplicate-row" class="section level4 hasAnchor" number="1.1.12.1">
<h4><span class="header-section-number">1.1.12.1</span> Complete duplicate row<a href="data-wrangling.html#complete-duplicate-row" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Complete duplicates are rows that match across all variables.<br />
<code>distinct()</code> keeps only unique rows.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="data-wrangling.html#cb91-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb91-2"><a href="data-wrangling.html#cb91-2" tabindex="-1"></a>  <span class="sc">~</span>id, <span class="sc">~</span>day, <span class="sc">~</span>x,</span>
<span id="cb91-3"><a href="data-wrangling.html#cb91-3" tabindex="-1"></a>    <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>,</span>
<span id="cb91-4"><a href="data-wrangling.html#cb91-4" tabindex="-1"></a>    <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">11</span>,</span>
<span id="cb91-5"><a href="data-wrangling.html#cb91-5" tabindex="-1"></a>    <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">12</span>,</span>
<span id="cb91-6"><a href="data-wrangling.html#cb91-6" tabindex="-1"></a>    <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">13</span>,</span>
<span id="cb91-7"><a href="data-wrangling.html#cb91-7" tabindex="-1"></a>    <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">14</span>,</span>
<span id="cb91-8"><a href="data-wrangling.html#cb91-8" tabindex="-1"></a>    <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">12</span>,</span>
<span id="cb91-9"><a href="data-wrangling.html#cb91-9" tabindex="-1"></a>    <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">12</span>,</span>
<span id="cb91-10"><a href="data-wrangling.html#cb91-10" tabindex="-1"></a>    <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">13</span>,</span>
<span id="cb91-11"><a href="data-wrangling.html#cb91-11" tabindex="-1"></a>    <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">13</span>,</span>
<span id="cb91-12"><a href="data-wrangling.html#cb91-12" tabindex="-1"></a>    <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">10</span>,</span>
<span id="cb91-13"><a href="data-wrangling.html#cb91-13" tabindex="-1"></a>    <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">11</span>,</span>
<span id="cb91-14"><a href="data-wrangling.html#cb91-14" tabindex="-1"></a>    <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">10</span></span>
<span id="cb91-15"><a href="data-wrangling.html#cb91-15" tabindex="-1"></a>)  </span>
<span id="cb91-16"><a href="data-wrangling.html#cb91-16" tabindex="-1"></a></span>
<span id="cb91-17"><a href="data-wrangling.html#cb91-17" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb91-18"><a href="data-wrangling.html#cb91-18" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##       id   day     x
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     1     1     1
##  2     1     2    11
##  3     2     1    12
##  4     2     2    13
##  5     2     2    14
##  6     3     1    12
##  7     3     2    13
##  8     4     1    13
##  9     5     1    10
## 10     5     2    11</code></pre>
<p><code>mark duplication</code><br />
The <code>duplicated()</code> function identifies whether each row has appeared previously. This is useful when you want to keep the full dataset but flag duplicates for investigation.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data-wrangling.html#cb93-1" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb93-2"><a href="data-wrangling.html#cb93-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">duplicated</span>(df)) </span></code></pre></div>
<pre><code>## # A tibble: 12 × 4
##       id   day     x dup  
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;
##  1     1     1     1 FALSE
##  2     1     2    11 FALSE
##  3     2     1    12 FALSE
##  4     2     2    13 FALSE
##  5     2     2    14 FALSE
##  6     3     1    12 FALSE
##  7     3     1    12 TRUE 
##  8     3     2    13 FALSE
##  9     4     1    13 FALSE
## 10     5     1    10 FALSE
## 11     5     2    11 FALSE
## 12     5     1    10 TRUE</code></pre>
<p>This approach creates a row counter within identical rows and flags the second and later occurrences as duplicates.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="data-wrangling.html#cb95-1" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb95-2"><a href="data-wrangling.html#cb95-2" tabindex="-1"></a>  <span class="fu">group_by_all</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb95-3"><a href="data-wrangling.html#cb95-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-4"><a href="data-wrangling.html#cb95-4" tabindex="-1"></a>    <span class="at">n_row =</span> <span class="fu">row_number</span>(),</span>
<span id="cb95-5"><a href="data-wrangling.html#cb95-5" tabindex="-1"></a>    <span class="at">dup   =</span> n_row <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb95-6"><a href="data-wrangling.html#cb95-6" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 12 × 5
## # Groups:   id, day, x [10]
##       id   day     x n_row dup  
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;lgl&gt;
##  1     1     1     1     1 FALSE
##  2     1     2    11     1 FALSE
##  3     2     1    12     1 FALSE
##  4     2     2    13     1 FALSE
##  5     2     2    14     1 FALSE
##  6     3     1    12     1 FALSE
##  7     3     1    12     2 TRUE 
##  8     3     2    13     1 FALSE
##  9     4     1    13     1 FALSE
## 10     5     1    10     1 FALSE
## 11     5     2    11     1 FALSE
## 12     5     1    10     2 TRUE</code></pre>
</div>
<div id="partial-duplicate-rows" class="section level4 hasAnchor" number="1.1.12.2">
<h4><span class="header-section-number">1.1.12.2</span> Partial duplicate rows<a href="data-wrangling.html#partial-duplicate-rows" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes duplication is defined only by a key (e.g., subject + visit), not by all columns.<br />
Here we keep only the first record for each <code>id, day</code> pair and keep all columns (<code>.keep_all = TRUE</code>).</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="data-wrangling.html#cb97-1" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb97-2"><a href="data-wrangling.html#cb97-2" tabindex="-1"></a>  <span class="fu">distinct</span>(id, day, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 9 × 3
##      id   day     x
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     1     1
## 2     1     2    11
## 3     2     1    12
## 4     2     2    13
## 5     3     1    12
## 6     3     2    13
## 7     4     1    13
## 8     5     1    10
## 9     5     2    11</code></pre>
<p>Another way is to explicitly count duplicates within the key groups. This is useful if you want to decide how to handle duplicates (e.g., keep latest, average, or review manually).</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="data-wrangling.html#cb99-1" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="data-wrangling.html#cb99-2" tabindex="-1"></a>  <span class="fu">group_by</span>(id, day) <span class="sc">%&gt;%</span> </span>
<span id="cb99-3"><a href="data-wrangling.html#cb99-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb99-4"><a href="data-wrangling.html#cb99-4" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">row_number</span>(), <span class="co"># Counts rows by group</span></span>
<span id="cb99-5"><a href="data-wrangling.html#cb99-5" tabindex="-1"></a>    <span class="at">dup   =</span> count <span class="sc">&gt;</span> <span class="dv">1</span>     <span class="co"># TRUE if there is more than one row per group</span></span>
<span id="cb99-6"><a href="data-wrangling.html#cb99-6" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 12 × 5
## # Groups:   id, day [9]
##       id   day     x count dup  
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;lgl&gt;
##  1     1     1     1     1 FALSE
##  2     1     2    11     1 FALSE
##  3     2     1    12     1 FALSE
##  4     2     2    13     1 FALSE
##  5     2     2    14     2 TRUE 
##  6     3     1    12     1 FALSE
##  7     3     1    12     2 TRUE 
##  8     3     2    13     1 FALSE
##  9     4     1    13     1 FALSE
## 10     5     1    10     1 FALSE
## 11     5     2    11     1 FALSE
## 12     5     1    10     2 TRUE</code></pre>
<p><code>select duplicates</code><br />
This returns only the rows that are duplicated (including both the first and later occurrences).</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="data-wrangling.html#cb101-1" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb101-2"><a href="data-wrangling.html#cb101-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">duplicated</span>(.) <span class="sc">|</span> <span class="fu">duplicated</span>(., <span class="at">fromLast =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb101-3"><a href="data-wrangling.html#cb101-3" tabindex="-1"></a>  <span class="fu">filter</span>(dup<span class="sc">==</span>T)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 4
##      id   day     x dup  
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;
## 1     3     1    12 TRUE 
## 2     3     1    12 TRUE 
## 3     5     1    10 TRUE 
## 4     5     1    10 TRUE</code></pre>
</div>
</div>
<div id="combine-data-sets" class="section level3 hasAnchor" number="1.1.13">
<h3><span class="header-section-number">1.1.13</span> Combine data sets<a href="data-wrangling.html#combine-data-sets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Combining datasets is a core step in analysis workflows. Common scenarios include:<br />
- merging demographics with outcomes<br />
- attaching treatment assignment to longitudinal records<br />
- linking subject-level and visit-level datasets</p>
<p>Below we demonstrate common join types in <code>dplyr</code>. The key concept is to be explicit about which table is the “left” table and which key variables define a match.</p>
<ul>
<li>prepare data sets</li>
</ul>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="data-wrangling.html#cb103-1" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,                       </span>
<span id="cb103-2"><a href="data-wrangling.html#cb103-2" tabindex="-1"></a>                    <span class="at">X1 =</span> <span class="fu">c</span>(<span class="st">&quot;a1&quot;</span>, <span class="st">&quot;a2&quot;</span>,<span class="st">&quot;a3&quot;</span>, <span class="st">&quot;a4&quot;</span>),</span>
<span id="cb103-3"><a href="data-wrangling.html#cb103-3" tabindex="-1"></a>                    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb103-4"><a href="data-wrangling.html#cb103-4" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>,                       </span>
<span id="cb103-5"><a href="data-wrangling.html#cb103-5" tabindex="-1"></a>                    <span class="at">X2 =</span> <span class="fu">c</span>(<span class="st">&quot;b1&quot;</span>, <span class="st">&quot;b2&quot;</span>,<span class="st">&quot;b3&quot;</span>, <span class="st">&quot;b4&quot;</span>),</span>
<span id="cb103-6"><a href="data-wrangling.html#cb103-6" tabindex="-1"></a>                    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<ul>
<li>inner join<br />
Keeps only IDs that appear in both datasets.</li>
</ul>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="data-wrangling.html#cb104-1" tabindex="-1"></a><span class="fu">inner_join</span>(data1, data2, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)    </span></code></pre></div>
<pre><code>##   ID X1 X2
## 1  2 a2 b1
## 2  3 a3 b2
## 3  4 a4 b3</code></pre>
<ul>
<li>left join<br />
Keeps all rows from <code>data1</code> and attaches matches from <code>data2</code>. Unmatched rows get missing values for <code>data2</code> variables.<br />
<code>there is not ID 1 in data2, thence, x2 is missing.</code></li>
</ul>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="data-wrangling.html#cb106-1" tabindex="-1"></a><span class="fu">left_join</span>(data1, data2, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)   </span></code></pre></div>
<pre><code>##   ID X1   X2
## 1  1 a1 &lt;NA&gt;
## 2  2 a2   b1
## 3  3 a3   b2
## 4  4 a4   b3</code></pre>
<p><code>differing key col names</code><br />
When key columns have different names across datasets, you can map them with <code>by = c("left_key"="right_key")</code>.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data-wrangling.html#cb108-1" tabindex="-1"></a><span class="fu">left_join</span>(data1, data2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;ID&quot;</span><span class="ot">=</span><span class="st">&quot;ID&quot;</span>))  </span></code></pre></div>
<pre><code>##   ID X1   X2
## 1  1 a1 &lt;NA&gt;
## 2  2 a2   b1
## 3  3 a3   b2
## 4  4 a4   b3</code></pre>
<p><code>One-to-many relationship</code> has the same statement<br />
When the right table has multiple rows per key, the join will expand rows in the left table accordingly. This is expected but should be checked carefully in real analyses.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data-wrangling.html#cb110-1" tabindex="-1"></a><span class="fu">left_join</span>(data1, data2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;ID&quot;</span> ))  </span></code></pre></div>
<pre><code>##   ID X1   X2
## 1  1 a1 &lt;NA&gt;
## 2  2 a2   b1
## 3  3 a3   b2
## 4  4 a4   b3</code></pre>
<p><code>multiple data frames</code><br />
You can chain joins to attach multiple datasets step by step. In practice, verify keys and row counts after each join.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="data-wrangling.html#cb112-1" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> </span>
<span id="cb112-2"><a href="data-wrangling.html#cb112-2" tabindex="-1"></a>  <span class="fu">left_join</span>(data2, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb112-3"><a href="data-wrangling.html#cb112-3" tabindex="-1"></a>  <span class="fu">left_join</span>(data2, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<pre><code>##   ID X1 X2.x X2.y
## 1  1 a1 &lt;NA&gt; &lt;NA&gt;
## 2  2 a2   b1   b1
## 3  3 a3   b2   b2
## 4  4 a4   b3   b3</code></pre>
<p><code>multiple key values</code><br />
In many clinical datasets, joins use multiple keys such as subject ID and visit number.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="data-wrangling.html#cb114-1" tabindex="-1"></a><span class="co"># demographics %&gt;%  </span></span>
<span id="cb114-2"><a href="data-wrangling.html#cb114-2" tabindex="-1"></a><span class="co">#   left_join(ultra, by = c(&quot;id&quot;, &quot;visit&quot;))</span></span></code></pre></div>
<ul>
<li>right join<br />
Keeps all rows from the right table. This is less common in practice, because most workflows start from a primary “analysis dataset” on the left.</li>
</ul>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="data-wrangling.html#cb115-1" tabindex="-1"></a><span class="fu">right_join</span>(data1, data2, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)  </span></code></pre></div>
<pre><code>##   ID   X1 X2
## 1  2   a2 b1
## 2  3   a3 b2
## 3  4   a4 b3
## 4  5 &lt;NA&gt; b4</code></pre>
<ul>
<li>full join<br />
Keeps all rows from both tables. This is useful for reconciliation or when building a master key list.</li>
</ul>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="data-wrangling.html#cb117-1" tabindex="-1"></a><span class="fu">full_join</span>(data1, data2, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>) </span></code></pre></div>
<pre><code>##   ID   X1   X2
## 1  1   a1 &lt;NA&gt;
## 2  2   a2   b1
## 3  3   a3   b2
## 4  4   a4   b3
## 5  5 &lt;NA&gt;   b4</code></pre>
<ul>
<li>keep cases of left data table without in right data table<br />
<code>anti_join()</code> is useful for checking which keys did not match, which is a common QC step after merges.</li>
</ul>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="data-wrangling.html#cb119-1" tabindex="-1"></a><span class="fu">anti_join</span>(data1, data2, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)  </span></code></pre></div>
<pre><code>##   ID X1
## 1  1 a1</code></pre>
<ul>
<li>keep cases of left data table in right data table<br />
<code>semi_join()</code> keeps rows from the left table that have a match in the right table, without bringing in right-table columns.</li>
</ul>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="data-wrangling.html#cb121-1" tabindex="-1"></a><span class="fu">semi_join</span>(data1, data2, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)  </span></code></pre></div>
<pre><code>##   ID X1
## 1  2 a2
## 2  3 a3
## 3  4 a4</code></pre>
<ul>
<li>multiple full join<br />
This demonstrates that joins can be chained. In practice, consider whether repeated joins are intended and check for row multiplication.</li>
</ul>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="data-wrangling.html#cb123-1" tabindex="-1"></a><span class="fu">full_join</span>(data1, data2, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>) <span class="sc">%&gt;%</span>              </span>
<span id="cb123-2"><a href="data-wrangling.html#cb123-2" tabindex="-1"></a>  <span class="fu">full_join</span>(., data2, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>) </span></code></pre></div>
<pre><code>##   ID   X1 X2.x X2.y
## 1  1   a1 &lt;NA&gt; &lt;NA&gt;
## 2  2   a2   b1   b1
## 3  3   a3   b2   b2
## 4  4   a4   b3   b3
## 5  5 &lt;NA&gt;   b4   b4</code></pre>
<ul>
<li>append two data tables by using join and merge<br />
Base R <code>merge()</code> is still commonly seen in legacy code. <code>all = TRUE</code> corresponds to a full join.</li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="data-wrangling.html#cb125-1" tabindex="-1"></a>data_frame1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">col1 =</span> <span class="fu">c</span>(<span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>),</span>
<span id="cb125-2"><a href="data-wrangling.html#cb125-2" tabindex="-1"></a>                         <span class="at">col2 =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>],</span>
<span id="cb125-3"><a href="data-wrangling.html#cb125-3" tabindex="-1"></a>                         <span class="at">col3 =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="cn">NA</span>))</span>
<span id="cb125-4"><a href="data-wrangling.html#cb125-4" tabindex="-1"></a> </span>
<span id="cb125-5"><a href="data-wrangling.html#cb125-5" tabindex="-1"></a>data_frame2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">col1 =</span> <span class="fu">c</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>),</span>
<span id="cb125-6"><a href="data-wrangling.html#cb125-6" tabindex="-1"></a>                          <span class="at">col5 =</span> letters[<span class="dv">7</span><span class="sc">:</span><span class="dv">8</span>])</span>
<span id="cb125-7"><a href="data-wrangling.html#cb125-7" tabindex="-1"></a> </span>
<span id="cb125-8"><a href="data-wrangling.html#cb125-8" tabindex="-1"></a>data_frame_merge <span class="ot">&lt;-</span> <span class="fu">merge</span>(data_frame1, data_frame2,</span>
<span id="cb125-9"><a href="data-wrangling.html#cb125-9" tabindex="-1"></a>                          <span class="at">by =</span> <span class="st">&#39;col1&#39;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb125-10"><a href="data-wrangling.html#cb125-10" tabindex="-1"></a> </span>
<span id="cb125-11"><a href="data-wrangling.html#cb125-11" tabindex="-1"></a><span class="fu">print</span> (data_frame_merge)</span></code></pre></div>
<pre><code>##   col1 col2 col3 col5
## 1    5 &lt;NA&gt;   NA    g
## 2    6    a    1    h
## 3    7    b    4 &lt;NA&gt;
## 4    8    c   NA &lt;NA&gt;</code></pre>
<p>This is the tidyverse equivalent of the merge above.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="data-wrangling.html#cb127-1" tabindex="-1"></a><span class="fu">full_join</span>(data_frame1,data_frame2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;col1&quot;</span>),)</span></code></pre></div>
<pre><code>##   col1 col2 col3 col5
## 1    6    a    1    h
## 2    7    b    4 &lt;NA&gt;
## 3    8    c   NA &lt;NA&gt;
## 4    5 &lt;NA&gt;   NA    g</code></pre>
<ul>
<li>adding rows using <code>bind_ function</code><br />
Row-binding is used when two datasets have the same meaning (same variable definitions) and you want to stack them.<br />
In practice, this is common when appending data from multiple sites, multiple batches, or multiple extracts.</li>
</ul>
<p>rbind <strong>doesn’t work</strong><br />
Base R <code>rbind()</code> requires the same column names and order.</p>
<p><code>bind_ function conbines the data frames</code>based on column names<code>; having our columns in a different order isn’t a problem.</code></p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="data-wrangling.html#cb129-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">col1 =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>],</span>
<span id="cb129-2"><a href="data-wrangling.html#cb129-2" tabindex="-1"></a>                  <span class="at">col2a =</span> <span class="fu">c</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="cb129-3"><a href="data-wrangling.html#cb129-3" tabindex="-1"></a>                  <span class="at">col3a =</span> <span class="cn">TRUE</span>)</span>
<span id="cb129-4"><a href="data-wrangling.html#cb129-4" tabindex="-1"></a></span>
<span id="cb129-5"><a href="data-wrangling.html#cb129-5" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">col1 =</span> LETTERS[<span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>],</span>
<span id="cb129-6"><a href="data-wrangling.html#cb129-6" tabindex="-1"></a>                  <span class="at">col2b=</span> <span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>),</span>
<span id="cb129-7"><a href="data-wrangling.html#cb129-7" tabindex="-1"></a>                  <span class="at">col3b =</span> <span class="cn">FALSE</span>)</span>
<span id="cb129-8"><a href="data-wrangling.html#cb129-8" tabindex="-1"></a><span class="co"># rbind(df1,df2)</span></span>
<span id="cb129-9"><a href="data-wrangling.html#cb129-9" tabindex="-1"></a></span>
<span id="cb129-10"><a href="data-wrangling.html#cb129-10" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> </span>
<span id="cb129-11"><a href="data-wrangling.html#cb129-11" tabindex="-1"></a>  <span class="fu">bind_rows</span>(df2)</span></code></pre></div>
<pre><code>##    col1 col2a col3a col2b col3b
## 1     A     5  TRUE    NA    NA
## 2     B     6  TRUE    NA    NA
## 3     C     7  TRUE    NA    NA
## 4     D     8  TRUE    NA    NA
## 5     E     9  TRUE    NA    NA
## 6     F    10  TRUE    NA    NA
## 7     D    NA    NA     4 FALSE
## 8     E    NA    NA     5 FALSE
## 9     F    NA    NA     6 FALSE
## 10    G    NA    NA     7 FALSE
## 11    H    NA    NA     8 FALSE</code></pre>
<p><code>rename the differing cols</code><br />
Before binding rows, make sure variable names represent the same concept. Here we align names so that columns stack correctly.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="data-wrangling.html#cb131-1" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> </span>
<span id="cb131-2"><a href="data-wrangling.html#cb131-2" tabindex="-1"></a>  <span class="fu">bind_rows</span>(df2 <span class="sc">%&gt;%</span> </span>
<span id="cb131-3"><a href="data-wrangling.html#cb131-3" tabindex="-1"></a>   <span class="fu">rename</span>(<span class="at">col2a=</span>col2b,</span>
<span id="cb131-4"><a href="data-wrangling.html#cb131-4" tabindex="-1"></a>          <span class="at">col3a=</span>col3b)  )</span></code></pre></div>
<pre><code>##    col1 col2a col3a
## 1     A     5  TRUE
## 2     B     6  TRUE
## 3     C     7  TRUE
## 4     D     8  TRUE
## 5     E     9  TRUE
## 6     F    10  TRUE
## 7     D     4 FALSE
## 8     E     5 FALSE
## 9     F     6 FALSE
## 10    G     7 FALSE
## 11    H     8 FALSE</code></pre>
<p>combining more than 2 data frames<br />
You can bind multiple datasets at once. In practice, you may bind a list of datasets after validating that they share the same structure.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="data-wrangling.html#cb133-1" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> </span>
<span id="cb133-2"><a href="data-wrangling.html#cb133-2" tabindex="-1"></a>  <span class="fu">bind_rows</span>(df2,df2)</span></code></pre></div>
<pre><code>##    col1 col2a col3a col2b col3b
## 1     A     5  TRUE    NA    NA
## 2     B     6  TRUE    NA    NA
## 3     C     7  TRUE    NA    NA
## 4     D     8  TRUE    NA    NA
## 5     E     9  TRUE    NA    NA
## 6     F    10  TRUE    NA    NA
## 7     D    NA    NA     4 FALSE
## 8     E    NA    NA     5 FALSE
## 9     F    NA    NA     6 FALSE
## 10    G    NA    NA     7 FALSE
## 11    H    NA    NA     8 FALSE
## 12    D    NA    NA     4 FALSE
## 13    E    NA    NA     5 FALSE
## 14    F    NA    NA     6 FALSE
## 15    G    NA    NA     7 FALSE
## 16    H    NA    NA     8 FALSE</code></pre>
</div>
<div id="working-with-character-strings" class="section level3 hasAnchor" number="1.1.14">
<h3><span class="header-section-number">1.1.14</span> Working with character strings<a href="data-wrangling.html#working-with-character-strings" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Character string cleaning is common in real datasets: names, sites, lab test labels, free-text fields, and coded fields may contain inconsistent capitalization, extra spaces, or punctuation.<br />
The <code>stringr</code> package provides consistent and vectorized string operations, which fit naturally in <code>dplyr</code> pipelines.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="data-wrangling.html#cb135-1" tabindex="-1"></a><span class="fu">library</span>(stringr)  </span>
<span id="cb135-2"><a href="data-wrangling.html#cb135-2" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code></pre></div>
<ul>
<li>Look at the values<br />
A good first step is to inspect the raw values and identify patterns (e.g., trailing commas, mixed case, inconsistent coding).</li>
</ul>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="data-wrangling.html#cb136-1" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">hed2</span><span class="sc">\\</span><span class="st">Downloads</span><span class="sc">\\</span><span class="st">others</span><span class="sc">\\</span><span class="st">mybook2</span><span class="sc">\\</span><span class="st">mybook2/excel.xlsx&quot;</span>)</span>
<span id="cb136-2"><a href="data-wrangling.html#cb136-2" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb136-3"><a href="data-wrangling.html#cb136-3" tabindex="-1"></a>  <span class="fu">arrange</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb136-4"><a href="data-wrangling.html#cb136-4" tabindex="-1"></a>  <span class="fu">pull</span>(sex)</span></code></pre></div>
<pre><code>## [1] &quot;Female&quot; &quot;Female&quot; &quot;Male&quot;   &quot;Male&quot;</code></pre>
<ul>
<li>Coerce to lowercase<br />
Standardizing case helps reduce duplication (e.g., <code>"Male"</code> vs <code>"MALE"</code>).</li>
</ul>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="data-wrangling.html#cb138-1" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb138-2"><a href="data-wrangling.html#cb138-2" tabindex="-1"></a>  <span class="fu">arrange</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb138-3"><a href="data-wrangling.html#cb138-3" tabindex="-1"></a>  <span class="fu">pull</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb138-4"><a href="data-wrangling.html#cb138-4" tabindex="-1"></a>  <span class="fu">str_to_lower</span>()</span></code></pre></div>
<pre><code>## [1] &quot;female&quot; &quot;female&quot; &quot;male&quot;   &quot;male&quot;</code></pre>
<ul>
<li>Coerce to upper case<br />
Uppercase is sometimes used for code lists or standardized labels.</li>
</ul>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="data-wrangling.html#cb140-1" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb140-2"><a href="data-wrangling.html#cb140-2" tabindex="-1"></a>  <span class="fu">arrange</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb140-3"><a href="data-wrangling.html#cb140-3" tabindex="-1"></a>  <span class="fu">pull</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb140-4"><a href="data-wrangling.html#cb140-4" tabindex="-1"></a>  <span class="fu">str_to_upper</span>()</span></code></pre></div>
<pre><code>## [1] &quot;FEMALE&quot; &quot;FEMALE&quot; &quot;MALE&quot;   &quot;MALE&quot;</code></pre>
<ul>
<li>Title case<br />
Title case improves readability for display fields such as names.</li>
</ul>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="data-wrangling.html#cb142-1" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb142-2"><a href="data-wrangling.html#cb142-2" tabindex="-1"></a>  <span class="fu">arrange</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb142-3"><a href="data-wrangling.html#cb142-3" tabindex="-1"></a>  <span class="fu">pull</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb142-4"><a href="data-wrangling.html#cb142-4" tabindex="-1"></a>  <span class="fu">str_to_title</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Female&quot; &quot;Female&quot; &quot;Male&quot;   &quot;Male&quot;</code></pre>
<ul>
<li>Sentence case<br />
Sentence case is useful for free text or display labels.</li>
</ul>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="data-wrangling.html#cb144-1" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb144-2"><a href="data-wrangling.html#cb144-2" tabindex="-1"></a>  <span class="fu">arrange</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb144-3"><a href="data-wrangling.html#cb144-3" tabindex="-1"></a>  <span class="fu">pull</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb144-4"><a href="data-wrangling.html#cb144-4" tabindex="-1"></a>  <span class="fu">str_to_sentence</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Female&quot; &quot;Female&quot; &quot;Male&quot;   &quot;Male&quot;</code></pre>
<ul>
<li>Trim white space from the beginning and end<br />
Extra spaces are very common and can break joins or comparisons if not removed.</li>
</ul>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="data-wrangling.html#cb146-1" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="st">&quot;Ryan Edwards  &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Ryan Edwards&quot;</code></pre>
<ul>
<li>Remove the comma<br />
This shows a simple string replacement.</li>
</ul>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="data-wrangling.html#cb148-1" tabindex="-1"></a><span class="fu">str_replace</span>(</span>
<span id="cb148-2"><a href="data-wrangling.html#cb148-2" tabindex="-1"></a>  <span class="at">string      =</span> <span class="st">&quot;weston fox,&quot;</span>, </span>
<span id="cb148-3"><a href="data-wrangling.html#cb148-3" tabindex="-1"></a>  <span class="at">pattern     =</span> <span class="st">&quot;,&quot;</span>,</span>
<span id="cb148-4"><a href="data-wrangling.html#cb148-4" tabindex="-1"></a>  <span class="at">replacement =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb148-5"><a href="data-wrangling.html#cb148-5" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## [1] &quot;weston fox&quot;</code></pre>
<p>Applying the replacement to a dataset column is a typical cleaning step.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="data-wrangling.html#cb150-1" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb150-2"><a href="data-wrangling.html#cb150-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">str_replace</span>(sex, <span class="st">&quot;,&quot;</span>, <span class="st">&quot;&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 4
##   ID    sex    ht_in wgt_lbs
##   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt;
## 1 001   Male      71     190
## 2 002   Male      69     176
## 3 003   Female    64     130
## 4 004   Female    65     154</code></pre>
<ul>
<li>Separate values into component parts<br />
Regular expressions allow flexible extraction of patterns within strings. This is powerful for cleaning IDs, parsing codes, or extracting components from composite variables.</li>
</ul>
<p>regular express, <code>^\\w+ look for one or more consecutive word characters at the start of the character string and extract them.</code></p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="data-wrangling.html#cb152-1" tabindex="-1"></a><span class="fu">str_extract</span>(<span class="st">&quot;zariah hernandez&quot;</span>, <span class="st">&quot;^</span><span class="sc">\\</span><span class="st">w+&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;zariah&quot;</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="data-wrangling.html#cb154-1" tabindex="-1"></a><span class="fu">str_extract</span>(<span class="st">&quot;zariah hernandez&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">w+$&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;hernandez&quot;</code></pre>
<p><code>str_match()</code> returns captured groups based on parentheses in the pattern. This is useful when you need to parse structured expressions.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="data-wrangling.html#cb156-1" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_match</span>(<span class="st">&quot;mean(weight_3)&quot;</span>, <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">()(</span><span class="sc">\\</span><span class="st">w+)(</span><span class="sc">\\</span><span class="st">_)(</span><span class="sc">\\</span><span class="st">d+)(</span><span class="sc">\\</span><span class="st">))&quot;</span>)</span></code></pre></div>
<pre><code>##      [,1]         [,2] [,3]     [,4] [,5] [,6]
## [1,] &quot;(weight_3)&quot; &quot;(&quot;  &quot;weight&quot; &quot;_&quot;  &quot;3&quot;  &quot;)&quot;</code></pre>
<ul>
<li>Detect a special string to category<br />
<code>str_detect()</code> returns TRUE/FALSE based on whether the pattern is present. This is commonly used to create indicator variables.<br />
<code>index a special string</code></li>
</ul>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="data-wrangling.html#cb158-1" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb158-2"><a href="data-wrangling.html#cb158-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb158-3"><a href="data-wrangling.html#cb158-3" tabindex="-1"></a>    <span class="at">man   =</span> <span class="fu">str_detect</span>(sex, <span class="st">&quot;F&quot;</span>),</span>
<span id="cb158-4"><a href="data-wrangling.html#cb158-4" tabindex="-1"></a>    <span class="at">woman =</span> <span class="fu">str_detect</span>(sex, <span class="st">&quot;M&quot;</span>),</span>
<span id="cb158-5"><a href="data-wrangling.html#cb158-5" tabindex="-1"></a>    <span class="at">all   =</span> <span class="fu">str_detect</span>(sex, <span class="st">&quot;ale&quot;</span>)</span>
<span id="cb158-6"><a href="data-wrangling.html#cb158-6" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb158-7"><a href="data-wrangling.html#cb158-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">man_dummy =</span> <span class="fu">as.numeric</span>(man))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 8
##   ID    sex    ht_in wgt_lbs man   woman all   man_dummy
##   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt;     &lt;dbl&gt;
## 1 001   Male      71     190 FALSE TRUE  TRUE          0
## 2 002   Male      69     176 FALSE TRUE  TRUE          0
## 3 003   Female    64     130 TRUE  FALSE TRUE          1
## 4 004   Female    65     154 TRUE  FALSE TRUE          1</code></pre>
<p>This is a similar example using <code>ifelse()</code> to create a numeric dummy variable. In practice, <code>if_else()</code> is preferred because it is stricter about types, but both patterns are frequently seen.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="data-wrangling.html#cb160-1" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb160-2"><a href="data-wrangling.html#cb160-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb160-3"><a href="data-wrangling.html#cb160-3" tabindex="-1"></a>    <span class="at">dummy   =</span>   <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(sex, <span class="st">&quot;F&quot;</span>),<span class="dv">0</span>,<span class="dv">1</span>)   </span>
<span id="cb160-4"><a href="data-wrangling.html#cb160-4" tabindex="-1"></a>  )  </span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   ID    sex    ht_in wgt_lbs dummy
##   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
## 1 001   Male      71     190     1
## 2 002   Male      69     176     1
## 3 003   Female    64     130     0
## 4 004   Female    65     154     0</code></pre>
</div>
<div id="conditional-operations" class="section level3 hasAnchor" number="1.1.15">
<h3><span class="header-section-number">1.1.15</span> Conditional operations<a href="data-wrangling.html#conditional-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Conditional logic is used to define categories, flags, and derived endpoints. In clinical and observational data, this is often required for defining analysis populations, endpoint derivations, or clinical classifications.</p>
<ul>
<li>Testing multiple conditions simultaneously<br />
Here we construct a toy blood pressure dataset and classify observations based on systolic and diastolic thresholds.</li>
</ul>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="data-wrangling.html#cb162-1" tabindex="-1"></a>blood_pressure <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb162-2"><a href="data-wrangling.html#cb162-2" tabindex="-1"></a>  <span class="at">id     =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb162-3"><a href="data-wrangling.html#cb162-3" tabindex="-1"></a>  <span class="at">sysbp  =</span> <span class="fu">c</span>(<span class="dv">152</span>, <span class="dv">120</span>, <span class="dv">119</span>, <span class="dv">123</span>, <span class="dv">135</span>, <span class="dv">83</span>, <span class="dv">191</span>, <span class="dv">147</span>, <span class="dv">209</span>, <span class="dv">166</span>),</span>
<span id="cb162-4"><a href="data-wrangling.html#cb162-4" tabindex="-1"></a>  <span class="at">diasbp =</span> <span class="fu">c</span>(<span class="dv">78</span>, <span class="dv">60</span>, <span class="dv">88</span>, <span class="dv">76</span>, <span class="dv">85</span>, <span class="dv">54</span>, <span class="dv">116</span>, <span class="dv">95</span>, <span class="dv">100</span>, <span class="dv">106</span>)</span>
<span id="cb162-5"><a href="data-wrangling.html#cb162-5" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb162-6"><a href="data-wrangling.html#cb162-6" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##       id sysbp diasbp
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1     1   152     78
##  2     2   120     60
##  3     3   119     88
##  4     4   123     76
##  5     5   135     85
##  6     6    83     54
##  7     7   191    116
##  8     8   147     95
##  9     9   209    100
## 10    10   166    106</code></pre>
<p><code>if_else()</code> is a tidyverse version of <code>ifelse()</code> and is often preferred for clearer type handling.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="data-wrangling.html#cb164-1" tabindex="-1"></a>blood_pressure <span class="sc">%&gt;%</span> </span>
<span id="cb164-2"><a href="data-wrangling.html#cb164-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bp =</span> <span class="fu">if_else</span>(sysbp <span class="sc">&lt;</span> <span class="dv">120</span> <span class="sc">&amp;</span> diasbp <span class="sc">&lt;</span> <span class="dv">80</span>, <span class="st">&quot;Normal&quot;</span>, <span class="st">&quot;Not Normal&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##       id sysbp diasbp bp        
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     
##  1     1   152     78 Not Normal
##  2     2   120     60 Not Normal
##  3     3   119     88 Not Normal
##  4     4   123     76 Not Normal
##  5     5   135     85 Not Normal
##  6     6    83     54 Normal    
##  7     7   191    116 Not Normal
##  8     8   147     95 Not Normal
##  9     9   209    100 Not Normal
## 10    10   166    106 Not Normal</code></pre>
<ul>
<li>Using case_when function<br />
<code>case_when()</code> is the standard approach for multiple mutually exclusive conditions. It improves readability compared with nested <code>if_else()</code> statements.</li>
</ul>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="data-wrangling.html#cb166-1" tabindex="-1"></a>blood_pressure <span class="sc">%&gt;%</span> </span>
<span id="cb166-2"><a href="data-wrangling.html#cb166-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb166-3"><a href="data-wrangling.html#cb166-3" tabindex="-1"></a>    <span class="at">bp =</span> <span class="fu">case_when</span>(</span>
<span id="cb166-4"><a href="data-wrangling.html#cb166-4" tabindex="-1"></a>      sysbp <span class="sc">&lt;</span> <span class="dv">120</span> <span class="sc">&amp;</span> diasbp <span class="sc">&lt;</span> <span class="dv">80</span>                               <span class="sc">~</span> <span class="st">&quot;Normal&quot;</span>,</span>
<span id="cb166-5"><a href="data-wrangling.html#cb166-5" tabindex="-1"></a>      sysbp <span class="sc">&gt;=</span> <span class="dv">120</span> <span class="sc">&amp;</span> sysbp <span class="sc">&lt;</span> <span class="dv">130</span> <span class="sc">&amp;</span> diasbp <span class="sc">&lt;</span> <span class="dv">80</span>                <span class="sc">~</span> <span class="st">&quot;Elevated&quot;</span>,</span>
<span id="cb166-6"><a href="data-wrangling.html#cb166-6" tabindex="-1"></a>      sysbp <span class="sc">&gt;=</span> <span class="dv">130</span> <span class="sc">&amp;</span> sysbp <span class="sc">&lt;</span> <span class="dv">140</span> <span class="sc">|</span> diasbp <span class="sc">&gt;=</span> <span class="dv">80</span> <span class="sc">&amp;</span> diasbp <span class="sc">&lt;</span> <span class="dv">90</span> <span class="sc">~</span> <span class="st">&quot;Hypertension Stage 1&quot;</span>,</span>
<span id="cb166-7"><a href="data-wrangling.html#cb166-7" tabindex="-1"></a>      sysbp <span class="sc">&gt;=</span> <span class="dv">140</span> <span class="sc">|</span> diasbp <span class="sc">&gt;=</span> <span class="dv">90</span>                             <span class="sc">~</span> <span class="st">&quot;Hypertension Stage 2&quot;</span></span>
<span id="cb166-8"><a href="data-wrangling.html#cb166-8" tabindex="-1"></a>    )</span>
<span id="cb166-9"><a href="data-wrangling.html#cb166-9" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##       id sysbp diasbp bp                  
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;               
##  1     1   152     78 Hypertension Stage 2
##  2     2   120     60 Elevated            
##  3     3   119     88 Hypertension Stage 1
##  4     4   123     76 Elevated            
##  5     5   135     85 Hypertension Stage 1
##  6     6    83     54 Normal              
##  7     7   191    116 Hypertension Stage 2
##  8     8   147     95 Hypertension Stage 2
##  9     9   209    100 Hypertension Stage 2
## 10    10   166    106 Hypertension Stage 2</code></pre>
<ul>
<li>Recoding variables<br />
Sometimes you want a numeric coding for modeling, and a labeled factor for interpretability in tables. Here we create both in one step.</li>
</ul>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="data-wrangling.html#cb168-1" tabindex="-1"></a>blood_pressure <span class="sc">%&gt;%</span> </span>
<span id="cb168-2"><a href="data-wrangling.html#cb168-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb168-3"><a href="data-wrangling.html#cb168-3" tabindex="-1"></a>    <span class="at">bp=</span> <span class="fu">case_when</span>(</span>
<span id="cb168-4"><a href="data-wrangling.html#cb168-4" tabindex="-1"></a>      sysbp <span class="sc">&lt;</span> <span class="dv">120</span> <span class="sc">&amp;</span> diasbp <span class="sc">&lt;</span> <span class="dv">80</span>                               <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb168-5"><a href="data-wrangling.html#cb168-5" tabindex="-1"></a>      sysbp <span class="sc">&gt;=</span> <span class="dv">120</span> <span class="sc">&amp;</span> sysbp <span class="sc">&lt;</span> <span class="dv">130</span> <span class="sc">&amp;</span> diasbp <span class="sc">&lt;</span> <span class="dv">80</span>                <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb168-6"><a href="data-wrangling.html#cb168-6" tabindex="-1"></a>      sysbp <span class="sc">&gt;=</span> <span class="dv">130</span> <span class="sc">&amp;</span> sysbp <span class="sc">&lt;</span> <span class="dv">140</span> <span class="sc">|</span> diasbp <span class="sc">&gt;=</span> <span class="dv">80</span> <span class="sc">&amp;</span> diasbp <span class="sc">&lt;</span> <span class="dv">90</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb168-7"><a href="data-wrangling.html#cb168-7" tabindex="-1"></a>      sysbp <span class="sc">&gt;=</span> <span class="dv">140</span> <span class="sc">|</span> diasbp <span class="sc">&gt;=</span> <span class="dv">90</span>                             <span class="sc">~</span> <span class="dv">4</span></span>
<span id="cb168-8"><a href="data-wrangling.html#cb168-8" tabindex="-1"></a>    )</span>
<span id="cb168-9"><a href="data-wrangling.html#cb168-9" tabindex="-1"></a>  ,</span>
<span id="cb168-10"><a href="data-wrangling.html#cb168-10" tabindex="-1"></a> <span class="at">bp_f =</span> <span class="fu">factor</span>( bp,</span>
<span id="cb168-11"><a href="data-wrangling.html#cb168-11" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb168-12"><a href="data-wrangling.html#cb168-12" tabindex="-1"></a>        <span class="st">&quot;normal&quot;</span>, <span class="st">&quot;elevated&quot;</span>, <span class="st">&quot;stage 1&quot;</span>,</span>
<span id="cb168-13"><a href="data-wrangling.html#cb168-13" tabindex="-1"></a>        <span class="st">&quot;stage 2&quot;</span>)</span>
<span id="cb168-14"><a href="data-wrangling.html#cb168-14" tabindex="-1"></a>      )</span>
<span id="cb168-15"><a href="data-wrangling.html#cb168-15" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 5
##       id sysbp diasbp    bp bp_f    
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;   
##  1     1   152     78     4 stage 2 
##  2     2   120     60     2 elevated
##  3     3   119     88     3 stage 1 
##  4     4   123     76     2 elevated
##  5     5   135     85     3 stage 1 
##  6     6    83     54     1 normal  
##  7     7   191    116     4 stage 2 
##  8     8   147     95     4 stage 2 
##  9     9   209    100     4 stage 2 
## 10    10   166    106     4 stage 2</code></pre>
<ul>
<li>Recoding missing<br />
Missing values are common in real datasets. A typical step is to recode special numeric values (e.g., 7, 9, 99) to missing.</li>
</ul>
<p><code>using NA_real instead of NA.</code><br />
<code>NA_real_</code> ensures the result stays numeric (double). This avoids unintended type conversion.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="data-wrangling.html#cb170-1" tabindex="-1"></a>demographics <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb170-2"><a href="data-wrangling.html#cb170-2" tabindex="-1"></a>    <span class="at">race     =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">3</span>),</span>
<span id="cb170-3"><a href="data-wrangling.html#cb170-3" tabindex="-1"></a>    <span class="at">hispanic =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb170-4"><a href="data-wrangling.html#cb170-4" tabindex="-1"></a>  )</span>
<span id="cb170-5"><a href="data-wrangling.html#cb170-5" tabindex="-1"></a></span>
<span id="cb170-6"><a href="data-wrangling.html#cb170-6" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb170-7"><a href="data-wrangling.html#cb170-7" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb170-8"><a href="data-wrangling.html#cb170-8" tabindex="-1"></a>    <span class="co"># Recode 7 and 9 to missing</span></span>
<span id="cb170-9"><a href="data-wrangling.html#cb170-9" tabindex="-1"></a>    <span class="at">race_recode =</span> <span class="fu">if_else</span>(race <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> race <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA_real_</span>, race),</span>
<span id="cb170-10"><a href="data-wrangling.html#cb170-10" tabindex="-1"></a>    <span class="at">hispanic_recode =</span> <span class="fu">if_else</span>(hispanic <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> hispanic <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA_real_</span>, hispanic)</span>
<span id="cb170-11"><a href="data-wrangling.html#cb170-11" tabindex="-1"></a>  ) </span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##     race hispanic race_recode hispanic_recode
##    &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt;
##  1     1        7           1              NA
##  2     2        0           2               0
##  3     1        1           1               1
##  4     4        0           4               0
##  5     7        1          NA               1
##  6     1        0           1               0
##  7     2        1           2               1
##  8     9        9          NA              NA
##  9     1        0           1               0
## 10     3        1           3               1</code></pre>
<p><code>check whether or not</code><br />
Missing values can propagate through logical checks. This pattern shows one way to replace missing logical values with FALSE.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="data-wrangling.html#cb172-1" tabindex="-1"></a>blood_pressure <span class="sc">%&gt;%</span> </span>
<span id="cb172-2"><a href="data-wrangling.html#cb172-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb172-3"><a href="data-wrangling.html#cb172-3" tabindex="-1"></a>    <span class="at">match =</span> sysbp <span class="sc">==</span> sysbp,</span>
<span id="cb172-4"><a href="data-wrangling.html#cb172-4" tabindex="-1"></a>    <span class="at">n_match =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(match), <span class="cn">FALSE</span>, match)</span>
<span id="cb172-5"><a href="data-wrangling.html#cb172-5" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 5
##       id sysbp diasbp match n_match
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;lgl&gt; &lt;lgl&gt;  
##  1     1   152     78 TRUE  TRUE   
##  2     2   120     60 TRUE  TRUE   
##  3     3   119     88 TRUE  TRUE   
##  4     4   123     76 TRUE  TRUE   
##  5     5   135     85 TRUE  TRUE   
##  6     6    83     54 TRUE  TRUE   
##  7     7   191    116 TRUE  TRUE   
##  8     8   147     95 TRUE  TRUE   
##  9     9   209    100 TRUE  TRUE   
## 10    10   166    106 TRUE  TRUE</code></pre>
<!-- ======================= -->
</div>
</div>
<div id="how-to-do-aggregation-summarization" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> How to do aggregation/ summarization<a href="data-wrangling.html#how-to-do-aggregation-summarization" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Aggregation is used to produce summary statistics for reporting and exploratory analysis. Typical examples include baseline summaries by treatment, counts by category, and descriptive statistics by subgroup.</p>
<div id="summarization-after-grouping" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Summarization after grouping<a href="data-wrangling.html#summarization-after-grouping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We use <code>group_by()</code> to define groups, then <code>summarise()</code> (or <code>summarize()</code>) to compute summary statistics within each group.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="data-wrangling.html#cb174-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>This chunk is hidden but ensures the package is available for the following code blocks in some knitted settings.</p>
<p>This example calculates the mean Sepal.Length for each species, then sorts from highest to lowest.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="data-wrangling.html#cb175-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb175-2"><a href="data-wrangling.html#cb175-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb175-3"><a href="data-wrangling.html#cb175-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Support =</span> <span class="fu">mean</span>(Sepal.Length)) <span class="sc">%&gt;%</span>    <span class="co"># average</span></span>
<span id="cb175-4"><a href="data-wrangling.html#cb175-4" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>Support)                         <span class="co"># sort</span></span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   Species    Support
##   &lt;fct&gt;        &lt;dbl&gt;
## 1 virginica     6.59
## 2 versicolor    5.94
## 3 setosa        5.01</code></pre>
<p>This example shows how to compute multiple summary statistics at once. Creating intermediate metrics (like <code>diff</code>) is useful for quick comparisons across groups.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="data-wrangling.html#cb177-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb177-2"><a href="data-wrangling.html#cb177-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb177-3"><a href="data-wrangling.html#cb177-3" tabindex="-1"></a><span class="fu">summarize</span>(<span class="at">mean_s =</span> <span class="fu">mean</span>(Sepal.Width), </span>
<span id="cb177-4"><a href="data-wrangling.html#cb177-4" tabindex="-1"></a>            <span class="at">meas_p =</span> <span class="fu">mean</span>(Petal.Length), </span>
<span id="cb177-5"><a href="data-wrangling.html#cb177-5" tabindex="-1"></a>            <span class="at">diff =</span> <span class="fu">mean</span>(Sepal.Width<span class="sc">-</span>Petal.Length)) <span class="sc">%&gt;%</span> </span>
<span id="cb177-6"><a href="data-wrangling.html#cb177-6" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>diff) </span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   Species    mean_s meas_p  diff
##   &lt;fct&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 setosa       3.43   1.46  1.97
## 2 versicolor   2.77   4.26 -1.49
## 3 virginica    2.97   5.55 -2.58</code></pre>
<p>This example adds sample size (<code>n</code>) and standard deviation (<code>sd</code>). These are standard descriptive summaries for continuous variables.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="data-wrangling.html#cb179-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb179-2"><a href="data-wrangling.html#cb179-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb179-3"><a href="data-wrangling.html#cb179-3" tabindex="-1"></a><span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb179-4"><a href="data-wrangling.html#cb179-4" tabindex="-1"></a>            <span class="at">meas_p =</span> <span class="fu">mean</span>(Petal.Length), </span>
<span id="cb179-5"><a href="data-wrangling.html#cb179-5" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(Petal.Length))  </span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   Species        n meas_p    sd
##   &lt;fct&gt;      &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 setosa        50   1.46 0.174
## 2 versicolor    50   4.26 0.470
## 3 virginica     50   5.55 0.552</code></pre>
</div>
<div id="summarization-with-upgroup" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Summarization with upgroup<a href="data-wrangling.html#summarization-with-upgroup" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you have grouped data but want overall summaries across all rows, you can remove the grouping structure using <code>ungroup()</code>.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="data-wrangling.html#cb181-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb181-2"><a href="data-wrangling.html#cb181-2" tabindex="-1"></a>  <span class="fu">ungroup</span>( ) <span class="sc">%&gt;%</span> </span>
<span id="cb181-3"><a href="data-wrangling.html#cb181-3" tabindex="-1"></a><span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb181-4"><a href="data-wrangling.html#cb181-4" tabindex="-1"></a>            <span class="at">meas_p =</span> <span class="fu">mean</span>(Petal.Length), </span>
<span id="cb181-5"><a href="data-wrangling.html#cb181-5" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(Petal.Length))  </span></code></pre></div>
<pre><code>##     n meas_p       sd
## 1 150  3.758 1.765298</code></pre>
</div>
<div id="mutate-new-variables-after-grouping" class="section level3 hasAnchor" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Mutate new variables after grouping<a href="data-wrangling.html#mutate-new-variables-after-grouping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>mutate()</code> after <code>group_by()</code> adds group-level summaries back to each row. This is useful when you want both row-level values and group-level context in the same dataset (e.g., for plotting or QC checks).</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="data-wrangling.html#cb183-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb183-2"><a href="data-wrangling.html#cb183-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb183-3"><a href="data-wrangling.html#cb183-3" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb183-4"><a href="data-wrangling.html#cb183-4" tabindex="-1"></a>            <span class="at">meas_p =</span> <span class="fu">mean</span>(Petal.Length), </span>
<span id="cb183-5"><a href="data-wrangling.html#cb183-5" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(Petal.Length))  </span></code></pre></div>
<pre><code>## # A tibble: 150 × 8
## # Groups:   Species [3]
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species     n meas_p    sd
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;
##  1          5.1         3.5          1.4         0.2 setosa     50   1.46 0.174
##  2          4.9         3            1.4         0.2 setosa     50   1.46 0.174
##  3          4.7         3.2          1.3         0.2 setosa     50   1.46 0.174
##  4          4.6         3.1          1.5         0.2 setosa     50   1.46 0.174
##  5          5           3.6          1.4         0.2 setosa     50   1.46 0.174
##  6          5.4         3.9          1.7         0.4 setosa     50   1.46 0.174
##  7          4.6         3.4          1.4         0.3 setosa     50   1.46 0.174
##  8          5           3.4          1.5         0.2 setosa     50   1.46 0.174
##  9          4.4         2.9          1.4         0.2 setosa     50   1.46 0.174
## 10          4.9         3.1          1.5         0.1 setosa     50   1.46 0.174
## # ℹ 140 more rows</code></pre>
<p>This example demonstrates:<br />
- computing group-level summaries with missing handling (<code>na.rm = T</code>), and<br />
- then summarizing again to produce one row per group.<br />
In practice, this pattern appears in QC workflows and layered summary derivations.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="data-wrangling.html#cb185-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb185-2"><a href="data-wrangling.html#cb185-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb185-3"><a href="data-wrangling.html#cb185-3" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb185-4"><a href="data-wrangling.html#cb185-4" tabindex="-1"></a>            <span class="at">meas_p =</span> <span class="fu">mean</span>(Petal.Length, <span class="at">na.rm =</span> T), </span>
<span id="cb185-5"><a href="data-wrangling.html#cb185-5" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(Petal.Length))  <span class="sc">%&gt;%</span> </span>
<span id="cb185-6"><a href="data-wrangling.html#cb185-6" tabindex="-1"></a>  <span class="fu">summarize</span> (<span class="at">n_mean =</span> <span class="fu">paste</span> (<span class="st">&quot;sample size:&quot;</span>,<span class="fu">mean</span>(n)), </span>
<span id="cb185-7"><a href="data-wrangling.html#cb185-7" tabindex="-1"></a>            <span class="at">meas_p =</span> <span class="fu">mean</span>(Petal.Length), </span>
<span id="cb185-8"><a href="data-wrangling.html#cb185-8" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(Petal.Length))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   Species    n_mean          meas_p    sd
##   &lt;fct&gt;      &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt;
## 1 setosa     sample size: 50   1.46 0.174
## 2 versicolor sample size: 50   4.26 0.470
## 3 virginica  sample size: 50   5.55 0.552</code></pre>
</div>
<div id="recode-and-generate-new-variables-then-value-label" class="section level3 hasAnchor" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Recode and generate new variables, then value label<a href="data-wrangling.html#recode-and-generate-new-variables-then-value-label" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is a common pattern: create a derived variable with conditional logic, then attach labels for interpretability.<br />
Here, we set one category to missing and then relabel remaining categories using a factor.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="data-wrangling.html#cb187-1" tabindex="-1"></a>irisifelse <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> </span>
<span id="cb187-2"><a href="data-wrangling.html#cb187-2" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">Species2 =</span> <span class="fu">ifelse</span>(Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>, <span class="cn">NA</span>, Species))</span>
<span id="cb187-3"><a href="data-wrangling.html#cb187-3" tabindex="-1"></a><span class="co"># relabel values</span></span>
<span id="cb187-4"><a href="data-wrangling.html#cb187-4" tabindex="-1"></a>irisifelse<span class="sc">$</span>Species2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(irisifelse<span class="sc">$</span>Species2,<span class="at">labels =</span> <span class="fu">c</span>( <span class="st">&quot;versi&quot;</span>,<span class="st">&quot;virg&quot;</span>))</span>
<span id="cb187-5"><a href="data-wrangling.html#cb187-5" tabindex="-1"></a>irisifelse</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species Species2
## 1            5.1         3.5          1.4         0.2     setosa     &lt;NA&gt;
## 2            4.9         3.0          1.4         0.2     setosa     &lt;NA&gt;
## 3            4.7         3.2          1.3         0.2     setosa     &lt;NA&gt;
## 4            4.6         3.1          1.5         0.2     setosa     &lt;NA&gt;
## 5            5.0         3.6          1.4         0.2     setosa     &lt;NA&gt;
## 6            5.4         3.9          1.7         0.4     setosa     &lt;NA&gt;
## 7            4.6         3.4          1.4         0.3     setosa     &lt;NA&gt;
## 8            5.0         3.4          1.5         0.2     setosa     &lt;NA&gt;
## 9            4.4         2.9          1.4         0.2     setosa     &lt;NA&gt;
## 10           4.9         3.1          1.5         0.1     setosa     &lt;NA&gt;
## 11           5.4         3.7          1.5         0.2     setosa     &lt;NA&gt;
## 12           4.8         3.4          1.6         0.2     setosa     &lt;NA&gt;
## 13           4.8         3.0          1.4         0.1     setosa     &lt;NA&gt;
## 14           4.3         3.0          1.1         0.1     setosa     &lt;NA&gt;
## 15           5.8         4.0          1.2         0.2     setosa     &lt;NA&gt;
## 16           5.7         4.4          1.5         0.4     setosa     &lt;NA&gt;
## 17           5.4         3.9          1.3         0.4     setosa     &lt;NA&gt;
## 18           5.1         3.5          1.4         0.3     setosa     &lt;NA&gt;
## 19           5.7         3.8          1.7         0.3     setosa     &lt;NA&gt;
## 20           5.1         3.8          1.5         0.3     setosa     &lt;NA&gt;
## 21           5.4         3.4          1.7         0.2     setosa     &lt;NA&gt;
## 22           5.1         3.7          1.5         0.4     setosa     &lt;NA&gt;
## 23           4.6         3.6          1.0         0.2     setosa     &lt;NA&gt;
## 24           5.1         3.3          1.7         0.5     setosa     &lt;NA&gt;
## 25           4.8         3.4          1.9         0.2     setosa     &lt;NA&gt;
## 26           5.0         3.0          1.6         0.2     setosa     &lt;NA&gt;
## 27           5.0         3.4          1.6         0.4     setosa     &lt;NA&gt;
## 28           5.2         3.5          1.5         0.2     setosa     &lt;NA&gt;
## 29           5.2         3.4          1.4         0.2     setosa     &lt;NA&gt;
## 30           4.7         3.2          1.6         0.2     setosa     &lt;NA&gt;
## 31           4.8         3.1          1.6         0.2     setosa     &lt;NA&gt;
## 32           5.4         3.4          1.5         0.4     setosa     &lt;NA&gt;
## 33           5.2         4.1          1.5         0.1     setosa     &lt;NA&gt;
## 34           5.5         4.2          1.4         0.2     setosa     &lt;NA&gt;
## 35           4.9         3.1          1.5         0.2     setosa     &lt;NA&gt;
## 36           5.0         3.2          1.2         0.2     setosa     &lt;NA&gt;
## 37           5.5         3.5          1.3         0.2     setosa     &lt;NA&gt;
## 38           4.9         3.6          1.4         0.1     setosa     &lt;NA&gt;
## 39           4.4         3.0          1.3         0.2     setosa     &lt;NA&gt;
## 40           5.1         3.4          1.5         0.2     setosa     &lt;NA&gt;
## 41           5.0         3.5          1.3         0.3     setosa     &lt;NA&gt;
## 42           4.5         2.3          1.3         0.3     setosa     &lt;NA&gt;
## 43           4.4         3.2          1.3         0.2     setosa     &lt;NA&gt;
## 44           5.0         3.5          1.6         0.6     setosa     &lt;NA&gt;
## 45           5.1         3.8          1.9         0.4     setosa     &lt;NA&gt;
## 46           4.8         3.0          1.4         0.3     setosa     &lt;NA&gt;
## 47           5.1         3.8          1.6         0.2     setosa     &lt;NA&gt;
## 48           4.6         3.2          1.4         0.2     setosa     &lt;NA&gt;
## 49           5.3         3.7          1.5         0.2     setosa     &lt;NA&gt;
## 50           5.0         3.3          1.4         0.2     setosa     &lt;NA&gt;
## 51           7.0         3.2          4.7         1.4 versicolor    versi
## 52           6.4         3.2          4.5         1.5 versicolor    versi
## 53           6.9         3.1          4.9         1.5 versicolor    versi
## 54           5.5         2.3          4.0         1.3 versicolor    versi
## 55           6.5         2.8          4.6         1.5 versicolor    versi
## 56           5.7         2.8          4.5         1.3 versicolor    versi
## 57           6.3         3.3          4.7         1.6 versicolor    versi
## 58           4.9         2.4          3.3         1.0 versicolor    versi
## 59           6.6         2.9          4.6         1.3 versicolor    versi
## 60           5.2         2.7          3.9         1.4 versicolor    versi
## 61           5.0         2.0          3.5         1.0 versicolor    versi
## 62           5.9         3.0          4.2         1.5 versicolor    versi
## 63           6.0         2.2          4.0         1.0 versicolor    versi
## 64           6.1         2.9          4.7         1.4 versicolor    versi
## 65           5.6         2.9          3.6         1.3 versicolor    versi
## 66           6.7         3.1          4.4         1.4 versicolor    versi
## 67           5.6         3.0          4.5         1.5 versicolor    versi
## 68           5.8         2.7          4.1         1.0 versicolor    versi
## 69           6.2         2.2          4.5         1.5 versicolor    versi
## 70           5.6         2.5          3.9         1.1 versicolor    versi
## 71           5.9         3.2          4.8         1.8 versicolor    versi
## 72           6.1         2.8          4.0         1.3 versicolor    versi
## 73           6.3         2.5          4.9         1.5 versicolor    versi
## 74           6.1         2.8          4.7         1.2 versicolor    versi
## 75           6.4         2.9          4.3         1.3 versicolor    versi
## 76           6.6         3.0          4.4         1.4 versicolor    versi
## 77           6.8         2.8          4.8         1.4 versicolor    versi
## 78           6.7         3.0          5.0         1.7 versicolor    versi
## 79           6.0         2.9          4.5         1.5 versicolor    versi
## 80           5.7         2.6          3.5         1.0 versicolor    versi
## 81           5.5         2.4          3.8         1.1 versicolor    versi
## 82           5.5         2.4          3.7         1.0 versicolor    versi
## 83           5.8         2.7          3.9         1.2 versicolor    versi
## 84           6.0         2.7          5.1         1.6 versicolor    versi
## 85           5.4         3.0          4.5         1.5 versicolor    versi
## 86           6.0         3.4          4.5         1.6 versicolor    versi
## 87           6.7         3.1          4.7         1.5 versicolor    versi
## 88           6.3         2.3          4.4         1.3 versicolor    versi
## 89           5.6         3.0          4.1         1.3 versicolor    versi
## 90           5.5         2.5          4.0         1.3 versicolor    versi
## 91           5.5         2.6          4.4         1.2 versicolor    versi
## 92           6.1         3.0          4.6         1.4 versicolor    versi
## 93           5.8         2.6          4.0         1.2 versicolor    versi
## 94           5.0         2.3          3.3         1.0 versicolor    versi
## 95           5.6         2.7          4.2         1.3 versicolor    versi
## 96           5.7         3.0          4.2         1.2 versicolor    versi
## 97           5.7         2.9          4.2         1.3 versicolor    versi
## 98           6.2         2.9          4.3         1.3 versicolor    versi
## 99           5.1         2.5          3.0         1.1 versicolor    versi
## 100          5.7         2.8          4.1         1.3 versicolor    versi
## 101          6.3         3.3          6.0         2.5  virginica     virg
## 102          5.8         2.7          5.1         1.9  virginica     virg
## 103          7.1         3.0          5.9         2.1  virginica     virg
## 104          6.3         2.9          5.6         1.8  virginica     virg
## 105          6.5         3.0          5.8         2.2  virginica     virg
## 106          7.6         3.0          6.6         2.1  virginica     virg
## 107          4.9         2.5          4.5         1.7  virginica     virg
## 108          7.3         2.9          6.3         1.8  virginica     virg
## 109          6.7         2.5          5.8         1.8  virginica     virg
## 110          7.2         3.6          6.1         2.5  virginica     virg
## 111          6.5         3.2          5.1         2.0  virginica     virg
## 112          6.4         2.7          5.3         1.9  virginica     virg
## 113          6.8         3.0          5.5         2.1  virginica     virg
## 114          5.7         2.5          5.0         2.0  virginica     virg
## 115          5.8         2.8          5.1         2.4  virginica     virg
## 116          6.4         3.2          5.3         2.3  virginica     virg
## 117          6.5         3.0          5.5         1.8  virginica     virg
## 118          7.7         3.8          6.7         2.2  virginica     virg
## 119          7.7         2.6          6.9         2.3  virginica     virg
## 120          6.0         2.2          5.0         1.5  virginica     virg
## 121          6.9         3.2          5.7         2.3  virginica     virg
## 122          5.6         2.8          4.9         2.0  virginica     virg
## 123          7.7         2.8          6.7         2.0  virginica     virg
## 124          6.3         2.7          4.9         1.8  virginica     virg
## 125          6.7         3.3          5.7         2.1  virginica     virg
## 126          7.2         3.2          6.0         1.8  virginica     virg
## 127          6.2         2.8          4.8         1.8  virginica     virg
## 128          6.1         3.0          4.9         1.8  virginica     virg
## 129          6.4         2.8          5.6         2.1  virginica     virg
## 130          7.2         3.0          5.8         1.6  virginica     virg
## 131          7.4         2.8          6.1         1.9  virginica     virg
## 132          7.9         3.8          6.4         2.0  virginica     virg
## 133          6.4         2.8          5.6         2.2  virginica     virg
## 134          6.3         2.8          5.1         1.5  virginica     virg
## 135          6.1         2.6          5.6         1.4  virginica     virg
## 136          7.7         3.0          6.1         2.3  virginica     virg
## 137          6.3         3.4          5.6         2.4  virginica     virg
## 138          6.4         3.1          5.5         1.8  virginica     virg
## 139          6.0         3.0          4.8         1.8  virginica     virg
## 140          6.9         3.1          5.4         2.1  virginica     virg
## 141          6.7         3.1          5.6         2.4  virginica     virg
## 142          6.9         3.1          5.1         2.3  virginica     virg
## 143          5.8         2.7          5.1         1.9  virginica     virg
## 144          6.8         3.2          5.9         2.3  virginica     virg
## 145          6.7         3.3          5.7         2.5  virginica     virg
## 146          6.7         3.0          5.2         2.3  virginica     virg
## 147          6.3         2.5          5.0         1.9  virginica     virg
## 148          6.5         3.0          5.2         2.0  virginica     virg
## 149          6.2         3.4          5.4         2.3  virginica     virg
## 150          5.9         3.0          5.1         1.8  virginica     virg</code></pre>
<p>Always check structure after transformations, especially when factors and missing values are involved.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="data-wrangling.html#cb189-1" tabindex="-1"></a><span class="fu">str</span>(irisifelse)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  6 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Species2    : Factor w/ 2 levels &quot;versi&quot;,&quot;virg&quot;: NA NA NA NA NA NA NA NA NA NA ...</code></pre>
</div>
</div>
<div id="how-to-creat-table-1-with-test" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> How to creat table 1 with test<a href="data-wrangling.html#how-to-creat-table-1-with-test" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In clinical trial reporting, “Table 1” typically refers to baseline characteristics (e.g., age, sex, race, key labs) summarized by treatment group. This often includes statistical tests (or standardized differences) to describe balance between groups.<br />
The link below provides a full example workflow.</p>
<p><a href="https://rpubs.com/Daniel_He/1041833">see here</a></p>
</div>
<div id="imputing-missing-data-with-mice" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Imputing Missing Data with MICE<a href="data-wrangling.html#imputing-missing-data-with-mice" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Missing data are common in clinical and observational studies. Multiple imputation (e.g., using MICE) is a practical approach under missing-at-random assumptions, and it allows uncertainty due to missingness to be propagated into final inference.<br />
The link below provides an example implementation.</p>
<p><a href="https://rpubs.com/Daniel_He/1140881">see here</a></p>

<!-- # --- -->
<!-- # title: "Introduction to machine learning" -->
<!-- # author: "Daniel He" -->
<!-- # date: "2026-02-20" -->
<!-- # output: -->
<!-- #   html_document: -->
<!-- #     toc: true -->
<!-- #     toc_depth: 3 -->
<!-- #   pdf_document: -->
<!-- #     toc: true -->
<!-- #     toc_depth: 3 -->
<!-- #   word_document: -->
<!-- #     toc: true -->
<!-- #     toc_depth: 3 -->
<!-- # --- -->
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="machine-learning.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/USERNAME/REPO/edit/BRANCH/01-datawrangling.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf", "_main.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
